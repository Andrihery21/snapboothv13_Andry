function vx(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var yt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ku(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function yx(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var bm={exports:{}},Ka={},Sm={exports:{}},X={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var so=Symbol.for("react.element"),xx=Symbol.for("react.portal"),wx=Symbol.for("react.fragment"),bx=Symbol.for("react.strict_mode"),Sx=Symbol.for("react.profiler"),_x=Symbol.for("react.provider"),Ex=Symbol.for("react.context"),jx=Symbol.for("react.forward_ref"),kx=Symbol.for("react.suspense"),Cx=Symbol.for("react.memo"),Px=Symbol.for("react.lazy"),Eh=Symbol.iterator;function Tx(e){return e===null||typeof e!="object"?null:(e=Eh&&e[Eh]||e["@@iterator"],typeof e=="function"?e:null)}var _m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Em=Object.assign,jm={};function Fs(e,t,n){this.props=e,this.context=t,this.refs=jm,this.updater=n||_m}Fs.prototype.isReactComponent={};Fs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Fs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function km(){}km.prototype=Fs.prototype;function Ju(e,t,n){this.props=e,this.context=t,this.refs=jm,this.updater=n||_m}var Qu=Ju.prototype=new km;Qu.constructor=Ju;Em(Qu,Fs.prototype);Qu.isPureReactComponent=!0;var jh=Array.isArray,Cm=Object.prototype.hasOwnProperty,Yu={current:null},Pm={key:!0,ref:!0,__self:!0,__source:!0};function Tm(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Cm.call(t,r)&&!Pm.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:so,type:e,key:i,ref:o,props:s,_owner:Yu.current}}function Nx(e,t){return{$$typeof:so,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Xu(e){return typeof e=="object"&&e!==null&&e.$$typeof===so}function Rx(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var kh=/\/+/g;function Ml(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Rx(""+e.key):t.toString(36)}function Qo(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case so:case xx:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Ml(o,0):r,jh(s)?(n="",e!=null&&(n=e.replace(kh,"$&/")+"/"),Qo(s,t,n,"",function(c){return c})):s!=null&&(Xu(s)&&(s=Nx(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(kh,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",jh(e))for(var l=0;l<e.length;l++){i=e[l];var a=r+Ml(i,l);o+=Qo(i,t,n,a,s)}else if(a=Tx(e),typeof a=="function")for(e=a.call(e),l=0;!(i=e.next()).done;)i=i.value,a=r+Ml(i,l++),o+=Qo(i,t,n,a,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function bo(e,t,n){if(e==null)return e;var r=[],s=0;return Qo(e,r,"","",function(i){return t.call(n,i,s++)}),r}function Ix(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var et={current:null},Yo={transition:null},Ax={ReactCurrentDispatcher:et,ReactCurrentBatchConfig:Yo,ReactCurrentOwner:Yu};function Nm(){throw Error("act(...) is not supported in production builds of React.")}X.Children={map:bo,forEach:function(e,t,n){bo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return bo(e,function(){t++}),t},toArray:function(e){return bo(e,function(t){return t})||[]},only:function(e){if(!Xu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};X.Component=Fs;X.Fragment=wx;X.Profiler=Sx;X.PureComponent=Ju;X.StrictMode=bx;X.Suspense=kx;X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ax;X.act=Nm;X.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Em({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Yu.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(a in t)Cm.call(t,a)&&!Pm.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&l!==void 0?l[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:so,type:e.type,key:s,ref:i,props:r,_owner:o}};X.createContext=function(e){return e={$$typeof:Ex,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:_x,_context:e},e.Consumer=e};X.createElement=Tm;X.createFactory=function(e){var t=Tm.bind(null,e);return t.type=e,t};X.createRef=function(){return{current:null}};X.forwardRef=function(e){return{$$typeof:jx,render:e}};X.isValidElement=Xu;X.lazy=function(e){return{$$typeof:Px,_payload:{_status:-1,_result:e},_init:Ix}};X.memo=function(e,t){return{$$typeof:Cx,type:e,compare:t===void 0?null:t}};X.startTransition=function(e){var t=Yo.transition;Yo.transition={};try{e()}finally{Yo.transition=t}};X.unstable_act=Nm;X.useCallback=function(e,t){return et.current.useCallback(e,t)};X.useContext=function(e){return et.current.useContext(e)};X.useDebugValue=function(){};X.useDeferredValue=function(e){return et.current.useDeferredValue(e)};X.useEffect=function(e,t){return et.current.useEffect(e,t)};X.useId=function(){return et.current.useId()};X.useImperativeHandle=function(e,t,n){return et.current.useImperativeHandle(e,t,n)};X.useInsertionEffect=function(e,t){return et.current.useInsertionEffect(e,t)};X.useLayoutEffect=function(e,t){return et.current.useLayoutEffect(e,t)};X.useMemo=function(e,t){return et.current.useMemo(e,t)};X.useReducer=function(e,t,n){return et.current.useReducer(e,t,n)};X.useRef=function(e){return et.current.useRef(e)};X.useState=function(e){return et.current.useState(e)};X.useSyncExternalStore=function(e,t,n){return et.current.useSyncExternalStore(e,t,n)};X.useTransition=function(){return et.current.useTransition()};X.version="18.3.1";Sm.exports=X;var w=Sm.exports;const pe=Ku(w),Mx=vx({__proto__:null,default:pe},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lx=w,Ox=Symbol.for("react.element"),Dx=Symbol.for("react.fragment"),$x=Object.prototype.hasOwnProperty,Ux=Lx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zx={key:!0,ref:!0,__self:!0,__source:!0};function Rm(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)$x.call(t,r)&&!zx.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Ox,type:e,key:i,ref:o,props:s,_owner:Ux.current}}Ka.Fragment=Dx;Ka.jsx=Rm;Ka.jsxs=Rm;bm.exports=Ka;var d=bm.exports,Im={exports:{}},bt={},Am={exports:{}},Mm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(k,N){var P=k.length;k.push(N);e:for(;0<P;){var I=P-1>>>1,$=k[I];if(0<s($,N))k[I]=N,k[P]=$,P=I;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var N=k[0],P=k.pop();if(P!==N){k[0]=P;e:for(var I=0,$=k.length,H=$>>>1;I<H;){var te=2*(I+1)-1,Q=k[te],ne=te+1,je=k[ne];if(0>s(Q,P))ne<$&&0>s(je,Q)?(k[I]=je,k[ne]=P,I=ne):(k[I]=Q,k[te]=P,I=te);else if(ne<$&&0>s(je,P))k[I]=je,k[ne]=P,I=ne;else break e}}return N}function s(k,N){var P=k.sortIndex-N.sortIndex;return P!==0?P:k.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var a=[],c=[],u=1,h=null,f=3,p=!1,m=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(k){for(var N=n(c);N!==null;){if(N.callback===null)r(c);else if(N.startTime<=k)r(c),N.sortIndex=N.expirationTime,t(a,N);else break;N=n(c)}}function S(k){if(v=!1,x(k),!m)if(n(a)!==null)m=!0,J(_);else{var N=n(c);N!==null&&T(S,N.startTime-k)}}function _(k,N){m=!1,v&&(v=!1,y(C),C=-1),p=!0;var P=f;try{for(x(N),h=n(a);h!==null&&(!(h.expirationTime>N)||k&&!V());){var I=h.callback;if(typeof I=="function"){h.callback=null,f=h.priorityLevel;var $=I(h.expirationTime<=N);N=e.unstable_now(),typeof $=="function"?h.callback=$:h===n(a)&&r(a),x(N)}else r(a);h=n(a)}if(h!==null)var H=!0;else{var te=n(c);te!==null&&T(S,te.startTime-N),H=!1}return H}finally{h=null,f=P,p=!1}}var j=!1,E=null,C=-1,M=5,A=-1;function V(){return!(e.unstable_now()-A<M)}function O(){if(E!==null){var k=e.unstable_now();A=k;var N=!0;try{N=E(!0,k)}finally{N?ae():(j=!1,E=null)}}else j=!1}var ae;if(typeof g=="function")ae=function(){g(O)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,U=q.port2;q.port1.onmessage=O,ae=function(){U.postMessage(null)}}else ae=function(){b(O,0)};function J(k){E=k,j||(j=!0,ae())}function T(k,N){C=b(function(){k(e.unstable_now())},N)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(k){k.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,J(_))},e.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<k?Math.floor(1e3/k):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(k){switch(f){case 1:case 2:case 3:var N=3;break;default:N=f}var P=f;f=N;try{return k()}finally{f=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(k,N){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var P=f;f=k;try{return N()}finally{f=P}},e.unstable_scheduleCallback=function(k,N,P){var I=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?I+P:I):P=I,k){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=P+$,k={id:u++,callback:N,priorityLevel:k,startTime:P,expirationTime:$,sortIndex:-1},P>I?(k.sortIndex=P,t(c,k),n(a)===null&&k===n(c)&&(v?(y(C),C=-1):v=!0,T(S,P-I))):(k.sortIndex=$,t(a,k),m||p||(m=!0,J(_))),k},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(k){var N=f;return function(){var P=f;f=N;try{return k.apply(this,arguments)}finally{f=P}}}})(Mm);Am.exports=Mm;var Vx=Am.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fx=w,xt=Vx;function R(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lm=new Set,Ai={};function zr(e,t){Rs(e,t),Rs(e+"Capture",t)}function Rs(e,t){for(Ai[e]=t,e=0;e<t.length;e++)Lm.add(t[e])}var vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cc=Object.prototype.hasOwnProperty,Bx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ch={},Ph={};function Wx(e){return Cc.call(Ph,e)?!0:Cc.call(Ch,e)?!1:Bx.test(e)?Ph[e]=!0:(Ch[e]=!0,!1)}function Hx(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qx(e,t,n,r){if(t===null||typeof t>"u"||Hx(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function tt(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ve[e]=new tt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ve[t]=new tt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ve[e]=new tt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ve[e]=new tt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ve[e]=new tt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ve[e]=new tt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ve[e]=new tt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ve[e]=new tt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ve[e]=new tt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Zu=/[\-:]([a-z])/g;function ed(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Zu,ed);Ve[t]=new tt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Zu,ed);Ve[t]=new tt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Zu,ed);Ve[t]=new tt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ve[e]=new tt(e,1,!1,e.toLowerCase(),null,!1,!1)});Ve.xlinkHref=new tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ve[e]=new tt(e,1,!1,e.toLowerCase(),null,!0,!0)});function td(e,t,n,r){var s=Ve.hasOwnProperty(t)?Ve[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(qx(t,n,s,r)&&(n=null),r||s===null?Wx(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var _n=Fx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,So=Symbol.for("react.element"),is=Symbol.for("react.portal"),os=Symbol.for("react.fragment"),nd=Symbol.for("react.strict_mode"),Pc=Symbol.for("react.profiler"),Om=Symbol.for("react.provider"),Dm=Symbol.for("react.context"),rd=Symbol.for("react.forward_ref"),Tc=Symbol.for("react.suspense"),Nc=Symbol.for("react.suspense_list"),sd=Symbol.for("react.memo"),Nn=Symbol.for("react.lazy"),$m=Symbol.for("react.offscreen"),Th=Symbol.iterator;function Js(e){return e===null||typeof e!="object"?null:(e=Th&&e[Th]||e["@@iterator"],typeof e=="function"?e:null)}var we=Object.assign,Ll;function ci(e){if(Ll===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ll=t&&t[1]||""}return`
`+Ll+e}var Ol=!1;function Dl(e,t){if(!e||Ol)return"";Ol=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var a=`
`+s[o].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=o&&0<=l);break}}}finally{Ol=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ci(e):""}function Gx(e){switch(e.tag){case 5:return ci(e.type);case 16:return ci("Lazy");case 13:return ci("Suspense");case 19:return ci("SuspenseList");case 0:case 2:case 15:return e=Dl(e.type,!1),e;case 11:return e=Dl(e.type.render,!1),e;case 1:return e=Dl(e.type,!0),e;default:return""}}function Rc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case os:return"Fragment";case is:return"Portal";case Pc:return"Profiler";case nd:return"StrictMode";case Tc:return"Suspense";case Nc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Dm:return(e.displayName||"Context")+".Consumer";case Om:return(e._context.displayName||"Context")+".Provider";case rd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case sd:return t=e.displayName||null,t!==null?t:Rc(e.type)||"Memo";case Nn:t=e._payload,e=e._init;try{return Rc(e(t))}catch{}}return null}function Kx(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rc(t);case 8:return t===nd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Xn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Um(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Jx(e){var t=Um(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function _o(e){e._valueTracker||(e._valueTracker=Jx(e))}function zm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Um(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function da(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ic(e,t){var n=t.checked;return we({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Nh(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Xn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Vm(e,t){t=t.checked,t!=null&&td(e,"checked",t,!1)}function Ac(e,t){Vm(e,t);var n=Xn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Mc(e,t.type,n):t.hasOwnProperty("defaultValue")&&Mc(e,t.type,Xn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Rh(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Mc(e,t,n){(t!=="number"||da(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ui=Array.isArray;function Es(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Xn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Lc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(R(91));return we({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ih(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(R(92));if(ui(n)){if(1<n.length)throw Error(R(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Xn(n)}}function Fm(e,t){var n=Xn(t.value),r=Xn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ah(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Bm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Bm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Eo,Wm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Eo=Eo||document.createElement("div"),Eo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Eo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Mi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var mi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qx=["Webkit","ms","Moz","O"];Object.keys(mi).forEach(function(e){Qx.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),mi[t]=mi[e]})});function Hm(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||mi.hasOwnProperty(e)&&mi[e]?(""+t).trim():t+"px"}function qm(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Hm(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Yx=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dc(e,t){if(t){if(Yx[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(R(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(R(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(R(61))}if(t.style!=null&&typeof t.style!="object")throw Error(R(62))}}function $c(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uc=null;function id(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zc=null,js=null,ks=null;function Mh(e){if(e=ao(e)){if(typeof zc!="function")throw Error(R(280));var t=e.stateNode;t&&(t=Za(t),zc(e.stateNode,e.type,t))}}function Gm(e){js?ks?ks.push(e):ks=[e]:js=e}function Km(){if(js){var e=js,t=ks;if(ks=js=null,Mh(e),t)for(e=0;e<t.length;e++)Mh(t[e])}}function Jm(e,t){return e(t)}function Qm(){}var $l=!1;function Ym(e,t,n){if($l)return e(t,n);$l=!0;try{return Jm(e,t,n)}finally{$l=!1,(js!==null||ks!==null)&&(Qm(),Km())}}function Li(e,t){var n=e.stateNode;if(n===null)return null;var r=Za(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(R(231,t,typeof n));return n}var Vc=!1;if(vn)try{var Qs={};Object.defineProperty(Qs,"passive",{get:function(){Vc=!0}}),window.addEventListener("test",Qs,Qs),window.removeEventListener("test",Qs,Qs)}catch{Vc=!1}function Xx(e,t,n,r,s,i,o,l,a){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var gi=!1,ha=null,fa=!1,Fc=null,Zx={onError:function(e){gi=!0,ha=e}};function ew(e,t,n,r,s,i,o,l,a){gi=!1,ha=null,Xx.apply(Zx,arguments)}function tw(e,t,n,r,s,i,o,l,a){if(ew.apply(this,arguments),gi){if(gi){var c=ha;gi=!1,ha=null}else throw Error(R(198));fa||(fa=!0,Fc=c)}}function Vr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Xm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Lh(e){if(Vr(e)!==e)throw Error(R(188))}function nw(e){var t=e.alternate;if(!t){if(t=Vr(e),t===null)throw Error(R(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Lh(s),e;if(i===r)return Lh(s),t;i=i.sibling}throw Error(R(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(R(189))}}if(n.alternate!==r)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?e:t}function Zm(e){return e=nw(e),e!==null?eg(e):null}function eg(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=eg(e);if(t!==null)return t;e=e.sibling}return null}var tg=xt.unstable_scheduleCallback,Oh=xt.unstable_cancelCallback,rw=xt.unstable_shouldYield,sw=xt.unstable_requestPaint,ke=xt.unstable_now,iw=xt.unstable_getCurrentPriorityLevel,od=xt.unstable_ImmediatePriority,ng=xt.unstable_UserBlockingPriority,pa=xt.unstable_NormalPriority,ow=xt.unstable_LowPriority,rg=xt.unstable_IdlePriority,Ja=null,tn=null;function aw(e){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(Ja,e,void 0,(e.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:uw,lw=Math.log,cw=Math.LN2;function uw(e){return e>>>=0,e===0?32:31-(lw(e)/cw|0)|0}var jo=64,ko=4194304;function di(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ma(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=di(l):(i&=o,i!==0&&(r=di(i)))}else o=n&~s,o!==0?r=di(o):i!==0&&(r=di(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Wt(t),s=1<<n,r|=e[n],t&=~s;return r}function dw(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hw(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Wt(i),l=1<<o,a=s[o];a===-1?(!(l&n)||l&r)&&(s[o]=dw(l,t)):a<=t&&(e.expiredLanes|=l),i&=~l}}function Bc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function sg(){var e=jo;return jo<<=1,!(jo&4194240)&&(jo=64),e}function Ul(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function io(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Wt(t),e[t]=n}function fw(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Wt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function ad(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Wt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var oe=0;function ig(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var og,ld,ag,lg,cg,Wc=!1,Co=[],Vn=null,Fn=null,Bn=null,Oi=new Map,Di=new Map,Mn=[],pw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dh(e,t){switch(e){case"focusin":case"focusout":Vn=null;break;case"dragenter":case"dragleave":Fn=null;break;case"mouseover":case"mouseout":Bn=null;break;case"pointerover":case"pointerout":Oi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Di.delete(t.pointerId)}}function Ys(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=ao(t),t!==null&&ld(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function mw(e,t,n,r,s){switch(t){case"focusin":return Vn=Ys(Vn,e,t,n,r,s),!0;case"dragenter":return Fn=Ys(Fn,e,t,n,r,s),!0;case"mouseover":return Bn=Ys(Bn,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Oi.set(i,Ys(Oi.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Di.set(i,Ys(Di.get(i)||null,e,t,n,r,s)),!0}return!1}function ug(e){var t=Er(e.target);if(t!==null){var n=Vr(t);if(n!==null){if(t=n.tag,t===13){if(t=Xm(n),t!==null){e.blockedOn=t,cg(e.priority,function(){ag(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Hc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Uc=r,n.target.dispatchEvent(r),Uc=null}else return t=ao(n),t!==null&&ld(t),e.blockedOn=n,!1;t.shift()}return!0}function $h(e,t,n){Xo(e)&&n.delete(t)}function gw(){Wc=!1,Vn!==null&&Xo(Vn)&&(Vn=null),Fn!==null&&Xo(Fn)&&(Fn=null),Bn!==null&&Xo(Bn)&&(Bn=null),Oi.forEach($h),Di.forEach($h)}function Xs(e,t){e.blockedOn===t&&(e.blockedOn=null,Wc||(Wc=!0,xt.unstable_scheduleCallback(xt.unstable_NormalPriority,gw)))}function $i(e){function t(s){return Xs(s,e)}if(0<Co.length){Xs(Co[0],e);for(var n=1;n<Co.length;n++){var r=Co[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Vn!==null&&Xs(Vn,e),Fn!==null&&Xs(Fn,e),Bn!==null&&Xs(Bn,e),Oi.forEach(t),Di.forEach(t),n=0;n<Mn.length;n++)r=Mn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Mn.length&&(n=Mn[0],n.blockedOn===null);)ug(n),n.blockedOn===null&&Mn.shift()}var Cs=_n.ReactCurrentBatchConfig,ga=!0;function vw(e,t,n,r){var s=oe,i=Cs.transition;Cs.transition=null;try{oe=1,cd(e,t,n,r)}finally{oe=s,Cs.transition=i}}function yw(e,t,n,r){var s=oe,i=Cs.transition;Cs.transition=null;try{oe=4,cd(e,t,n,r)}finally{oe=s,Cs.transition=i}}function cd(e,t,n,r){if(ga){var s=Hc(e,t,n,r);if(s===null)Jl(e,t,r,va,n),Dh(e,r);else if(mw(s,e,t,n,r))r.stopPropagation();else if(Dh(e,r),t&4&&-1<pw.indexOf(e)){for(;s!==null;){var i=ao(s);if(i!==null&&og(i),i=Hc(e,t,n,r),i===null&&Jl(e,t,r,va,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Jl(e,t,r,null,n)}}var va=null;function Hc(e,t,n,r){if(va=null,e=id(r),e=Er(e),e!==null)if(t=Vr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Xm(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return va=e,null}function dg(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iw()){case od:return 1;case ng:return 4;case pa:case ow:return 16;case rg:return 536870912;default:return 16}default:return 16}}var $n=null,ud=null,Zo=null;function hg(){if(Zo)return Zo;var e,t=ud,n=t.length,r,s="value"in $n?$n.value:$n.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Zo=s.slice(e,1<r?1-r:void 0)}function ea(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Po(){return!0}function Uh(){return!1}function St(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Po:Uh,this.isPropagationStopped=Uh,this}return we(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Po)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Po)},persist:function(){},isPersistent:Po}),t}var Bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dd=St(Bs),oo=we({},Bs,{view:0,detail:0}),xw=St(oo),zl,Vl,Zs,Qa=we({},oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zs&&(Zs&&e.type==="mousemove"?(zl=e.screenX-Zs.screenX,Vl=e.screenY-Zs.screenY):Vl=zl=0,Zs=e),zl)},movementY:function(e){return"movementY"in e?e.movementY:Vl}}),zh=St(Qa),ww=we({},Qa,{dataTransfer:0}),bw=St(ww),Sw=we({},oo,{relatedTarget:0}),Fl=St(Sw),_w=we({},Bs,{animationName:0,elapsedTime:0,pseudoElement:0}),Ew=St(_w),jw=we({},Bs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kw=St(jw),Cw=we({},Bs,{data:0}),Vh=St(Cw),Pw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Nw[e])?!!t[e]:!1}function hd(){return Rw}var Iw=we({},oo,{key:function(e){if(e.key){var t=Pw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ea(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Tw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hd,charCode:function(e){return e.type==="keypress"?ea(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ea(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Aw=St(Iw),Mw=we({},Qa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fh=St(Mw),Lw=we({},oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hd}),Ow=St(Lw),Dw=we({},Bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),$w=St(Dw),Uw=we({},Qa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zw=St(Uw),Vw=[9,13,27,32],fd=vn&&"CompositionEvent"in window,vi=null;vn&&"documentMode"in document&&(vi=document.documentMode);var Fw=vn&&"TextEvent"in window&&!vi,fg=vn&&(!fd||vi&&8<vi&&11>=vi),Bh=String.fromCharCode(32),Wh=!1;function pg(e,t){switch(e){case"keyup":return Vw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mg(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var as=!1;function Bw(e,t){switch(e){case"compositionend":return mg(t);case"keypress":return t.which!==32?null:(Wh=!0,Bh);case"textInput":return e=t.data,e===Bh&&Wh?null:e;default:return null}}function Ww(e,t){if(as)return e==="compositionend"||!fd&&pg(e,t)?(e=hg(),Zo=ud=$n=null,as=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return fg&&t.locale!=="ko"?null:t.data;default:return null}}var Hw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Hw[e.type]:t==="textarea"}function gg(e,t,n,r){Gm(r),t=ya(t,"onChange"),0<t.length&&(n=new dd("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var yi=null,Ui=null;function qw(e){Cg(e,0)}function Ya(e){var t=us(e);if(zm(t))return e}function Gw(e,t){if(e==="change")return t}var vg=!1;if(vn){var Bl;if(vn){var Wl="oninput"in document;if(!Wl){var qh=document.createElement("div");qh.setAttribute("oninput","return;"),Wl=typeof qh.oninput=="function"}Bl=Wl}else Bl=!1;vg=Bl&&(!document.documentMode||9<document.documentMode)}function Gh(){yi&&(yi.detachEvent("onpropertychange",yg),Ui=yi=null)}function yg(e){if(e.propertyName==="value"&&Ya(Ui)){var t=[];gg(t,Ui,e,id(e)),Ym(qw,t)}}function Kw(e,t,n){e==="focusin"?(Gh(),yi=t,Ui=n,yi.attachEvent("onpropertychange",yg)):e==="focusout"&&Gh()}function Jw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ya(Ui)}function Qw(e,t){if(e==="click")return Ya(t)}function Yw(e,t){if(e==="input"||e==="change")return Ya(t)}function Xw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qt=typeof Object.is=="function"?Object.is:Xw;function zi(e,t){if(qt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Cc.call(t,s)||!qt(e[s],t[s]))return!1}return!0}function Kh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jh(e,t){var n=Kh(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Kh(n)}}function xg(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xg(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function wg(){for(var e=window,t=da();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=da(e.document)}return t}function pd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Zw(e){var t=wg(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&xg(n.ownerDocument.documentElement,n)){if(r!==null&&pd(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Jh(n,i);var o=Jh(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var e1=vn&&"documentMode"in document&&11>=document.documentMode,ls=null,qc=null,xi=null,Gc=!1;function Qh(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gc||ls==null||ls!==da(r)||(r=ls,"selectionStart"in r&&pd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xi&&zi(xi,r)||(xi=r,r=ya(qc,"onSelect"),0<r.length&&(t=new dd("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ls)))}function To(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cs={animationend:To("Animation","AnimationEnd"),animationiteration:To("Animation","AnimationIteration"),animationstart:To("Animation","AnimationStart"),transitionend:To("Transition","TransitionEnd")},Hl={},bg={};vn&&(bg=document.createElement("div").style,"AnimationEvent"in window||(delete cs.animationend.animation,delete cs.animationiteration.animation,delete cs.animationstart.animation),"TransitionEvent"in window||delete cs.transitionend.transition);function Xa(e){if(Hl[e])return Hl[e];if(!cs[e])return e;var t=cs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in bg)return Hl[e]=t[n];return e}var Sg=Xa("animationend"),_g=Xa("animationiteration"),Eg=Xa("animationstart"),jg=Xa("transitionend"),kg=new Map,Yh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rr(e,t){kg.set(e,t),zr(t,[e])}for(var ql=0;ql<Yh.length;ql++){var Gl=Yh[ql],t1=Gl.toLowerCase(),n1=Gl[0].toUpperCase()+Gl.slice(1);rr(t1,"on"+n1)}rr(Sg,"onAnimationEnd");rr(_g,"onAnimationIteration");rr(Eg,"onAnimationStart");rr("dblclick","onDoubleClick");rr("focusin","onFocus");rr("focusout","onBlur");rr(jg,"onTransitionEnd");Rs("onMouseEnter",["mouseout","mouseover"]);Rs("onMouseLeave",["mouseout","mouseover"]);Rs("onPointerEnter",["pointerout","pointerover"]);Rs("onPointerLeave",["pointerout","pointerover"]);zr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zr("onBeforeInput",["compositionend","keypress","textInput","paste"]);zr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),r1=new Set("cancel close invalid load scroll toggle".split(" ").concat(hi));function Xh(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,tw(r,t,void 0,e),e.currentTarget=null}function Cg(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==i&&s.isPropagationStopped())break e;Xh(s,l,c),i=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,c=l.currentTarget,l=l.listener,a!==i&&s.isPropagationStopped())break e;Xh(s,l,c),i=a}}}if(fa)throw e=Fc,fa=!1,Fc=null,e}function he(e,t){var n=t[Xc];n===void 0&&(n=t[Xc]=new Set);var r=e+"__bubble";n.has(r)||(Pg(t,e,2,!1),n.add(r))}function Kl(e,t,n){var r=0;t&&(r|=4),Pg(n,e,r,t)}var No="_reactListening"+Math.random().toString(36).slice(2);function Vi(e){if(!e[No]){e[No]=!0,Lm.forEach(function(n){n!=="selectionchange"&&(r1.has(n)||Kl(n,!1,e),Kl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[No]||(t[No]=!0,Kl("selectionchange",!1,t))}}function Pg(e,t,n,r){switch(dg(t)){case 1:var s=vw;break;case 4:s=yw;break;default:s=cd}n=s.bind(null,t,n,e),s=void 0,!Vc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Jl(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===s||a.nodeType===8&&a.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Er(l),o===null)return;if(a=o.tag,a===5||a===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Ym(function(){var c=i,u=id(n),h=[];e:{var f=kg.get(e);if(f!==void 0){var p=dd,m=e;switch(e){case"keypress":if(ea(n)===0)break e;case"keydown":case"keyup":p=Aw;break;case"focusin":m="focus",p=Fl;break;case"focusout":m="blur",p=Fl;break;case"beforeblur":case"afterblur":p=Fl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=zh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=bw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Ow;break;case Sg:case _g:case Eg:p=Ew;break;case jg:p=$w;break;case"scroll":p=xw;break;case"wheel":p=zw;break;case"copy":case"cut":case"paste":p=kw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Fh}var v=(t&4)!==0,b=!v&&e==="scroll",y=v?f!==null?f+"Capture":null:f;v=[];for(var g=c,x;g!==null;){x=g;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,y!==null&&(S=Li(g,y),S!=null&&v.push(Fi(g,S,x)))),b)break;g=g.return}0<v.length&&(f=new p(f,m,null,n,u),h.push({event:f,listeners:v}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&n!==Uc&&(m=n.relatedTarget||n.fromElement)&&(Er(m)||m[yn]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=c,m=m?Er(m):null,m!==null&&(b=Vr(m),m!==b||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(v=zh,S="onMouseLeave",y="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(v=Fh,S="onPointerLeave",y="onPointerEnter",g="pointer"),b=p==null?f:us(p),x=m==null?f:us(m),f=new v(S,g+"leave",p,n,u),f.target=b,f.relatedTarget=x,S=null,Er(u)===c&&(v=new v(y,g+"enter",m,n,u),v.target=x,v.relatedTarget=b,S=v),b=S,p&&m)t:{for(v=p,y=m,g=0,x=v;x;x=Jr(x))g++;for(x=0,S=y;S;S=Jr(S))x++;for(;0<g-x;)v=Jr(v),g--;for(;0<x-g;)y=Jr(y),x--;for(;g--;){if(v===y||y!==null&&v===y.alternate)break t;v=Jr(v),y=Jr(y)}v=null}else v=null;p!==null&&Zh(h,f,p,v,!1),m!==null&&b!==null&&Zh(h,b,m,v,!0)}}e:{if(f=c?us(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var _=Gw;else if(Hh(f))if(vg)_=Yw;else{_=Jw;var j=Kw}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=Qw);if(_&&(_=_(e,c))){gg(h,_,n,u);break e}j&&j(e,f,c),e==="focusout"&&(j=f._wrapperState)&&j.controlled&&f.type==="number"&&Mc(f,"number",f.value)}switch(j=c?us(c):window,e){case"focusin":(Hh(j)||j.contentEditable==="true")&&(ls=j,qc=c,xi=null);break;case"focusout":xi=qc=ls=null;break;case"mousedown":Gc=!0;break;case"contextmenu":case"mouseup":case"dragend":Gc=!1,Qh(h,n,u);break;case"selectionchange":if(e1)break;case"keydown":case"keyup":Qh(h,n,u)}var E;if(fd)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else as?pg(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(fg&&n.locale!=="ko"&&(as||C!=="onCompositionStart"?C==="onCompositionEnd"&&as&&(E=hg()):($n=u,ud="value"in $n?$n.value:$n.textContent,as=!0)),j=ya(c,C),0<j.length&&(C=new Vh(C,e,null,n,u),h.push({event:C,listeners:j}),E?C.data=E:(E=mg(n),E!==null&&(C.data=E)))),(E=Fw?Bw(e,n):Ww(e,n))&&(c=ya(c,"onBeforeInput"),0<c.length&&(u=new Vh("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=E))}Cg(h,t)})}function Fi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ya(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Li(e,n),i!=null&&r.unshift(Fi(e,i,s)),i=Li(e,t),i!=null&&r.push(Fi(e,i,s))),e=e.return}return r}function Jr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Zh(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,s?(a=Li(n,i),a!=null&&o.unshift(Fi(n,a,l))):s||(a=Li(n,i),a!=null&&o.push(Fi(n,a,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var s1=/\r\n?/g,i1=/\u0000|\uFFFD/g;function ef(e){return(typeof e=="string"?e:""+e).replace(s1,`
`).replace(i1,"")}function Ro(e,t,n){if(t=ef(t),ef(e)!==t&&n)throw Error(R(425))}function xa(){}var Kc=null,Jc=null;function Qc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Yc=typeof setTimeout=="function"?setTimeout:void 0,o1=typeof clearTimeout=="function"?clearTimeout:void 0,tf=typeof Promise=="function"?Promise:void 0,a1=typeof queueMicrotask=="function"?queueMicrotask:typeof tf<"u"?function(e){return tf.resolve(null).then(e).catch(l1)}:Yc;function l1(e){setTimeout(function(){throw e})}function Ql(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),$i(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);$i(t)}function Wn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function nf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ws=Math.random().toString(36).slice(2),Zt="__reactFiber$"+Ws,Bi="__reactProps$"+Ws,yn="__reactContainer$"+Ws,Xc="__reactEvents$"+Ws,c1="__reactListeners$"+Ws,u1="__reactHandles$"+Ws;function Er(e){var t=e[Zt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[yn]||n[Zt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=nf(e);e!==null;){if(n=e[Zt])return n;e=nf(e)}return t}e=n,n=e.parentNode}return null}function ao(e){return e=e[Zt]||e[yn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function us(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(R(33))}function Za(e){return e[Bi]||null}var Zc=[],ds=-1;function sr(e){return{current:e}}function fe(e){0>ds||(e.current=Zc[ds],Zc[ds]=null,ds--)}function ce(e,t){ds++,Zc[ds]=e.current,e.current=t}var Zn={},Ge=sr(Zn),ct=sr(!1),Ir=Zn;function Is(e,t){var n=e.type.contextTypes;if(!n)return Zn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ut(e){return e=e.childContextTypes,e!=null}function wa(){fe(ct),fe(Ge)}function rf(e,t,n){if(Ge.current!==Zn)throw Error(R(168));ce(Ge,t),ce(ct,n)}function Tg(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(R(108,Kx(e)||"Unknown",s));return we({},n,r)}function ba(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Zn,Ir=Ge.current,ce(Ge,e),ce(ct,ct.current),!0}function sf(e,t,n){var r=e.stateNode;if(!r)throw Error(R(169));n?(e=Tg(e,t,Ir),r.__reactInternalMemoizedMergedChildContext=e,fe(ct),fe(Ge),ce(Ge,e)):fe(ct),ce(ct,n)}var cn=null,el=!1,Yl=!1;function Ng(e){cn===null?cn=[e]:cn.push(e)}function d1(e){el=!0,Ng(e)}function ir(){if(!Yl&&cn!==null){Yl=!0;var e=0,t=oe;try{var n=cn;for(oe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}cn=null,el=!1}catch(s){throw cn!==null&&(cn=cn.slice(e+1)),tg(od,ir),s}finally{oe=t,Yl=!1}}return null}var hs=[],fs=0,Sa=null,_a=0,Ct=[],Pt=0,Ar=null,un=1,dn="";function vr(e,t){hs[fs++]=_a,hs[fs++]=Sa,Sa=e,_a=t}function Rg(e,t,n){Ct[Pt++]=un,Ct[Pt++]=dn,Ct[Pt++]=Ar,Ar=e;var r=un;e=dn;var s=32-Wt(r)-1;r&=~(1<<s),n+=1;var i=32-Wt(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,un=1<<32-Wt(t)+s|n<<s|r,dn=i+e}else un=1<<i|n<<s|r,dn=e}function md(e){e.return!==null&&(vr(e,1),Rg(e,1,0))}function gd(e){for(;e===Sa;)Sa=hs[--fs],hs[fs]=null,_a=hs[--fs],hs[fs]=null;for(;e===Ar;)Ar=Ct[--Pt],Ct[Pt]=null,dn=Ct[--Pt],Ct[Pt]=null,un=Ct[--Pt],Ct[Pt]=null}var vt=null,gt=null,me=!1,Ft=null;function Ig(e,t){var n=Tt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function of(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,vt=e,gt=Wn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,vt=e,gt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ar!==null?{id:un,overflow:dn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Tt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,vt=e,gt=null,!0):!1;default:return!1}}function eu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function tu(e){if(me){var t=gt;if(t){var n=t;if(!of(e,t)){if(eu(e))throw Error(R(418));t=Wn(n.nextSibling);var r=vt;t&&of(e,t)?Ig(r,n):(e.flags=e.flags&-4097|2,me=!1,vt=e)}}else{if(eu(e))throw Error(R(418));e.flags=e.flags&-4097|2,me=!1,vt=e}}}function af(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;vt=e}function Io(e){if(e!==vt)return!1;if(!me)return af(e),me=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Qc(e.type,e.memoizedProps)),t&&(t=gt)){if(eu(e))throw Ag(),Error(R(418));for(;t;)Ig(e,t),t=Wn(t.nextSibling)}if(af(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(R(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){gt=Wn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}gt=null}}else gt=vt?Wn(e.stateNode.nextSibling):null;return!0}function Ag(){for(var e=gt;e;)e=Wn(e.nextSibling)}function As(){gt=vt=null,me=!1}function vd(e){Ft===null?Ft=[e]:Ft.push(e)}var h1=_n.ReactCurrentBatchConfig;function ei(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(R(309));var r=n.stateNode}if(!r)throw Error(R(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(R(284));if(!n._owner)throw Error(R(290,e))}return e}function Ao(e,t){throw e=Object.prototype.toString.call(t),Error(R(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function lf(e){var t=e._init;return t(e._payload)}function Mg(e){function t(y,g){if(e){var x=y.deletions;x===null?(y.deletions=[g],y.flags|=16):x.push(g)}}function n(y,g){if(!e)return null;for(;g!==null;)t(y,g),g=g.sibling;return null}function r(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function s(y,g){return y=Kn(y,g),y.index=0,y.sibling=null,y}function i(y,g,x){return y.index=x,e?(x=y.alternate,x!==null?(x=x.index,x<g?(y.flags|=2,g):x):(y.flags|=2,g)):(y.flags|=1048576,g)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,g,x,S){return g===null||g.tag!==6?(g=sc(x,y.mode,S),g.return=y,g):(g=s(g,x),g.return=y,g)}function a(y,g,x,S){var _=x.type;return _===os?u(y,g,x.props.children,S,x.key):g!==null&&(g.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Nn&&lf(_)===g.type)?(S=s(g,x.props),S.ref=ei(y,g,x),S.return=y,S):(S=aa(x.type,x.key,x.props,null,y.mode,S),S.ref=ei(y,g,x),S.return=y,S)}function c(y,g,x,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==x.containerInfo||g.stateNode.implementation!==x.implementation?(g=ic(x,y.mode,S),g.return=y,g):(g=s(g,x.children||[]),g.return=y,g)}function u(y,g,x,S,_){return g===null||g.tag!==7?(g=Rr(x,y.mode,S,_),g.return=y,g):(g=s(g,x),g.return=y,g)}function h(y,g,x){if(typeof g=="string"&&g!==""||typeof g=="number")return g=sc(""+g,y.mode,x),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case So:return x=aa(g.type,g.key,g.props,null,y.mode,x),x.ref=ei(y,null,g),x.return=y,x;case is:return g=ic(g,y.mode,x),g.return=y,g;case Nn:var S=g._init;return h(y,S(g._payload),x)}if(ui(g)||Js(g))return g=Rr(g,y.mode,x,null),g.return=y,g;Ao(y,g)}return null}function f(y,g,x,S){var _=g!==null?g.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return _!==null?null:l(y,g,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case So:return x.key===_?a(y,g,x,S):null;case is:return x.key===_?c(y,g,x,S):null;case Nn:return _=x._init,f(y,g,_(x._payload),S)}if(ui(x)||Js(x))return _!==null?null:u(y,g,x,S,null);Ao(y,x)}return null}function p(y,g,x,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(x)||null,l(g,y,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case So:return y=y.get(S.key===null?x:S.key)||null,a(g,y,S,_);case is:return y=y.get(S.key===null?x:S.key)||null,c(g,y,S,_);case Nn:var j=S._init;return p(y,g,x,j(S._payload),_)}if(ui(S)||Js(S))return y=y.get(x)||null,u(g,y,S,_,null);Ao(g,S)}return null}function m(y,g,x,S){for(var _=null,j=null,E=g,C=g=0,M=null;E!==null&&C<x.length;C++){E.index>C?(M=E,E=null):M=E.sibling;var A=f(y,E,x[C],S);if(A===null){E===null&&(E=M);break}e&&E&&A.alternate===null&&t(y,E),g=i(A,g,C),j===null?_=A:j.sibling=A,j=A,E=M}if(C===x.length)return n(y,E),me&&vr(y,C),_;if(E===null){for(;C<x.length;C++)E=h(y,x[C],S),E!==null&&(g=i(E,g,C),j===null?_=E:j.sibling=E,j=E);return me&&vr(y,C),_}for(E=r(y,E);C<x.length;C++)M=p(E,y,C,x[C],S),M!==null&&(e&&M.alternate!==null&&E.delete(M.key===null?C:M.key),g=i(M,g,C),j===null?_=M:j.sibling=M,j=M);return e&&E.forEach(function(V){return t(y,V)}),me&&vr(y,C),_}function v(y,g,x,S){var _=Js(x);if(typeof _!="function")throw Error(R(150));if(x=_.call(x),x==null)throw Error(R(151));for(var j=_=null,E=g,C=g=0,M=null,A=x.next();E!==null&&!A.done;C++,A=x.next()){E.index>C?(M=E,E=null):M=E.sibling;var V=f(y,E,A.value,S);if(V===null){E===null&&(E=M);break}e&&E&&V.alternate===null&&t(y,E),g=i(V,g,C),j===null?_=V:j.sibling=V,j=V,E=M}if(A.done)return n(y,E),me&&vr(y,C),_;if(E===null){for(;!A.done;C++,A=x.next())A=h(y,A.value,S),A!==null&&(g=i(A,g,C),j===null?_=A:j.sibling=A,j=A);return me&&vr(y,C),_}for(E=r(y,E);!A.done;C++,A=x.next())A=p(E,y,C,A.value,S),A!==null&&(e&&A.alternate!==null&&E.delete(A.key===null?C:A.key),g=i(A,g,C),j===null?_=A:j.sibling=A,j=A);return e&&E.forEach(function(O){return t(y,O)}),me&&vr(y,C),_}function b(y,g,x,S){if(typeof x=="object"&&x!==null&&x.type===os&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case So:e:{for(var _=x.key,j=g;j!==null;){if(j.key===_){if(_=x.type,_===os){if(j.tag===7){n(y,j.sibling),g=s(j,x.props.children),g.return=y,y=g;break e}}else if(j.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Nn&&lf(_)===j.type){n(y,j.sibling),g=s(j,x.props),g.ref=ei(y,j,x),g.return=y,y=g;break e}n(y,j);break}else t(y,j);j=j.sibling}x.type===os?(g=Rr(x.props.children,y.mode,S,x.key),g.return=y,y=g):(S=aa(x.type,x.key,x.props,null,y.mode,S),S.ref=ei(y,g,x),S.return=y,y=S)}return o(y);case is:e:{for(j=x.key;g!==null;){if(g.key===j)if(g.tag===4&&g.stateNode.containerInfo===x.containerInfo&&g.stateNode.implementation===x.implementation){n(y,g.sibling),g=s(g,x.children||[]),g.return=y,y=g;break e}else{n(y,g);break}else t(y,g);g=g.sibling}g=ic(x,y.mode,S),g.return=y,y=g}return o(y);case Nn:return j=x._init,b(y,g,j(x._payload),S)}if(ui(x))return m(y,g,x,S);if(Js(x))return v(y,g,x,S);Ao(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,g!==null&&g.tag===6?(n(y,g.sibling),g=s(g,x),g.return=y,y=g):(n(y,g),g=sc(x,y.mode,S),g.return=y,y=g),o(y)):n(y,g)}return b}var Ms=Mg(!0),Lg=Mg(!1),Ea=sr(null),ja=null,ps=null,yd=null;function xd(){yd=ps=ja=null}function wd(e){var t=Ea.current;fe(Ea),e._currentValue=t}function nu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ps(e,t){ja=e,yd=ps=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(lt=!0),e.firstContext=null)}function Rt(e){var t=e._currentValue;if(yd!==e)if(e={context:e,memoizedValue:t,next:null},ps===null){if(ja===null)throw Error(R(308));ps=e,ja.dependencies={lanes:0,firstContext:e}}else ps=ps.next=e;return t}var jr=null;function bd(e){jr===null?jr=[e]:jr.push(e)}function Og(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,bd(t)):(n.next=s.next,s.next=n),t.interleaved=n,xn(e,r)}function xn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Rn=!1;function Sd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dg(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function pn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Hn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,re&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,xn(e,n)}return s=r.interleaved,s===null?(t.next=t,bd(r)):(t.next=s.next,s.next=t),r.interleaved=t,xn(e,n)}function ta(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ad(e,n)}}function cf(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ka(e,t,n,r){var s=e.updateQueue;Rn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var a=l,c=a.next;a.next=null,o===null?i=c:o.next=c,o=a;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=a))}if(i!==null){var h=s.baseState;o=0,u=c=a=null,l=i;do{var f=l.lane,p=l.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,v=l;switch(f=t,p=n,v.tag){case 1:if(m=v.payload,typeof m=="function"){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,f=typeof m=="function"?m.call(p,h,f):m,f==null)break e;h=we({},h,f);break e;case 2:Rn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(c=u=p,a=h):u=u.next=p,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(u===null&&(a=h),s.baseState=a,s.firstBaseUpdate=c,s.lastBaseUpdate=u,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Lr|=o,e.lanes=o,e.memoizedState=h}}function uf(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(R(191,s));s.call(r)}}}var lo={},nn=sr(lo),Wi=sr(lo),Hi=sr(lo);function kr(e){if(e===lo)throw Error(R(174));return e}function _d(e,t){switch(ce(Hi,t),ce(Wi,e),ce(nn,lo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Oc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Oc(t,e)}fe(nn),ce(nn,t)}function Ls(){fe(nn),fe(Wi),fe(Hi)}function $g(e){kr(Hi.current);var t=kr(nn.current),n=Oc(t,e.type);t!==n&&(ce(Wi,e),ce(nn,n))}function Ed(e){Wi.current===e&&(fe(nn),fe(Wi))}var ve=sr(0);function Ca(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Xl=[];function jd(){for(var e=0;e<Xl.length;e++)Xl[e]._workInProgressVersionPrimary=null;Xl.length=0}var na=_n.ReactCurrentDispatcher,Zl=_n.ReactCurrentBatchConfig,Mr=0,xe=null,Re=null,Me=null,Pa=!1,wi=!1,qi=0,f1=0;function Be(){throw Error(R(321))}function kd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!qt(e[n],t[n]))return!1;return!0}function Cd(e,t,n,r,s,i){if(Mr=i,xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,na.current=e===null||e.memoizedState===null?v1:y1,e=n(r,s),wi){i=0;do{if(wi=!1,qi=0,25<=i)throw Error(R(301));i+=1,Me=Re=null,t.updateQueue=null,na.current=x1,e=n(r,s)}while(wi)}if(na.current=Ta,t=Re!==null&&Re.next!==null,Mr=0,Me=Re=xe=null,Pa=!1,t)throw Error(R(300));return e}function Pd(){var e=qi!==0;return qi=0,e}function Xt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Me===null?xe.memoizedState=Me=e:Me=Me.next=e,Me}function It(){if(Re===null){var e=xe.alternate;e=e!==null?e.memoizedState:null}else e=Re.next;var t=Me===null?xe.memoizedState:Me.next;if(t!==null)Me=t,Re=e;else{if(e===null)throw Error(R(310));Re=e,e={memoizedState:Re.memoizedState,baseState:Re.baseState,baseQueue:Re.baseQueue,queue:Re.queue,next:null},Me===null?xe.memoizedState=Me=e:Me=Me.next=e}return Me}function Gi(e,t){return typeof t=="function"?t(e):t}function ec(e){var t=It(),n=t.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=e;var r=Re,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,a=null,c=i;do{var u=c.lane;if((Mr&u)===u)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=h,o=r):a=a.next=h,xe.lanes|=u,Lr|=u}c=c.next}while(c!==null&&c!==i);a===null?o=r:a.next=l,qt(r,t.memoizedState)||(lt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,xe.lanes|=i,Lr|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function tc(e){var t=It(),n=t.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);qt(i,t.memoizedState)||(lt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Ug(){}function zg(e,t){var n=xe,r=It(),s=t(),i=!qt(r.memoizedState,s);if(i&&(r.memoizedState=s,lt=!0),r=r.queue,Td(Bg.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Me!==null&&Me.memoizedState.tag&1){if(n.flags|=2048,Ki(9,Fg.bind(null,n,r,s,t),void 0,null),Le===null)throw Error(R(349));Mr&30||Vg(n,t,s)}return s}function Vg(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=xe.updateQueue,t===null?(t={lastEffect:null,stores:null},xe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Fg(e,t,n,r){t.value=n,t.getSnapshot=r,Wg(t)&&Hg(e)}function Bg(e,t,n){return n(function(){Wg(t)&&Hg(e)})}function Wg(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!qt(e,n)}catch{return!0}}function Hg(e){var t=xn(e,1);t!==null&&Ht(t,e,1,-1)}function df(e){var t=Xt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:e},t.queue=e,e=e.dispatch=g1.bind(null,xe,e),[t.memoizedState,e]}function Ki(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=xe.updateQueue,t===null?(t={lastEffect:null,stores:null},xe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function qg(){return It().memoizedState}function ra(e,t,n,r){var s=Xt();xe.flags|=e,s.memoizedState=Ki(1|t,n,void 0,r===void 0?null:r)}function tl(e,t,n,r){var s=It();r=r===void 0?null:r;var i=void 0;if(Re!==null){var o=Re.memoizedState;if(i=o.destroy,r!==null&&kd(r,o.deps)){s.memoizedState=Ki(t,n,i,r);return}}xe.flags|=e,s.memoizedState=Ki(1|t,n,i,r)}function hf(e,t){return ra(8390656,8,e,t)}function Td(e,t){return tl(2048,8,e,t)}function Gg(e,t){return tl(4,2,e,t)}function Kg(e,t){return tl(4,4,e,t)}function Jg(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Qg(e,t,n){return n=n!=null?n.concat([e]):null,tl(4,4,Jg.bind(null,t,e),n)}function Nd(){}function Yg(e,t){var n=It();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&kd(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xg(e,t){var n=It();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&kd(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zg(e,t,n){return Mr&21?(qt(n,t)||(n=sg(),xe.lanes|=n,Lr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,lt=!0),e.memoizedState=n)}function p1(e,t){var n=oe;oe=n!==0&&4>n?n:4,e(!0);var r=Zl.transition;Zl.transition={};try{e(!1),t()}finally{oe=n,Zl.transition=r}}function e0(){return It().memoizedState}function m1(e,t,n){var r=Gn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},t0(e))n0(t,n);else if(n=Og(e,t,n,r),n!==null){var s=Ze();Ht(n,e,r,s),r0(n,t,r)}}function g1(e,t,n){var r=Gn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(t0(e))n0(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,qt(l,o)){var a=t.interleaved;a===null?(s.next=s,bd(t)):(s.next=a.next,a.next=s),t.interleaved=s;return}}catch{}finally{}n=Og(e,t,s,r),n!==null&&(s=Ze(),Ht(n,e,r,s),r0(n,t,r))}}function t0(e){var t=e.alternate;return e===xe||t!==null&&t===xe}function n0(e,t){wi=Pa=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function r0(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ad(e,n)}}var Ta={readContext:Rt,useCallback:Be,useContext:Be,useEffect:Be,useImperativeHandle:Be,useInsertionEffect:Be,useLayoutEffect:Be,useMemo:Be,useReducer:Be,useRef:Be,useState:Be,useDebugValue:Be,useDeferredValue:Be,useTransition:Be,useMutableSource:Be,useSyncExternalStore:Be,useId:Be,unstable_isNewReconciler:!1},v1={readContext:Rt,useCallback:function(e,t){return Xt().memoizedState=[e,t===void 0?null:t],e},useContext:Rt,useEffect:hf,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ra(4194308,4,Jg.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ra(4194308,4,e,t)},useInsertionEffect:function(e,t){return ra(4,2,e,t)},useMemo:function(e,t){var n=Xt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Xt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=m1.bind(null,xe,e),[r.memoizedState,e]},useRef:function(e){var t=Xt();return e={current:e},t.memoizedState=e},useState:df,useDebugValue:Nd,useDeferredValue:function(e){return Xt().memoizedState=e},useTransition:function(){var e=df(!1),t=e[0];return e=p1.bind(null,e[1]),Xt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=xe,s=Xt();if(me){if(n===void 0)throw Error(R(407));n=n()}else{if(n=t(),Le===null)throw Error(R(349));Mr&30||Vg(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,hf(Bg.bind(null,r,i,e),[e]),r.flags|=2048,Ki(9,Fg.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Xt(),t=Le.identifierPrefix;if(me){var n=dn,r=un;n=(r&~(1<<32-Wt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=qi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=f1++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},y1={readContext:Rt,useCallback:Yg,useContext:Rt,useEffect:Td,useImperativeHandle:Qg,useInsertionEffect:Gg,useLayoutEffect:Kg,useMemo:Xg,useReducer:ec,useRef:qg,useState:function(){return ec(Gi)},useDebugValue:Nd,useDeferredValue:function(e){var t=It();return Zg(t,Re.memoizedState,e)},useTransition:function(){var e=ec(Gi)[0],t=It().memoizedState;return[e,t]},useMutableSource:Ug,useSyncExternalStore:zg,useId:e0,unstable_isNewReconciler:!1},x1={readContext:Rt,useCallback:Yg,useContext:Rt,useEffect:Td,useImperativeHandle:Qg,useInsertionEffect:Gg,useLayoutEffect:Kg,useMemo:Xg,useReducer:tc,useRef:qg,useState:function(){return tc(Gi)},useDebugValue:Nd,useDeferredValue:function(e){var t=It();return Re===null?t.memoizedState=e:Zg(t,Re.memoizedState,e)},useTransition:function(){var e=tc(Gi)[0],t=It().memoizedState;return[e,t]},useMutableSource:Ug,useSyncExternalStore:zg,useId:e0,unstable_isNewReconciler:!1};function Ut(e,t){if(e&&e.defaultProps){t=we({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ru(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:we({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var nl={isMounted:function(e){return(e=e._reactInternals)?Vr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ze(),s=Gn(e),i=pn(r,s);i.payload=t,n!=null&&(i.callback=n),t=Hn(e,i,s),t!==null&&(Ht(t,e,s,r),ta(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ze(),s=Gn(e),i=pn(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Hn(e,i,s),t!==null&&(Ht(t,e,s,r),ta(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ze(),r=Gn(e),s=pn(n,r);s.tag=2,t!=null&&(s.callback=t),t=Hn(e,s,r),t!==null&&(Ht(t,e,r,n),ta(t,e,r))}};function ff(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!zi(n,r)||!zi(s,i):!0}function s0(e,t,n){var r=!1,s=Zn,i=t.contextType;return typeof i=="object"&&i!==null?i=Rt(i):(s=ut(t)?Ir:Ge.current,r=t.contextTypes,i=(r=r!=null)?Is(e,s):Zn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=nl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function pf(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&nl.enqueueReplaceState(t,t.state,null)}function su(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Sd(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Rt(i):(i=ut(t)?Ir:Ge.current,s.context=Is(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(ru(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&nl.enqueueReplaceState(s,s.state,null),ka(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Os(e,t){try{var n="",r=t;do n+=Gx(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function nc(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function iu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var w1=typeof WeakMap=="function"?WeakMap:Map;function i0(e,t,n){n=pn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ra||(Ra=!0,mu=r),iu(e,t)},n}function o0(e,t,n){n=pn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){iu(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){iu(e,t),typeof r!="function"&&(qn===null?qn=new Set([this]):qn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function mf(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new w1;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=M1.bind(null,e,t,n),t.then(e,e))}function gf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function vf(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=pn(-1,1),t.tag=2,Hn(n,t,1))),n.lanes|=1),e)}var b1=_n.ReactCurrentOwner,lt=!1;function Ye(e,t,n,r){t.child=e===null?Lg(t,null,n,r):Ms(t,e.child,n,r)}function yf(e,t,n,r,s){n=n.render;var i=t.ref;return Ps(t,s),r=Cd(e,t,n,r,i,s),n=Pd(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,wn(e,t,s)):(me&&n&&md(t),t.flags|=1,Ye(e,t,r,s),t.child)}function xf(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!$d(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,a0(e,t,i,r,s)):(e=aa(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:zi,n(o,r)&&e.ref===t.ref)return wn(e,t,s)}return t.flags|=1,e=Kn(i,r),e.ref=t.ref,e.return=t,t.child=e}function a0(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(zi(i,r)&&e.ref===t.ref)if(lt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(lt=!0);else return t.lanes=e.lanes,wn(e,t,s)}return ou(e,t,n,r,s)}function l0(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ce(gs,mt),mt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ce(gs,mt),mt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ce(gs,mt),mt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,ce(gs,mt),mt|=r;return Ye(e,t,s,n),t.child}function c0(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ou(e,t,n,r,s){var i=ut(n)?Ir:Ge.current;return i=Is(t,i),Ps(t,s),n=Cd(e,t,n,r,i,s),r=Pd(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,wn(e,t,s)):(me&&r&&md(t),t.flags|=1,Ye(e,t,n,s),t.child)}function wf(e,t,n,r,s){if(ut(n)){var i=!0;ba(t)}else i=!1;if(Ps(t,s),t.stateNode===null)sa(e,t),s0(t,n,r),su(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var a=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Rt(c):(c=ut(n)?Ir:Ge.current,c=Is(t,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==c)&&pf(t,o,r,c),Rn=!1;var f=t.memoizedState;o.state=f,ka(t,r,o,s),a=t.memoizedState,l!==r||f!==a||ct.current||Rn?(typeof u=="function"&&(ru(t,n,u,r),a=t.memoizedState),(l=Rn||ff(t,n,l,r,f,a,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),o.props=r,o.state=a,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Dg(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:Ut(t.type,l),o.props=c,h=t.pendingProps,f=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=Rt(a):(a=ut(n)?Ir:Ge.current,a=Is(t,a));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==a)&&pf(t,o,r,a),Rn=!1,f=t.memoizedState,o.state=f,ka(t,r,o,s);var m=t.memoizedState;l!==h||f!==m||ct.current||Rn?(typeof p=="function"&&(ru(t,n,p,r),m=t.memoizedState),(c=Rn||ff(t,n,c,r,f,m,a)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,a)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),o.props=r,o.state=m,o.context=a,r=c):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return au(e,t,n,r,i,s)}function au(e,t,n,r,s,i){c0(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&sf(t,n,!1),wn(e,t,i);r=t.stateNode,b1.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Ms(t,e.child,null,i),t.child=Ms(t,null,l,i)):Ye(e,t,l,i),t.memoizedState=r.state,s&&sf(t,n,!0),t.child}function u0(e){var t=e.stateNode;t.pendingContext?rf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&rf(e,t.context,!1),_d(e,t.containerInfo)}function bf(e,t,n,r,s){return As(),vd(s),t.flags|=256,Ye(e,t,n,r),t.child}var lu={dehydrated:null,treeContext:null,retryLane:0};function cu(e){return{baseLanes:e,cachePool:null,transitions:null}}function d0(e,t,n){var r=t.pendingProps,s=ve.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ce(ve,s&1),e===null)return tu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=il(o,r,0,null),e=Rr(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=cu(n),t.memoizedState=lu,e):Rd(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return S1(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=Kn(s,a),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Kn(l,i):(i=Rr(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?cu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=lu,r}return i=e.child,e=i.sibling,r=Kn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Rd(e,t){return t=il({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Mo(e,t,n,r){return r!==null&&vd(r),Ms(t,e.child,null,n),e=Rd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function S1(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=nc(Error(R(422))),Mo(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=il({mode:"visible",children:r.children},s,0,null),i=Rr(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Ms(t,e.child,null,o),t.child.memoizedState=cu(o),t.memoizedState=lu,i);if(!(t.mode&1))return Mo(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(R(419)),r=nc(i,r,void 0),Mo(e,t,o,r)}if(l=(o&e.childLanes)!==0,lt||l){if(r=Le,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,xn(e,s),Ht(r,e,s,-1))}return Dd(),r=nc(Error(R(421))),Mo(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=L1.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,gt=Wn(s.nextSibling),vt=t,me=!0,Ft=null,e!==null&&(Ct[Pt++]=un,Ct[Pt++]=dn,Ct[Pt++]=Ar,un=e.id,dn=e.overflow,Ar=t),t=Rd(t,r.children),t.flags|=4096,t)}function Sf(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),nu(e.return,t,n)}function rc(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function h0(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Ye(e,t,r.children,n),r=ve.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sf(e,n,t);else if(e.tag===19)Sf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ce(ve,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Ca(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),rc(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ca(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}rc(t,!0,n,null,i);break;case"together":rc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function sa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function wn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Lr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(R(153));if(t.child!==null){for(e=t.child,n=Kn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Kn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function _1(e,t,n){switch(t.tag){case 3:u0(t),As();break;case 5:$g(t);break;case 1:ut(t.type)&&ba(t);break;case 4:_d(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ce(Ea,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ce(ve,ve.current&1),t.flags|=128,null):n&t.child.childLanes?d0(e,t,n):(ce(ve,ve.current&1),e=wn(e,t,n),e!==null?e.sibling:null);ce(ve,ve.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return h0(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ce(ve,ve.current),r)break;return null;case 22:case 23:return t.lanes=0,l0(e,t,n)}return wn(e,t,n)}var f0,uu,p0,m0;f0=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};uu=function(){};p0=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,kr(nn.current);var i=null;switch(n){case"input":s=Ic(e,s),r=Ic(e,r),i=[];break;case"select":s=we({},s,{value:void 0}),r=we({},r,{value:void 0}),i=[];break;case"textarea":s=Lc(e,s),r=Lc(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=xa)}Dc(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ai.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var a=r[c];if(l=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(i||(i=[]),i.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(i=i||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(i=i||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ai.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&he("scroll",e),i||l===a||(i=[])):(i=i||[]).push(c,a))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};m0=function(e,t,n,r){n!==r&&(t.flags|=4)};function ti(e,t){if(!me)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function We(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function E1(e,t,n){var r=t.pendingProps;switch(gd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(t),null;case 1:return ut(t.type)&&wa(),We(t),null;case 3:return r=t.stateNode,Ls(),fe(ct),fe(Ge),jd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Io(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ft!==null&&(yu(Ft),Ft=null))),uu(e,t),We(t),null;case 5:Ed(t);var s=kr(Hi.current);if(n=t.type,e!==null&&t.stateNode!=null)p0(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(R(166));return We(t),null}if(e=kr(nn.current),Io(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Zt]=t,r[Bi]=i,e=(t.mode&1)!==0,n){case"dialog":he("cancel",r),he("close",r);break;case"iframe":case"object":case"embed":he("load",r);break;case"video":case"audio":for(s=0;s<hi.length;s++)he(hi[s],r);break;case"source":he("error",r);break;case"img":case"image":case"link":he("error",r),he("load",r);break;case"details":he("toggle",r);break;case"input":Nh(r,i),he("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},he("invalid",r);break;case"textarea":Ih(r,i),he("invalid",r)}Dc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ro(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ro(r.textContent,l,e),s=["children",""+l]):Ai.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&he("scroll",r)}switch(n){case"input":_o(r),Rh(r,i,!0);break;case"textarea":_o(r),Ah(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=xa)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Bm(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Zt]=t,e[Bi]=r,f0(e,t,!1,!1),t.stateNode=e;e:{switch(o=$c(n,r),n){case"dialog":he("cancel",e),he("close",e),s=r;break;case"iframe":case"object":case"embed":he("load",e),s=r;break;case"video":case"audio":for(s=0;s<hi.length;s++)he(hi[s],e);s=r;break;case"source":he("error",e),s=r;break;case"img":case"image":case"link":he("error",e),he("load",e),s=r;break;case"details":he("toggle",e),s=r;break;case"input":Nh(e,r),s=Ic(e,r),he("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=we({},r,{value:void 0}),he("invalid",e);break;case"textarea":Ih(e,r),s=Lc(e,r),he("invalid",e);break;default:s=r}Dc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var a=l[i];i==="style"?qm(e,a):i==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Wm(e,a)):i==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Mi(e,a):typeof a=="number"&&Mi(e,""+a):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ai.hasOwnProperty(i)?a!=null&&i==="onScroll"&&he("scroll",e):a!=null&&td(e,i,a,o))}switch(n){case"input":_o(e),Rh(e,r,!1);break;case"textarea":_o(e),Ah(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Xn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Es(e,!!r.multiple,i,!1):r.defaultValue!=null&&Es(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=xa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return We(t),null;case 6:if(e&&t.stateNode!=null)m0(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(R(166));if(n=kr(Hi.current),kr(nn.current),Io(t)){if(r=t.stateNode,n=t.memoizedProps,r[Zt]=t,(i=r.nodeValue!==n)&&(e=vt,e!==null))switch(e.tag){case 3:Ro(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ro(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zt]=t,t.stateNode=r}return We(t),null;case 13:if(fe(ve),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(me&&gt!==null&&t.mode&1&&!(t.flags&128))Ag(),As(),t.flags|=98560,i=!1;else if(i=Io(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(R(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(R(317));i[Zt]=t}else As(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;We(t),i=!1}else Ft!==null&&(yu(Ft),Ft=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ve.current&1?Ie===0&&(Ie=3):Dd())),t.updateQueue!==null&&(t.flags|=4),We(t),null);case 4:return Ls(),uu(e,t),e===null&&Vi(t.stateNode.containerInfo),We(t),null;case 10:return wd(t.type._context),We(t),null;case 17:return ut(t.type)&&wa(),We(t),null;case 19:if(fe(ve),i=t.memoizedState,i===null)return We(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)ti(i,!1);else{if(Ie!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ca(e),o!==null){for(t.flags|=128,ti(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ce(ve,ve.current&1|2),t.child}e=e.sibling}i.tail!==null&&ke()>Ds&&(t.flags|=128,r=!0,ti(i,!1),t.lanes=4194304)}else{if(!r)if(e=Ca(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ti(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!me)return We(t),null}else 2*ke()-i.renderingStartTime>Ds&&n!==1073741824&&(t.flags|=128,r=!0,ti(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ke(),t.sibling=null,n=ve.current,ce(ve,r?n&1|2:n&1),t):(We(t),null);case 22:case 23:return Od(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?mt&1073741824&&(We(t),t.subtreeFlags&6&&(t.flags|=8192)):We(t),null;case 24:return null;case 25:return null}throw Error(R(156,t.tag))}function j1(e,t){switch(gd(t),t.tag){case 1:return ut(t.type)&&wa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ls(),fe(ct),fe(Ge),jd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ed(t),null;case 13:if(fe(ve),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(R(340));As()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fe(ve),null;case 4:return Ls(),null;case 10:return wd(t.type._context),null;case 22:case 23:return Od(),null;case 24:return null;default:return null}}var Lo=!1,qe=!1,k1=typeof WeakSet=="function"?WeakSet:Set,L=null;function ms(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){_e(e,t,r)}else n.current=null}function du(e,t,n){try{n()}catch(r){_e(e,t,r)}}var _f=!1;function C1(e,t){if(Kc=ga,e=wg(),pd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,c=0,u=0,h=e,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==i||r!==0&&h.nodeType!==3||(a=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++c===s&&(l=o),f===i&&++u===r&&(a=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jc={focusedElem:e,selectionRange:n},ga=!1,L=t;L!==null;)if(t=L,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,L=e;else for(;L!==null;){t=L;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,b=m.memoizedState,y=t.stateNode,g=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:Ut(t.type,v),b);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(S){_e(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,L=e;break}L=t.return}return m=_f,_f=!1,m}function bi(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&du(t,n,i)}s=s.next}while(s!==r)}}function rl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function hu(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function g0(e){var t=e.alternate;t!==null&&(e.alternate=null,g0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Zt],delete t[Bi],delete t[Xc],delete t[c1],delete t[u1])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function v0(e){return e.tag===5||e.tag===3||e.tag===4}function Ef(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||v0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=xa));else if(r!==4&&(e=e.child,e!==null))for(fu(e,t,n),e=e.sibling;e!==null;)fu(e,t,n),e=e.sibling}function pu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(pu(e,t,n),e=e.sibling;e!==null;)pu(e,t,n),e=e.sibling}var Ue=null,zt=!1;function En(e,t,n){for(n=n.child;n!==null;)y0(e,t,n),n=n.sibling}function y0(e,t,n){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(Ja,n)}catch{}switch(n.tag){case 5:qe||ms(n,t);case 6:var r=Ue,s=zt;Ue=null,En(e,t,n),Ue=r,zt=s,Ue!==null&&(zt?(e=Ue,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ue.removeChild(n.stateNode));break;case 18:Ue!==null&&(zt?(e=Ue,n=n.stateNode,e.nodeType===8?Ql(e.parentNode,n):e.nodeType===1&&Ql(e,n),$i(e)):Ql(Ue,n.stateNode));break;case 4:r=Ue,s=zt,Ue=n.stateNode.containerInfo,zt=!0,En(e,t,n),Ue=r,zt=s;break;case 0:case 11:case 14:case 15:if(!qe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&du(n,t,o),s=s.next}while(s!==r)}En(e,t,n);break;case 1:if(!qe&&(ms(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){_e(n,t,l)}En(e,t,n);break;case 21:En(e,t,n);break;case 22:n.mode&1?(qe=(r=qe)||n.memoizedState!==null,En(e,t,n),qe=r):En(e,t,n);break;default:En(e,t,n)}}function jf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new k1),t.forEach(function(r){var s=O1.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Dt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ue=l.stateNode,zt=!1;break e;case 3:Ue=l.stateNode.containerInfo,zt=!0;break e;case 4:Ue=l.stateNode.containerInfo,zt=!0;break e}l=l.return}if(Ue===null)throw Error(R(160));y0(i,o,s),Ue=null,zt=!1;var a=s.alternate;a!==null&&(a.return=null),s.return=null}catch(c){_e(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)x0(t,e),t=t.sibling}function x0(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Dt(t,e),Qt(e),r&4){try{bi(3,e,e.return),rl(3,e)}catch(v){_e(e,e.return,v)}try{bi(5,e,e.return)}catch(v){_e(e,e.return,v)}}break;case 1:Dt(t,e),Qt(e),r&512&&n!==null&&ms(n,n.return);break;case 5:if(Dt(t,e),Qt(e),r&512&&n!==null&&ms(n,n.return),e.flags&32){var s=e.stateNode;try{Mi(s,"")}catch(v){_e(e,e.return,v)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Vm(s,i),$c(l,o);var c=$c(l,i);for(o=0;o<a.length;o+=2){var u=a[o],h=a[o+1];u==="style"?qm(s,h):u==="dangerouslySetInnerHTML"?Wm(s,h):u==="children"?Mi(s,h):td(s,u,h,c)}switch(l){case"input":Ac(s,i);break;case"textarea":Fm(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Es(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?Es(s,!!i.multiple,i.defaultValue,!0):Es(s,!!i.multiple,i.multiple?[]:"",!1))}s[Bi]=i}catch(v){_e(e,e.return,v)}}break;case 6:if(Dt(t,e),Qt(e),r&4){if(e.stateNode===null)throw Error(R(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(v){_e(e,e.return,v)}}break;case 3:if(Dt(t,e),Qt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{$i(t.containerInfo)}catch(v){_e(e,e.return,v)}break;case 4:Dt(t,e),Qt(e);break;case 13:Dt(t,e),Qt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Md=ke())),r&4&&jf(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(qe=(c=qe)||u,Dt(t,e),qe=c):Dt(t,e),Qt(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(L=e,u=e.child;u!==null;){for(h=L=u;L!==null;){switch(f=L,p=f.child,f.tag){case 0:case 11:case 14:case 15:bi(4,f,f.return);break;case 1:ms(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){_e(r,n,v)}}break;case 5:ms(f,f.return);break;case 22:if(f.memoizedState!==null){Cf(h);continue}}p!==null?(p.return=f,L=p):Cf(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,a=h.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Hm("display",o))}catch(v){_e(e,e.return,v)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){_e(e,e.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Dt(t,e),Qt(e),r&4&&jf(e);break;case 21:break;default:Dt(t,e),Qt(e)}}function Qt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(v0(n)){var r=n;break e}n=n.return}throw Error(R(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Mi(s,""),r.flags&=-33);var i=Ef(e);pu(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Ef(e);fu(e,l,o);break;default:throw Error(R(161))}}catch(a){_e(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function P1(e,t,n){L=e,w0(e)}function w0(e,t,n){for(var r=(e.mode&1)!==0;L!==null;){var s=L,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Lo;if(!o){var l=s.alternate,a=l!==null&&l.memoizedState!==null||qe;l=Lo;var c=qe;if(Lo=o,(qe=a)&&!c)for(L=s;L!==null;)o=L,a=o.child,o.tag===22&&o.memoizedState!==null?Pf(s):a!==null?(a.return=o,L=a):Pf(s);for(;i!==null;)L=i,w0(i),i=i.sibling;L=s,Lo=l,qe=c}kf(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,L=i):kf(e)}}function kf(e){for(;L!==null;){var t=L;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qe||rl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!qe)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Ut(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&uf(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}uf(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&$i(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}qe||t.flags&512&&hu(t)}catch(f){_e(t,t.return,f)}}if(t===e){L=null;break}if(n=t.sibling,n!==null){n.return=t.return,L=n;break}L=t.return}}function Cf(e){for(;L!==null;){var t=L;if(t===e){L=null;break}var n=t.sibling;if(n!==null){n.return=t.return,L=n;break}L=t.return}}function Pf(e){for(;L!==null;){var t=L;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(a){_e(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(a){_e(t,s,a)}}var i=t.return;try{hu(t)}catch(a){_e(t,i,a)}break;case 5:var o=t.return;try{hu(t)}catch(a){_e(t,o,a)}}}catch(a){_e(t,t.return,a)}if(t===e){L=null;break}var l=t.sibling;if(l!==null){l.return=t.return,L=l;break}L=t.return}}var T1=Math.ceil,Na=_n.ReactCurrentDispatcher,Id=_n.ReactCurrentOwner,Nt=_n.ReactCurrentBatchConfig,re=0,Le=null,Te=null,ze=0,mt=0,gs=sr(0),Ie=0,Ji=null,Lr=0,sl=0,Ad=0,Si=null,ot=null,Md=0,Ds=1/0,an=null,Ra=!1,mu=null,qn=null,Oo=!1,Un=null,Ia=0,_i=0,gu=null,ia=-1,oa=0;function Ze(){return re&6?ke():ia!==-1?ia:ia=ke()}function Gn(e){return e.mode&1?re&2&&ze!==0?ze&-ze:h1.transition!==null?(oa===0&&(oa=sg()),oa):(e=oe,e!==0||(e=window.event,e=e===void 0?16:dg(e.type)),e):1}function Ht(e,t,n,r){if(50<_i)throw _i=0,gu=null,Error(R(185));io(e,n,r),(!(re&2)||e!==Le)&&(e===Le&&(!(re&2)&&(sl|=n),Ie===4&&Ln(e,ze)),dt(e,r),n===1&&re===0&&!(t.mode&1)&&(Ds=ke()+500,el&&ir()))}function dt(e,t){var n=e.callbackNode;hw(e,t);var r=ma(e,e===Le?ze:0);if(r===0)n!==null&&Oh(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Oh(n),t===1)e.tag===0?d1(Tf.bind(null,e)):Ng(Tf.bind(null,e)),a1(function(){!(re&6)&&ir()}),n=null;else{switch(ig(r)){case 1:n=od;break;case 4:n=ng;break;case 16:n=pa;break;case 536870912:n=rg;break;default:n=pa}n=P0(n,b0.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function b0(e,t){if(ia=-1,oa=0,re&6)throw Error(R(327));var n=e.callbackNode;if(Ts()&&e.callbackNode!==n)return null;var r=ma(e,e===Le?ze:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Aa(e,r);else{t=r;var s=re;re|=2;var i=_0();(Le!==e||ze!==t)&&(an=null,Ds=ke()+500,Nr(e,t));do try{I1();break}catch(l){S0(e,l)}while(1);xd(),Na.current=i,re=s,Te!==null?t=0:(Le=null,ze=0,t=Ie)}if(t!==0){if(t===2&&(s=Bc(e),s!==0&&(r=s,t=vu(e,s))),t===1)throw n=Ji,Nr(e,0),Ln(e,r),dt(e,ke()),n;if(t===6)Ln(e,r);else{if(s=e.current.alternate,!(r&30)&&!N1(s)&&(t=Aa(e,r),t===2&&(i=Bc(e),i!==0&&(r=i,t=vu(e,i))),t===1))throw n=Ji,Nr(e,0),Ln(e,r),dt(e,ke()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(R(345));case 2:yr(e,ot,an);break;case 3:if(Ln(e,r),(r&130023424)===r&&(t=Md+500-ke(),10<t)){if(ma(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Ze(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Yc(yr.bind(null,e,ot,an),t);break}yr(e,ot,an);break;case 4:if(Ln(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Wt(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*T1(r/1960))-r,10<r){e.timeoutHandle=Yc(yr.bind(null,e,ot,an),r);break}yr(e,ot,an);break;case 5:yr(e,ot,an);break;default:throw Error(R(329))}}}return dt(e,ke()),e.callbackNode===n?b0.bind(null,e):null}function vu(e,t){var n=Si;return e.current.memoizedState.isDehydrated&&(Nr(e,t).flags|=256),e=Aa(e,t),e!==2&&(t=ot,ot=n,t!==null&&yu(t)),e}function yu(e){ot===null?ot=e:ot.push.apply(ot,e)}function N1(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!qt(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ln(e,t){for(t&=~Ad,t&=~sl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wt(t),r=1<<n;e[n]=-1,t&=~r}}function Tf(e){if(re&6)throw Error(R(327));Ts();var t=ma(e,0);if(!(t&1))return dt(e,ke()),null;var n=Aa(e,t);if(e.tag!==0&&n===2){var r=Bc(e);r!==0&&(t=r,n=vu(e,r))}if(n===1)throw n=Ji,Nr(e,0),Ln(e,t),dt(e,ke()),n;if(n===6)throw Error(R(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yr(e,ot,an),dt(e,ke()),null}function Ld(e,t){var n=re;re|=1;try{return e(t)}finally{re=n,re===0&&(Ds=ke()+500,el&&ir())}}function Or(e){Un!==null&&Un.tag===0&&!(re&6)&&Ts();var t=re;re|=1;var n=Nt.transition,r=oe;try{if(Nt.transition=null,oe=1,e)return e()}finally{oe=r,Nt.transition=n,re=t,!(re&6)&&ir()}}function Od(){mt=gs.current,fe(gs)}function Nr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,o1(n)),Te!==null)for(n=Te.return;n!==null;){var r=n;switch(gd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&wa();break;case 3:Ls(),fe(ct),fe(Ge),jd();break;case 5:Ed(r);break;case 4:Ls();break;case 13:fe(ve);break;case 19:fe(ve);break;case 10:wd(r.type._context);break;case 22:case 23:Od()}n=n.return}if(Le=e,Te=e=Kn(e.current,null),ze=mt=t,Ie=0,Ji=null,Ad=sl=Lr=0,ot=Si=null,jr!==null){for(t=0;t<jr.length;t++)if(n=jr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}jr=null}return e}function S0(e,t){do{var n=Te;try{if(xd(),na.current=Ta,Pa){for(var r=xe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Pa=!1}if(Mr=0,Me=Re=xe=null,wi=!1,qi=0,Id.current=null,n===null||n.return===null){Ie=1,Ji=t,Te=null;break}e:{var i=e,o=n.return,l=n,a=t;if(t=ze,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=gf(o);if(p!==null){p.flags&=-257,vf(p,o,l,i,t),p.mode&1&&mf(i,c,t),t=p,a=c;var m=t.updateQueue;if(m===null){var v=new Set;v.add(a),t.updateQueue=v}else m.add(a);break e}else{if(!(t&1)){mf(i,c,t),Dd();break e}a=Error(R(426))}}else if(me&&l.mode&1){var b=gf(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),vf(b,o,l,i,t),vd(Os(a,l));break e}}i=a=Os(a,l),Ie!==4&&(Ie=2),Si===null?Si=[i]:Si.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=i0(i,a,t);cf(i,y);break e;case 1:l=a;var g=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(qn===null||!qn.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=o0(i,l,t);cf(i,S);break e}}i=i.return}while(i!==null)}j0(n)}catch(_){t=_,Te===n&&n!==null&&(Te=n=n.return);continue}break}while(1)}function _0(){var e=Na.current;return Na.current=Ta,e===null?Ta:e}function Dd(){(Ie===0||Ie===3||Ie===2)&&(Ie=4),Le===null||!(Lr&268435455)&&!(sl&268435455)||Ln(Le,ze)}function Aa(e,t){var n=re;re|=2;var r=_0();(Le!==e||ze!==t)&&(an=null,Nr(e,t));do try{R1();break}catch(s){S0(e,s)}while(1);if(xd(),re=n,Na.current=r,Te!==null)throw Error(R(261));return Le=null,ze=0,Ie}function R1(){for(;Te!==null;)E0(Te)}function I1(){for(;Te!==null&&!rw();)E0(Te)}function E0(e){var t=C0(e.alternate,e,mt);e.memoizedProps=e.pendingProps,t===null?j0(e):Te=t,Id.current=null}function j0(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=j1(n,t),n!==null){n.flags&=32767,Te=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ie=6,Te=null;return}}else if(n=E1(n,t,mt),n!==null){Te=n;return}if(t=t.sibling,t!==null){Te=t;return}Te=t=e}while(t!==null);Ie===0&&(Ie=5)}function yr(e,t,n){var r=oe,s=Nt.transition;try{Nt.transition=null,oe=1,A1(e,t,n,r)}finally{Nt.transition=s,oe=r}return null}function A1(e,t,n,r){do Ts();while(Un!==null);if(re&6)throw Error(R(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(R(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(fw(e,i),e===Le&&(Te=Le=null,ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Oo||(Oo=!0,P0(pa,function(){return Ts(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Nt.transition,Nt.transition=null;var o=oe;oe=1;var l=re;re|=4,Id.current=null,C1(e,n),x0(n,e),Zw(Jc),ga=!!Kc,Jc=Kc=null,e.current=n,P1(n),sw(),re=l,oe=o,Nt.transition=i}else e.current=n;if(Oo&&(Oo=!1,Un=e,Ia=s),i=e.pendingLanes,i===0&&(qn=null),aw(n.stateNode),dt(e,ke()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ra)throw Ra=!1,e=mu,mu=null,e;return Ia&1&&e.tag!==0&&Ts(),i=e.pendingLanes,i&1?e===gu?_i++:(_i=0,gu=e):_i=0,ir(),null}function Ts(){if(Un!==null){var e=ig(Ia),t=Nt.transition,n=oe;try{if(Nt.transition=null,oe=16>e?16:e,Un===null)var r=!1;else{if(e=Un,Un=null,Ia=0,re&6)throw Error(R(331));var s=re;for(re|=4,L=e.current;L!==null;){var i=L,o=i.child;if(L.flags&16){var l=i.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(L=c;L!==null;){var u=L;switch(u.tag){case 0:case 11:case 15:bi(8,u,i)}var h=u.child;if(h!==null)h.return=u,L=h;else for(;L!==null;){u=L;var f=u.sibling,p=u.return;if(g0(u),u===c){L=null;break}if(f!==null){f.return=p,L=f;break}L=p}}}var m=i.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}L=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,L=o;else e:for(;L!==null;){if(i=L,i.flags&2048)switch(i.tag){case 0:case 11:case 15:bi(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,L=y;break e}L=i.return}}var g=e.current;for(L=g;L!==null;){o=L;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,L=x;else e:for(o=g;L!==null;){if(l=L,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(_){_e(l,l.return,_)}if(l===o){L=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,L=S;break e}L=l.return}}if(re=s,ir(),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(Ja,e)}catch{}r=!0}return r}finally{oe=n,Nt.transition=t}}return!1}function Nf(e,t,n){t=Os(n,t),t=i0(e,t,1),e=Hn(e,t,1),t=Ze(),e!==null&&(io(e,1,t),dt(e,t))}function _e(e,t,n){if(e.tag===3)Nf(e,e,n);else for(;t!==null;){if(t.tag===3){Nf(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qn===null||!qn.has(r))){e=Os(n,e),e=o0(t,e,1),t=Hn(t,e,1),e=Ze(),t!==null&&(io(t,1,e),dt(t,e));break}}t=t.return}}function M1(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ze(),e.pingedLanes|=e.suspendedLanes&n,Le===e&&(ze&n)===n&&(Ie===4||Ie===3&&(ze&130023424)===ze&&500>ke()-Md?Nr(e,0):Ad|=n),dt(e,t)}function k0(e,t){t===0&&(e.mode&1?(t=ko,ko<<=1,!(ko&130023424)&&(ko=4194304)):t=1);var n=Ze();e=xn(e,t),e!==null&&(io(e,t,n),dt(e,n))}function L1(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),k0(e,n)}function O1(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(R(314))}r!==null&&r.delete(t),k0(e,n)}var C0;C0=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ct.current)lt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return lt=!1,_1(e,t,n);lt=!!(e.flags&131072)}else lt=!1,me&&t.flags&1048576&&Rg(t,_a,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;sa(e,t),e=t.pendingProps;var s=Is(t,Ge.current);Ps(t,n),s=Cd(null,t,r,e,s,n);var i=Pd();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ut(r)?(i=!0,ba(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Sd(t),s.updater=nl,t.stateNode=s,s._reactInternals=t,su(t,r,e,n),t=au(null,t,r,!0,i,n)):(t.tag=0,me&&i&&md(t),Ye(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(sa(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=$1(r),e=Ut(r,e),s){case 0:t=ou(null,t,r,e,n);break e;case 1:t=wf(null,t,r,e,n);break e;case 11:t=yf(null,t,r,e,n);break e;case 14:t=xf(null,t,r,Ut(r.type,e),n);break e}throw Error(R(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ut(r,s),ou(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ut(r,s),wf(e,t,r,s,n);case 3:e:{if(u0(t),e===null)throw Error(R(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Dg(e,t),ka(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Os(Error(R(423)),t),t=bf(e,t,r,n,s);break e}else if(r!==s){s=Os(Error(R(424)),t),t=bf(e,t,r,n,s);break e}else for(gt=Wn(t.stateNode.containerInfo.firstChild),vt=t,me=!0,Ft=null,n=Lg(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(As(),r===s){t=wn(e,t,n);break e}Ye(e,t,r,n)}t=t.child}return t;case 5:return $g(t),e===null&&tu(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Qc(r,s)?o=null:i!==null&&Qc(r,i)&&(t.flags|=32),c0(e,t),Ye(e,t,o,n),t.child;case 6:return e===null&&tu(t),null;case 13:return d0(e,t,n);case 4:return _d(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ms(t,null,r,n):Ye(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ut(r,s),yf(e,t,r,s,n);case 7:return Ye(e,t,t.pendingProps,n),t.child;case 8:return Ye(e,t,t.pendingProps.children,n),t.child;case 12:return Ye(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,ce(Ea,r._currentValue),r._currentValue=o,i!==null)if(qt(i.value,o)){if(i.children===s.children&&!ct.current){t=wn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(i.tag===1){a=pn(-1,n&-n),a.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?a.next=a:(a.next=u.next,u.next=a),c.pending=a}}i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),nu(i.return,n,t),l.lanes|=n;break}a=a.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(R(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),nu(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ye(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ps(t,n),s=Rt(s),r=r(s),t.flags|=1,Ye(e,t,r,n),t.child;case 14:return r=t.type,s=Ut(r,t.pendingProps),s=Ut(r.type,s),xf(e,t,r,s,n);case 15:return a0(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ut(r,s),sa(e,t),t.tag=1,ut(r)?(e=!0,ba(t)):e=!1,Ps(t,n),s0(t,r,s),su(t,r,s,n),au(null,t,r,!0,e,n);case 19:return h0(e,t,n);case 22:return l0(e,t,n)}throw Error(R(156,t.tag))};function P0(e,t){return tg(e,t)}function D1(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tt(e,t,n,r){return new D1(e,t,n,r)}function $d(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $1(e){if(typeof e=="function")return $d(e)?1:0;if(e!=null){if(e=e.$$typeof,e===rd)return 11;if(e===sd)return 14}return 2}function Kn(e,t){var n=e.alternate;return n===null?(n=Tt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function aa(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")$d(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case os:return Rr(n.children,s,i,t);case nd:o=8,s|=8;break;case Pc:return e=Tt(12,n,t,s|2),e.elementType=Pc,e.lanes=i,e;case Tc:return e=Tt(13,n,t,s),e.elementType=Tc,e.lanes=i,e;case Nc:return e=Tt(19,n,t,s),e.elementType=Nc,e.lanes=i,e;case $m:return il(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Om:o=10;break e;case Dm:o=9;break e;case rd:o=11;break e;case sd:o=14;break e;case Nn:o=16,r=null;break e}throw Error(R(130,e==null?e:typeof e,""))}return t=Tt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Rr(e,t,n,r){return e=Tt(7,e,r,t),e.lanes=n,e}function il(e,t,n,r){return e=Tt(22,e,r,t),e.elementType=$m,e.lanes=n,e.stateNode={isHidden:!1},e}function sc(e,t,n){return e=Tt(6,e,null,t),e.lanes=n,e}function ic(e,t,n){return t=Tt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function U1(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ul(0),this.expirationTimes=Ul(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ul(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ud(e,t,n,r,s,i,o,l,a){return e=new U1(e,t,n,l,a),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Tt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sd(i),e}function z1(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:is,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function T0(e){if(!e)return Zn;e=e._reactInternals;e:{if(Vr(e)!==e||e.tag!==1)throw Error(R(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ut(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(R(171))}if(e.tag===1){var n=e.type;if(ut(n))return Tg(e,n,t)}return t}function N0(e,t,n,r,s,i,o,l,a){return e=Ud(n,r,!0,e,s,i,o,l,a),e.context=T0(null),n=e.current,r=Ze(),s=Gn(n),i=pn(r,s),i.callback=t??null,Hn(n,i,s),e.current.lanes=s,io(e,s,r),dt(e,r),e}function ol(e,t,n,r){var s=t.current,i=Ze(),o=Gn(s);return n=T0(n),t.context===null?t.context=n:t.pendingContext=n,t=pn(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Hn(s,t,o),e!==null&&(Ht(e,s,o,i),ta(e,s,o)),o}function Ma(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Rf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function zd(e,t){Rf(e,t),(e=e.alternate)&&Rf(e,t)}function V1(){return null}var R0=typeof reportError=="function"?reportError:function(e){console.error(e)};function Vd(e){this._internalRoot=e}al.prototype.render=Vd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(R(409));ol(e,t,null,null)};al.prototype.unmount=Vd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Or(function(){ol(null,e,null,null)}),t[yn]=null}};function al(e){this._internalRoot=e}al.prototype.unstable_scheduleHydration=function(e){if(e){var t=lg();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mn.length&&t!==0&&t<Mn[n].priority;n++);Mn.splice(n,0,e),n===0&&ug(e)}};function Fd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ll(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function If(){}function F1(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Ma(o);i.call(c)}}var o=N0(t,r,e,0,null,!1,!1,"",If);return e._reactRootContainer=o,e[yn]=o.current,Vi(e.nodeType===8?e.parentNode:e),Or(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var c=Ma(a);l.call(c)}}var a=Ud(e,0,!1,null,null,!1,!1,"",If);return e._reactRootContainer=a,e[yn]=a.current,Vi(e.nodeType===8?e.parentNode:e),Or(function(){ol(t,a,n,r)}),a}function cl(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var a=Ma(o);l.call(a)}}ol(t,o,e,s)}else o=F1(n,t,e,s,r);return Ma(o)}og=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=di(t.pendingLanes);n!==0&&(ad(t,n|1),dt(t,ke()),!(re&6)&&(Ds=ke()+500,ir()))}break;case 13:Or(function(){var r=xn(e,1);if(r!==null){var s=Ze();Ht(r,e,1,s)}}),zd(e,1)}};ld=function(e){if(e.tag===13){var t=xn(e,134217728);if(t!==null){var n=Ze();Ht(t,e,134217728,n)}zd(e,134217728)}};ag=function(e){if(e.tag===13){var t=Gn(e),n=xn(e,t);if(n!==null){var r=Ze();Ht(n,e,t,r)}zd(e,t)}};lg=function(){return oe};cg=function(e,t){var n=oe;try{return oe=e,t()}finally{oe=n}};zc=function(e,t,n){switch(t){case"input":if(Ac(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Za(r);if(!s)throw Error(R(90));zm(r),Ac(r,s)}}}break;case"textarea":Fm(e,n);break;case"select":t=n.value,t!=null&&Es(e,!!n.multiple,t,!1)}};Jm=Ld;Qm=Or;var B1={usingClientEntryPoint:!1,Events:[ao,us,Za,Gm,Km,Ld]},ni={findFiberByHostInstance:Er,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},W1={bundleType:ni.bundleType,version:ni.version,rendererPackageName:ni.rendererPackageName,rendererConfig:ni.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_n.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zm(e),e===null?null:e.stateNode},findFiberByHostInstance:ni.findFiberByHostInstance||V1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Do=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Do.isDisabled&&Do.supportsFiber)try{Ja=Do.inject(W1),tn=Do}catch{}}bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B1;bt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fd(t))throw Error(R(200));return z1(e,t,null,n)};bt.createRoot=function(e,t){if(!Fd(e))throw Error(R(299));var n=!1,r="",s=R0;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Ud(e,1,!1,null,null,n,!1,r,s),e[yn]=t.current,Vi(e.nodeType===8?e.parentNode:e),new Vd(t)};bt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(R(188)):(e=Object.keys(e).join(","),Error(R(268,e)));return e=Zm(t),e=e===null?null:e.stateNode,e};bt.flushSync=function(e){return Or(e)};bt.hydrate=function(e,t,n){if(!ll(t))throw Error(R(200));return cl(null,e,t,!0,n)};bt.hydrateRoot=function(e,t,n){if(!Fd(e))throw Error(R(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=R0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=N0(t,null,e,1,n??null,s,!1,i,o),e[yn]=t.current,Vi(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new al(t)};bt.render=function(e,t,n){if(!ll(t))throw Error(R(200));return cl(null,e,t,!1,n)};bt.unmountComponentAtNode=function(e){if(!ll(e))throw Error(R(40));return e._reactRootContainer?(Or(function(){cl(null,null,e,!1,function(){e._reactRootContainer=null,e[yn]=null})}),!0):!1};bt.unstable_batchedUpdates=Ld;bt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ll(n))throw Error(R(200));if(e==null||e._reactInternals===void 0)throw Error(R(38));return cl(e,t,n,!1,r)};bt.version="18.3.1-next-f1338f8080-20240426";function I0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(I0)}catch(e){console.error(e)}}I0(),Im.exports=bt;var H1=Im.exports,A0,Af=H1;A0=Af.createRoot,Af.hydrateRoot;let q1={data:""},G1=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||q1,K1=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,J1=/\/\*[^]*?\*\/|  +/g,Mf=/\n+/g,On=(e,t)=>{let n="",r="",s="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?On(o,i):i+"{"+On(o,i[1]=="k"?"":t)+"}":typeof o=="object"?r+=On(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,a=>/&/.test(a)?a.replace(/&/g,l):l?l+" "+a:a)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=On.p?On.p(i,o):i+":"+o+";")}return n+(t&&s?t+"{"+s+"}":s)+r},on={},M0=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+M0(e[n]);return t}return e},Q1=(e,t,n,r,s)=>{let i=M0(e),o=on[i]||(on[i]=(a=>{let c=0,u=11;for(;c<a.length;)u=101*u+a.charCodeAt(c++)>>>0;return"go"+u})(i));if(!on[o]){let a=i!==e?e:(c=>{let u,h,f=[{}];for(;u=K1.exec(c.replace(J1,""));)u[4]?f.shift():u[3]?(h=u[3].replace(Mf," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][u[1]]=u[2].replace(Mf," ").trim();return f[0]})(e);on[o]=On(s?{["@keyframes "+o]:a}:a,n?"":"."+o)}let l=n&&on.g?on.g:null;return n&&(on.g=on[o]),((a,c,u,h)=>{h?c.data=c.data.replace(h,a):c.data.indexOf(a)===-1&&(c.data=u?a+c.data:c.data+a)})(on[o],t,r,l),o},Y1=(e,t,n)=>e.reduce((r,s,i)=>{let o=t[i];if(o&&o.call){let l=o(n),a=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=a?"."+a:l&&typeof l=="object"?l.props?"":On(l,""):l===!1?"":l}return r+s+(o??"")},"");function ul(e){let t=this||{},n=e.call?e(t.p):e;return Q1(n.unshift?n.raw?Y1(n,[].slice.call(arguments,1),t.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(t.p):s),{}):n,G1(t.target),t.g,t.o,t.k)}let L0,xu,wu;ul.bind({g:1});let bn=ul.bind({k:1});function X1(e,t,n,r){On.p=t,L0=e,xu=n,wu=r}function or(e,t){let n=this||{};return function(){let r=arguments;function s(i,o){let l=Object.assign({},i),a=l.className||s.className;n.p=Object.assign({theme:xu&&xu()},l),n.o=/ *go\d+/.test(a),l.className=ul.apply(n,r)+(a?" "+a:""),t&&(l.ref=o);let c=e;return e[0]&&(c=l.as||e,delete l.as),wu&&c[0]&&wu(l),L0(c,l)}return t?t(s):s}}var Z1=e=>typeof e=="function",La=(e,t)=>Z1(e)?e(t):e,eb=(()=>{let e=0;return()=>(++e).toString()})(),O0=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),tb=20,D0=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,tb)};case 1:return{...e,toasts:e.toasts.map(i=>i.id===t.toast.id?{...i,...t.toast}:i)};case 2:let{toast:n}=t;return D0(e,{type:e.toasts.find(i=>i.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(i=>i.id===r||r===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(i=>i.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let s=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+s}))}}},la=[],Cr={toasts:[],pausedAt:void 0},Fr=e=>{Cr=D0(Cr,e),la.forEach(t=>{t(Cr)})},nb={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},rb=(e={})=>{let[t,n]=w.useState(Cr),r=w.useRef(Cr);w.useEffect(()=>(r.current!==Cr&&n(Cr),la.push(n),()=>{let i=la.indexOf(n);i>-1&&la.splice(i,1)}),[]);let s=t.toasts.map(i=>{var o,l,a;return{...e,...e[i.type],...i,removeDelay:i.removeDelay||((o=e[i.type])==null?void 0:o.removeDelay)||(e==null?void 0:e.removeDelay),duration:i.duration||((l=e[i.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||nb[i.type],style:{...e.style,...(a=e[i.type])==null?void 0:a.style,...i.style}}});return{...t,toasts:s}},sb=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||eb()}),co=e=>(t,n)=>{let r=sb(t,e,n);return Fr({type:2,toast:r}),r.id},ge=(e,t)=>co("blank")(e,t);ge.error=co("error");ge.success=co("success");ge.loading=co("loading");ge.custom=co("custom");ge.dismiss=e=>{Fr({type:3,toastId:e})};ge.remove=e=>Fr({type:4,toastId:e});ge.promise=(e,t,n)=>{let r=ge.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let i=t.success?La(t.success,s):void 0;return i?ge.success(i,{id:r,...n,...n==null?void 0:n.success}):ge.dismiss(r),s}).catch(s=>{let i=t.error?La(t.error,s):void 0;i?ge.error(i,{id:r,...n,...n==null?void 0:n.error}):ge.dismiss(r)}),e};var ib=(e,t)=>{Fr({type:1,toast:{id:e,height:t}})},ob=()=>{Fr({type:5,time:Date.now()})},Ei=new Map,ab=1e3,lb=(e,t=ab)=>{if(Ei.has(e))return;let n=setTimeout(()=>{Ei.delete(e),Fr({type:4,toastId:e})},t);Ei.set(e,n)},cb=e=>{let{toasts:t,pausedAt:n}=rb(e);w.useEffect(()=>{if(n)return;let i=Date.now(),o=t.map(l=>{if(l.duration===1/0)return;let a=(l.duration||0)+l.pauseDuration-(i-l.createdAt);if(a<0){l.visible&&ge.dismiss(l.id);return}return setTimeout(()=>ge.dismiss(l.id),a)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[t,n]);let r=w.useCallback(()=>{n&&Fr({type:6,time:Date.now()})},[n]),s=w.useCallback((i,o)=>{let{reverseOrder:l=!1,gutter:a=8,defaultPosition:c}=o||{},u=t.filter(p=>(p.position||c)===(i.position||c)&&p.height),h=u.findIndex(p=>p.id===i.id),f=u.filter((p,m)=>m<h&&p.visible).length;return u.filter(p=>p.visible).slice(...l?[f+1]:[0,f]).reduce((p,m)=>p+(m.height||0)+a,0)},[t]);return w.useEffect(()=>{t.forEach(i=>{if(i.dismissed)lb(i.id,i.removeDelay);else{let o=Ei.get(i.id);o&&(clearTimeout(o),Ei.delete(i.id))}})},[t]),{toasts:t,handlers:{updateHeight:ib,startPause:ob,endPause:r,calculateOffset:s}}},ub=bn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,db=bn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,hb=bn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,fb=or("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ub} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${db} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${hb} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,pb=bn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,mb=or("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${pb} 1s linear infinite;
`,gb=bn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,vb=bn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,yb=or("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${gb} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${vb} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,xb=or("div")`
  position: absolute;
`,wb=or("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,bb=bn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Sb=or("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${bb} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,_b=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?w.createElement(Sb,null,t):t:n==="blank"?null:w.createElement(wb,null,w.createElement(mb,{...r}),n!=="loading"&&w.createElement(xb,null,n==="error"?w.createElement(fb,{...r}):w.createElement(yb,{...r})))},Eb=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,jb=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,kb="0%{opacity:0;} 100%{opacity:1;}",Cb="0%{opacity:1;} 100%{opacity:0;}",Pb=or("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Tb=or("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Nb=(e,t)=>{let n=e.includes("top")?1:-1,[r,s]=O0()?[kb,Cb]:[Eb(n),jb(n)];return{animation:t?`${bn(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${bn(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Rb=w.memo(({toast:e,position:t,style:n,children:r})=>{let s=e.height?Nb(e.position||t||"top-center",e.visible):{opacity:0},i=w.createElement(_b,{toast:e}),o=w.createElement(Tb,{...e.ariaProps},La(e.message,e));return w.createElement(Pb,{className:e.className,style:{...s,...n,...e.style}},typeof r=="function"?r({icon:i,message:o}):w.createElement(w.Fragment,null,i,o))});X1(w.createElement);var Ib=({id:e,className:t,style:n,onHeightUpdate:r,children:s})=>{let i=w.useCallback(o=>{if(o){let l=()=>{let a=o.getBoundingClientRect().height;r(e,a)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return w.createElement("div",{ref:i,className:t,style:n},s)},Ab=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:O0()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...s}},Mb=ul`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,$o=16,Lb=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:s,containerStyle:i,containerClassName:o})=>{let{toasts:l,handlers:a}=cb(n);return w.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:$o,left:$o,right:$o,bottom:$o,pointerEvents:"none",...i},className:o,onMouseEnter:a.startPause,onMouseLeave:a.endPause},l.map(c=>{let u=c.position||t,h=a.calculateOffset(c,{reverseOrder:e,gutter:r,defaultPosition:t}),f=Ab(u,h);return w.createElement(Ib,{id:c.id,key:c.id,onHeightUpdate:a.updateHeight,className:c.visible?Mb:"",style:f},c.type==="custom"?La(c.message,c):s?s(c):w.createElement(Rb,{toast:c,position:u}))}))};/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qi(){return Qi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qi.apply(this,arguments)}var zn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(zn||(zn={}));const Lf="popstate";function Ob(e){e===void 0&&(e={});function t(r,s){let{pathname:i,search:o,hash:l}=r.location;return bu("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Oa(s)}return $b(t,n,null,e)}function Ce(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function $0(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Db(){return Math.random().toString(36).substr(2,8)}function Of(e,t){return{usr:e.state,key:e.key,idx:t}}function bu(e,t,n,r){return n===void 0&&(n=null),Qi({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Hs(t):t,{state:n,key:t&&t.key||r||Db()})}function Oa(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Hs(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function $b(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=zn.Pop,a=null,c=u();c==null&&(c=0,o.replaceState(Qi({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){l=zn.Pop;let b=u(),y=b==null?null:b-c;c=b,a&&a({action:l,location:v.location,delta:y})}function f(b,y){l=zn.Push;let g=bu(v.location,b,y);n&&n(g,b),c=u()+1;let x=Of(g,c),S=v.createHref(g);try{o.pushState(x,"",S)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(S)}i&&a&&a({action:l,location:v.location,delta:1})}function p(b,y){l=zn.Replace;let g=bu(v.location,b,y);n&&n(g,b),c=u();let x=Of(g,c),S=v.createHref(g);o.replaceState(x,"",S),i&&a&&a({action:l,location:v.location,delta:0})}function m(b){let y=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof b=="string"?b:Oa(b);return g=g.replace(/ $/,"%20"),Ce(y,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,y)}let v={get action(){return l},get location(){return e(s,o)},listen(b){if(a)throw new Error("A history only accepts one active listener");return s.addEventListener(Lf,h),a=b,()=>{s.removeEventListener(Lf,h),a=null}},createHref(b){return t(s,b)},createURL:m,encodeLocation(b){let y=m(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(b){return o.go(b)}};return v}var Df;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Df||(Df={}));function Ub(e,t,n){return n===void 0&&(n="/"),zb(e,t,n,!1)}function zb(e,t,n,r){let s=typeof t=="string"?Hs(t):t,i=Bd(s.pathname||"/",n);if(i==null)return null;let o=U0(e);Vb(o);let l=null;for(let a=0;l==null&&a<o.length;++a){let c=Xb(i);l=Qb(o[a],c,r)}return l}function U0(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let a={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};a.relativePath.startsWith("/")&&(Ce(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let c=Jn([r,a.relativePath]),u=n.concat(a);i.children&&i.children.length>0&&(Ce(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),U0(i.children,t,u,c)),!(i.path==null&&!i.index)&&t.push({path:c,score:Kb(c,i.index),routesMeta:u})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let a of z0(i.path))s(i,o,a)}),t}function z0(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=z0(r.join("/")),l=[];return l.push(...o.map(a=>a===""?i:[i,a].join("/"))),s&&l.push(...o),l.map(a=>e.startsWith("/")&&a===""?"/":a)}function Vb(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Jb(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Fb=/^:[\w-]+$/,Bb=3,Wb=2,Hb=1,qb=10,Gb=-2,$f=e=>e==="*";function Kb(e,t){let n=e.split("/"),r=n.length;return n.some($f)&&(r+=Gb),t&&(r+=Wb),n.filter(s=>!$f(s)).reduce((s,i)=>s+(Fb.test(i)?Bb:i===""?Hb:qb),r)}function Jb(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function Qb(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,s={},i="/",o=[];for(let l=0;l<r.length;++l){let a=r[l],c=l===r.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=Uf({path:a.relativePath,caseSensitive:a.caseSensitive,end:c},u),f=a.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=Uf({path:a.relativePath,caseSensitive:a.caseSensitive,end:!1},u)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Jn([i,h.pathname]),pathnameBase:nS(Jn([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Jn([i,h.pathnameBase]))}return o}function Uf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Yb(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((c,u,h)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let v=l[h]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const m=l[h];return p&&!m?c[f]=void 0:c[f]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:e}}function Yb(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),$0(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,a)=>(r.push({paramName:l,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function Xb(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return $0(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Bd(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Zb(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Hs(e):e;return{pathname:n?n.startsWith("/")?n:eS(n,t):t,search:rS(r),hash:sS(s)}}function eS(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function oc(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function tS(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Wd(e,t){let n=tS(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Hd(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Hs(e):(s=Qi({},e),Ce(!s.pathname||!s.pathname.includes("?"),oc("?","pathname","search",s)),Ce(!s.pathname||!s.pathname.includes("#"),oc("#","pathname","hash",s)),Ce(!s.search||!s.search.includes("#"),oc("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let h=t.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let a=Zb(s,l),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(c||u)&&(a.pathname+="/"),a}const Jn=e=>e.join("/").replace(/\/\/+/g,"/"),nS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),rS=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,sS=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function iS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const V0=["post","put","patch","delete"];new Set(V0);const oS=["get",...V0];new Set(oS);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yi(){return Yi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yi.apply(this,arguments)}const qd=w.createContext(null),aS=w.createContext(null),ar=w.createContext(null),dl=w.createContext(null),lr=w.createContext({outlet:null,matches:[],isDataRoute:!1}),F0=w.createContext(null);function lS(e,t){let{relative:n}=t===void 0?{}:t;qs()||Ce(!1);let{basename:r,navigator:s}=w.useContext(ar),{hash:i,pathname:o,search:l}=W0(e,{relative:n}),a=o;return r!=="/"&&(a=o==="/"?r:Jn([r,o])),s.createHref({pathname:a,search:l,hash:i})}function qs(){return w.useContext(dl)!=null}function Kt(){return qs()||Ce(!1),w.useContext(dl).location}function B0(e){w.useContext(ar).static||w.useLayoutEffect(e)}function sn(){let{isDataRoute:e}=w.useContext(lr);return e?bS():cS()}function cS(){qs()||Ce(!1);let e=w.useContext(qd),{basename:t,future:n,navigator:r}=w.useContext(ar),{matches:s}=w.useContext(lr),{pathname:i}=Kt(),o=JSON.stringify(Wd(s,n.v7_relativeSplatPath)),l=w.useRef(!1);return B0(()=>{l.current=!0}),w.useCallback(function(c,u){if(u===void 0&&(u={}),!l.current)return;if(typeof c=="number"){r.go(c);return}let h=Hd(c,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Jn([t,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[t,r,o,i,e])}function W0(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=w.useContext(ar),{matches:s}=w.useContext(lr),{pathname:i}=Kt(),o=JSON.stringify(Wd(s,r.v7_relativeSplatPath));return w.useMemo(()=>Hd(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function uS(e,t){return dS(e,t)}function dS(e,t,n,r){qs()||Ce(!1);let{navigator:s,static:i}=w.useContext(ar),{matches:o}=w.useContext(lr),l=o[o.length-1],a=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let u=Kt(),h;if(t){var f;let y=typeof t=="string"?Hs(t):t;c==="/"||(f=y.pathname)!=null&&f.startsWith(c)||Ce(!1),h=y}else h=u;let p=h.pathname||"/",m=p;if(c!=="/"){let y=c.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(y.length).join("/")}let v=!i&&n&&n.matches&&n.matches.length>0?n.matches:Ub(e,{pathname:m}),b=gS(v&&v.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:Jn([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:Jn([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,n,r);return t&&b?w.createElement(dl.Provider,{value:{location:Yi({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:zn.Pop}},b):b}function hS(){let e=wS(),t=iS(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),n?w.createElement("pre",{style:s},n):null,i)}const fS=w.createElement(hS,null);class pS extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?w.createElement(lr.Provider,{value:this.props.routeContext},w.createElement(F0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mS(e){let{routeContext:t,match:n,children:r}=e,s=w.useContext(qd);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(lr.Provider,{value:t},r)}function gS(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let u=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);u>=0||Ce(!1),o=o.slice(0,Math.min(o.length,u+1))}let a=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:f,errors:p}=n,m=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||m){a=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let p,m=!1,v=null,b=null;n&&(p=l&&h.route.id?l[h.route.id]:void 0,v=h.route.errorElement||fS,a&&(c<0&&f===0?(SS("route-fallback",!1),m=!0,b=null):c===f&&(m=!0,b=h.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,f+1)),g=()=>{let x;return p?x=v:m?x=b:h.route.Component?x=w.createElement(h.route.Component,null):h.route.element?x=h.route.element:x=u,w.createElement(mS,{match:h,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:x})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?w.createElement(pS,{location:n.location,revalidation:n.revalidation,component:v,error:p,children:g(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):g()},null)}var H0=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(H0||{}),Da=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Da||{});function vS(e){let t=w.useContext(qd);return t||Ce(!1),t}function yS(e){let t=w.useContext(aS);return t||Ce(!1),t}function xS(e){let t=w.useContext(lr);return t||Ce(!1),t}function q0(e){let t=xS(),n=t.matches[t.matches.length-1];return n.route.id||Ce(!1),n.route.id}function wS(){var e;let t=w.useContext(F0),n=yS(Da.UseRouteError),r=q0(Da.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function bS(){let{router:e}=vS(H0.UseNavigateStable),t=q0(Da.UseNavigateStable),n=w.useRef(!1);return B0(()=>{n.current=!0}),w.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Yi({fromRouteId:t},i)))},[e,t])}const zf={};function SS(e,t,n){!t&&!zf[e]&&(zf[e]=!0)}function _S(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function vs(e){let{to:t,replace:n,state:r,relative:s}=e;qs()||Ce(!1);let{future:i,static:o}=w.useContext(ar),{matches:l}=w.useContext(lr),{pathname:a}=Kt(),c=sn(),u=Hd(t,Wd(l,i.v7_relativeSplatPath),a,s==="path"),h=JSON.stringify(u);return w.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function jt(e){Ce(!1)}function ES(e){let{basename:t="/",children:n=null,location:r,navigationType:s=zn.Pop,navigator:i,static:o=!1,future:l}=e;qs()&&Ce(!1);let a=t.replace(/^\/*/,"/"),c=w.useMemo(()=>({basename:a,navigator:i,static:o,future:Yi({v7_relativeSplatPath:!1},l)}),[a,l,i,o]);typeof r=="string"&&(r=Hs(r));let{pathname:u="/",search:h="",hash:f="",state:p=null,key:m="default"}=r,v=w.useMemo(()=>{let b=Bd(u,a);return b==null?null:{location:{pathname:b,search:h,hash:f,state:p,key:m},navigationType:s}},[a,u,h,f,p,m,s]);return v==null?null:w.createElement(ar.Provider,{value:c},w.createElement(dl.Provider,{children:n,value:v}))}function jS(e){let{children:t,location:n}=e;return uS(Su(t),n)}new Promise(()=>{});function Su(e,t){t===void 0&&(t=[]);let n=[];return w.Children.forEach(e,(r,s)=>{if(!w.isValidElement(r))return;let i=[...t,s];if(r.type===w.Fragment){n.push.apply(n,Su(r.props.children,i));return}r.type!==jt&&Ce(!1),!r.props.index||!r.props.children||Ce(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Su(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _u(){return _u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_u.apply(this,arguments)}function kS(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function CS(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function PS(e,t){return e.button===0&&(!t||t==="_self")&&!CS(e)}const TS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],NS="6";try{window.__reactRouterVersion=NS}catch{}const RS="startTransition",Vf=Mx[RS];function IS(e){let{basename:t,children:n,future:r,window:s}=e,i=w.useRef();i.current==null&&(i.current=Ob({window:s,v5Compat:!0}));let o=i.current,[l,a]=w.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=w.useCallback(h=>{c&&Vf?Vf(()=>a(h)):a(h)},[a,c]);return w.useLayoutEffect(()=>o.listen(u),[o,u]),w.useEffect(()=>_S(r),[r]),w.createElement(ES,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const AS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",MS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ri=w.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:a,to:c,preventScrollReset:u,viewTransition:h}=t,f=kS(t,TS),{basename:p}=w.useContext(ar),m,v=!1;if(typeof c=="string"&&MS.test(c)&&(m=c,AS))try{let x=new URL(window.location.href),S=c.startsWith("//")?new URL(x.protocol+c):new URL(c),_=Bd(S.pathname,p);S.origin===x.origin&&_!=null?c=_+S.search+S.hash:v=!0}catch{}let b=lS(c,{relative:s}),y=LS(c,{replace:o,state:l,target:a,preventScrollReset:u,relative:s,viewTransition:h});function g(x){r&&r(x),x.defaultPrevented||y(x)}return w.createElement("a",_u({},f,{href:m||b,onClick:v||i?r:g,ref:n,target:a}))});var Ff;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ff||(Ff={}));var Bf;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Bf||(Bf={}));function LS(e,t){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,a=sn(),c=Kt(),u=W0(e,{relative:o});return w.useCallback(h=>{if(PS(h,n)){h.preventDefault();let f=r!==void 0?r:Oa(c)===Oa(u);a(e,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[c,a,u,r,s,n,e,i,o,l])}const G0=w.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),hl=w.createContext({}),fl=w.createContext(null),pl=typeof document<"u",Gd=pl?w.useLayoutEffect:w.useEffect,K0=w.createContext({strict:!1}),Kd=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),OS="framerAppearId",J0="data-"+Kd(OS);function DS(e,t,n,r){const{visualElement:s}=w.useContext(hl),i=w.useContext(K0),o=w.useContext(fl),l=w.useContext(G0).reducedMotion,a=w.useRef();r=r||i.renderer,!a.current&&r&&(a.current=r(e,{visualState:t,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const c=a.current;w.useInsertionEffect(()=>{c&&c.update(n,o)});const u=w.useRef(!!(n[J0]&&!window.HandoffComplete));return Gd(()=>{c&&(c.render(),u.current&&c.animationState&&c.animationState.animateChanges())}),w.useEffect(()=>{c&&(c.updateFeatures(),!u.current&&c.animationState&&c.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),c}function ys(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function $S(e,t,n){return w.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):ys(n)&&(n.current=r))},[t])}function Xi(e){return typeof e=="string"||Array.isArray(e)}function ml(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Jd=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Qd=["initial",...Jd];function gl(e){return ml(e.animate)||Qd.some(t=>Xi(e[t]))}function Q0(e){return!!(gl(e)||e.variants)}function US(e,t){if(gl(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Xi(n)?n:void 0,animate:Xi(r)?r:void 0}}return e.inherit!==!1?t:{}}function zS(e){const{initial:t,animate:n}=US(e,w.useContext(hl));return w.useMemo(()=>({initial:t,animate:n}),[Wf(t),Wf(n)])}function Wf(e){return Array.isArray(e)?e.join(" "):e}const Hf={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Zi={};for(const e in Hf)Zi[e]={isEnabled:t=>Hf[e].some(n=>!!t[n])};function VS(e){for(const t in e)Zi[t]={...Zi[t],...e[t]}}const Yd=w.createContext({}),Y0=w.createContext({}),FS=Symbol.for("motionComponentSymbol");function BS({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:s}){e&&VS(e);function i(l,a){let c;const u={...w.useContext(G0),...l,layoutId:WS(l)},{isStatic:h}=u,f=zS(l),p=r(l,h);if(!h&&pl){f.visualElement=DS(s,p,u,t);const m=w.useContext(Y0),v=w.useContext(K0).strict;f.visualElement&&(c=f.visualElement.loadFeatures(u,v,e,m))}return w.createElement(hl.Provider,{value:f},c&&f.visualElement?w.createElement(c,{visualElement:f.visualElement,...u}):null,n(s,l,$S(p,f.visualElement,a),p,h,f.visualElement))}const o=w.forwardRef(i);return o[FS]=s,o}function WS({layoutId:e}){const t=w.useContext(Yd).id;return t&&e!==void 0?t+"-"+e:e}function HS(e){function t(r,s={}){return BS(e(r,s))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,s)=>(n.has(s)||n.set(s,t(s)),n.get(s))})}const qS=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Xd(e){return typeof e!="string"||e.includes("-")?!1:!!(qS.indexOf(e)>-1||/[A-Z]/.test(e))}const $a={};function GS(e){Object.assign($a,e)}const uo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Br=new Set(uo);function X0(e,{layout:t,layoutId:n}){return Br.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!$a[e]||e==="opacity")}const ht=e=>!!(e&&e.getVelocity),KS={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},JS=uo.length;function QS(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<JS;o++){const l=uo[o];if(e[l]!==void 0){const a=KS[l]||l;i+=`${a}(${e[l]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(e,r?"":i):n&&r&&(i="none"),i}const Z0=e=>t=>typeof t=="string"&&t.startsWith(e),ev=Z0("--"),Eu=Z0("var(--"),YS=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,XS=(e,t)=>t&&typeof e=="number"?t.transform(e):e,er=(e,t,n)=>Math.min(Math.max(n,e),t),Wr={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ji={...Wr,transform:e=>er(0,1,e)},Uo={...Wr,default:1},ki=e=>Math.round(e*1e5)/1e5,vl=/(-)?([\d]*\.?[\d])+/g,tv=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,ZS=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function ho(e){return typeof e=="string"}const fo=e=>({test:t=>ho(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Cn=fo("deg"),rn=fo("%"),F=fo("px"),e_=fo("vh"),t_=fo("vw"),qf={...rn,parse:e=>rn.parse(e)/100,transform:e=>rn.transform(e*100)},Gf={...Wr,transform:Math.round},nv={borderWidth:F,borderTopWidth:F,borderRightWidth:F,borderBottomWidth:F,borderLeftWidth:F,borderRadius:F,radius:F,borderTopLeftRadius:F,borderTopRightRadius:F,borderBottomRightRadius:F,borderBottomLeftRadius:F,width:F,maxWidth:F,height:F,maxHeight:F,size:F,top:F,right:F,bottom:F,left:F,padding:F,paddingTop:F,paddingRight:F,paddingBottom:F,paddingLeft:F,margin:F,marginTop:F,marginRight:F,marginBottom:F,marginLeft:F,rotate:Cn,rotateX:Cn,rotateY:Cn,rotateZ:Cn,scale:Uo,scaleX:Uo,scaleY:Uo,scaleZ:Uo,skew:Cn,skewX:Cn,skewY:Cn,distance:F,translateX:F,translateY:F,translateZ:F,x:F,y:F,z:F,perspective:F,transformPerspective:F,opacity:ji,originX:qf,originY:qf,originZ:F,zIndex:Gf,fillOpacity:ji,strokeOpacity:ji,numOctaves:Gf};function Zd(e,t,n,r){const{style:s,vars:i,transform:o,transformOrigin:l}=e;let a=!1,c=!1,u=!0;for(const h in t){const f=t[h];if(ev(h)){i[h]=f;continue}const p=nv[h],m=XS(f,p);if(Br.has(h)){if(a=!0,o[h]=m,!u)continue;f!==(p.default||0)&&(u=!1)}else h.startsWith("origin")?(c=!0,l[h]=m):s[h]=m}if(t.transform||(a||r?s.transform=QS(e.transform,n,u,r):s.transform&&(s.transform="none")),c){const{originX:h="50%",originY:f="50%",originZ:p=0}=l;s.transformOrigin=`${h} ${f} ${p}`}}const eh=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function rv(e,t,n){for(const r in t)!ht(t[r])&&!X0(r,n)&&(e[r]=t[r])}function n_({transformTemplate:e},t,n){return w.useMemo(()=>{const r=eh();return Zd(r,t,{enableHardwareAcceleration:!n},e),Object.assign({},r.vars,r.style)},[t])}function r_(e,t,n){const r=e.style||{},s={};return rv(s,r,e),Object.assign(s,n_(e,t,n)),e.transformValues?e.transformValues(s):s}function s_(e,t,n){const r={},s=r_(e,t,n);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=s,r}const i_=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ua(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||i_.has(e)}let sv=e=>!Ua(e);function o_(e){e&&(sv=t=>t.startsWith("on")?!Ua(t):e(t))}try{o_(require("@emotion/is-prop-valid").default)}catch{}function a_(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(sv(s)||n===!0&&Ua(s)||!t&&!Ua(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}function Kf(e,t,n){return typeof e=="string"?e:F.transform(t+n*e)}function l_(e,t,n){const r=Kf(t,e.x,e.width),s=Kf(n,e.y,e.height);return`${r} ${s}`}const c_={offset:"stroke-dashoffset",array:"stroke-dasharray"},u_={offset:"strokeDashoffset",array:"strokeDasharray"};function d_(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?c_:u_;e[i.offset]=F.transform(-r);const o=F.transform(t),l=F.transform(n);e[i.array]=`${o} ${l}`}function th(e,{attrX:t,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:l=1,pathOffset:a=0,...c},u,h,f){if(Zd(e,c,u,f),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:m,dimensions:v}=e;p.transform&&(v&&(m.transform=p.transform),delete p.transform),v&&(s!==void 0||i!==void 0||m.transform)&&(m.transformOrigin=l_(v,s!==void 0?s:.5,i!==void 0?i:.5)),t!==void 0&&(p.x=t),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),o!==void 0&&d_(p,o,l,a,!1)}const iv=()=>({...eh(),attrs:{}}),nh=e=>typeof e=="string"&&e.toLowerCase()==="svg";function h_(e,t,n,r){const s=w.useMemo(()=>{const i=iv();return th(i,t,{enableHardwareAcceleration:!1},nh(r),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};rv(i,e.style,e),s.style={...i,...s.style}}return s}function f_(e=!1){return(n,r,s,{latestValues:i},o)=>{const a=(Xd(n)?h_:s_)(r,i,o,n),u={...a_(r,typeof n=="string",e),...a,ref:s},{children:h}=r,f=w.useMemo(()=>ht(h)?h.get():h,[h]);return w.createElement(n,{...u,children:f})}}function ov(e,{style:t,vars:n},r,s){Object.assign(e.style,t,s&&s.getProjectionStyles(r));for(const i in n)e.style.setProperty(i,n[i])}const av=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function lv(e,t,n,r){ov(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(av.has(s)?s:Kd(s),t.attrs[s])}function rh(e,t){const{style:n}=e,r={};for(const s in n)(ht(n[s])||t.style&&ht(t.style[s])||X0(s,e))&&(r[s]=n[s]);return r}function cv(e,t){const n=rh(e,t);for(const r in e)if(ht(e[r])||ht(t[r])){const s=uo.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=e[r]}return n}function sh(e,t,n,r={},s={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,s)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,s)),t}function uv(e){const t=w.useRef(null);return t.current===null&&(t.current=e()),t.current}const za=e=>Array.isArray(e),p_=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),m_=e=>za(e)?e[e.length-1]||0:e;function ca(e){const t=ht(e)?e.get():e;return p_(t)?t.toValue():t}function g_({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,s,i){const o={latestValues:v_(r,s,i,e),renderState:t()};return n&&(o.mount=l=>n(r,l,o)),o}const dv=e=>(t,n)=>{const r=w.useContext(hl),s=w.useContext(fl),i=()=>g_(e,t,r,s);return n?i():uv(i)};function v_(e,t,n,r){const s={},i=r(e,{});for(const f in i)s[f]=ca(i[f]);let{initial:o,animate:l}=e;const a=gl(e),c=Q0(e);t&&c&&!a&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const h=u?l:o;return h&&typeof h!="boolean"&&!ml(h)&&(Array.isArray(h)?h:[h]).forEach(p=>{const m=sh(e,p);if(!m)return;const{transitionEnd:v,transition:b,...y}=m;for(const g in y){let x=y[g];if(Array.isArray(x)){const S=u?x.length-1:0;x=x[S]}x!==null&&(s[g]=x)}for(const g in v)s[g]=v[g]}),s}const Ee=e=>e;class Jf{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function y_(e){let t=new Jf,n=new Jf,r=0,s=!1,i=!1;const o=new WeakSet,l={schedule:(a,c=!1,u=!1)=>{const h=u&&s,f=h?t:n;return c&&o.add(a),f.add(a)&&h&&s&&(r=t.order.length),a},cancel:a=>{n.remove(a),o.delete(a)},process:a=>{if(s){i=!0;return}if(s=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let c=0;c<r;c++){const u=t.order[c];u(a),o.has(u)&&(l.schedule(u),e())}s=!1,i&&(i=!1,l.process(a))}};return l}const zo=["prepare","read","update","preRender","render","postRender"],x_=40;function w_(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=zo.reduce((h,f)=>(h[f]=y_(()=>n=!0),h),{}),o=h=>i[h].process(s),l=()=>{const h=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(h-s.timestamp,x_),1),s.timestamp=h,s.isProcessing=!0,zo.forEach(o),s.isProcessing=!1,n&&t&&(r=!1,e(l))},a=()=>{n=!0,r=!0,s.isProcessing||e(l)};return{schedule:zo.reduce((h,f)=>{const p=i[f];return h[f]=(m,v=!1,b=!1)=>(n||a(),p.schedule(m,v,b)),h},{}),cancel:h=>zo.forEach(f=>i[f].cancel(h)),state:s,steps:i}}const{schedule:ue,cancel:Sn,state:He,steps:ac}=w_(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ee,!0),b_={useVisualState:dv({scrapeMotionValuesFromProps:cv,createRenderState:iv,onMount:(e,t,{renderState:n,latestValues:r})=>{ue.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),ue.render(()=>{th(n,r,{enableHardwareAcceleration:!1},nh(t.tagName),e.transformTemplate),lv(t,n)})}})},S_={useVisualState:dv({scrapeMotionValuesFromProps:rh,createRenderState:eh})};function __(e,{forwardMotionProps:t=!1},n,r){return{...Xd(e)?b_:S_,preloadedFeatures:n,useRender:f_(t),createVisualElement:r,Component:e}}function hn(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const hv=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function yl(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const E_=e=>t=>hv(t)&&e(t,yl(t));function mn(e,t,n,r){return hn(e,t,E_(n),r)}const j_=(e,t)=>n=>t(e(n)),Qn=(...e)=>e.reduce(j_);function fv(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const Qf=fv("dragHorizontal"),Yf=fv("dragVertical");function pv(e){let t=!1;if(e==="y")t=Yf();else if(e==="x")t=Qf();else{const n=Qf(),r=Yf();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function mv(){const e=pv(!0);return e?(e(),!1):!0}class cr{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Xf(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||mv())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[r]&&ue.update(()=>l[r](i,o))};return mn(e.current,n,s,{passive:!e.getProps()[r]})}class k_ extends cr{mount(){this.unmount=Qn(Xf(this.node,!0),Xf(this.node,!1))}unmount(){}}class C_ extends cr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Qn(hn(this.node.current,"focus",()=>this.onFocus()),hn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const gv=(e,t)=>t?e===t?!0:gv(e,t.parentElement):!1;function lc(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,yl(n))}class P_ extends cr{constructor(){super(...arguments),this.removeStartListeners=Ee,this.removeEndListeners=Ee,this.removeAccessibleListeners=Ee,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=mn(window,"pointerup",(l,a)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:h}=this.node.getProps();ue.update(()=>{!h&&!gv(this.node.current,l.target)?u&&u(l,a):c&&c(l,a)})},{passive:!(r.onTap||r.onPointerUp)}),o=mn(window,"pointercancel",(l,a)=>this.cancelPress(l,a),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Qn(i,o),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||lc("up",(a,c)=>{const{onTap:u}=this.node.getProps();u&&ue.update(()=>u(a,c))})};this.removeEndListeners(),this.removeEndListeners=hn(this.node.current,"keyup",o),lc("down",(l,a)=>{this.startPress(l,a)})},n=hn(this.node.current,"keydown",t),r=()=>{this.isPressing&&lc("cancel",(i,o)=>this.cancelPress(i,o))},s=hn(this.node.current,"blur",r);this.removeAccessibleListeners=Qn(n,s)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&ue.update(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!mv()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&ue.update(()=>r(t,n))}mount(){const t=this.node.getProps(),n=mn(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=hn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Qn(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const ju=new WeakMap,cc=new WeakMap,T_=e=>{const t=ju.get(e.target);t&&t(e)},N_=e=>{e.forEach(T_)};function R_({root:e,...t}){const n=e||document;cc.has(n)||cc.set(n,{});const r=cc.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(N_,{root:e,...t})),r[s]}function I_(e,t,n){const r=R_(t);return ju.set(e,n),r.observe(e),()=>{ju.delete(e),r.unobserve(e)}}const A_={some:0,all:1};class M_ extends cr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:A_[s]},l=a=>{const{isIntersecting:c}=a;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=c?u:h;f&&f(a)};return I_(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(L_(t,n))&&this.startObserver()}unmount(){}}function L_({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const O_={inView:{Feature:M_},tap:{Feature:P_},focus:{Feature:C_},hover:{Feature:k_}};function vv(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function D_(e){const t={};return e.values.forEach((n,r)=>t[r]=n.get()),t}function $_(e){const t={};return e.values.forEach((n,r)=>t[r]=n.getVelocity()),t}function xl(e,t,n){const r=e.getProps();return sh(r,t,n!==void 0?n:r.custom,D_(e),$_(e))}let U_=Ee,ih=Ee;const Yn=e=>e*1e3,gn=e=>e/1e3,z_={current:!1},yv=e=>Array.isArray(e)&&typeof e[0]=="number";function xv(e){return!!(!e||typeof e=="string"&&wv[e]||yv(e)||Array.isArray(e)&&e.every(xv))}const fi=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,wv={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:fi([0,.65,.55,1]),circOut:fi([.55,0,1,.45]),backIn:fi([.31,.01,.66,-.59]),backOut:fi([.33,1.53,.69,.99])};function bv(e){if(e)return yv(e)?fi(e):Array.isArray(e)?e.map(bv):wv[e]}function V_(e,t,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:l,times:a}={}){const c={[t]:n};a&&(c.offset=a);const u=bv(l);return Array.isArray(u)&&(c.easing=u),e.animate(c,{delay:r,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function F_(e,{repeat:t,repeatType:n="loop"}){const r=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[r]}const Sv=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,B_=1e-7,W_=12;function H_(e,t,n,r,s){let i,o,l=0;do o=t+(n-t)/2,i=Sv(o,r,s)-e,i>0?n=o:t=o;while(Math.abs(i)>B_&&++l<W_);return o}function po(e,t,n,r){if(e===t&&n===r)return Ee;const s=i=>H_(i,0,1,e,n);return i=>i===0||i===1?i:Sv(s(i),t,r)}const q_=po(.42,0,1,1),G_=po(0,0,.58,1),_v=po(.42,0,.58,1),K_=e=>Array.isArray(e)&&typeof e[0]!="number",Ev=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,jv=e=>t=>1-e(1-t),oh=e=>1-Math.sin(Math.acos(e)),kv=jv(oh),J_=Ev(oh),Cv=po(.33,1.53,.69,.99),ah=jv(Cv),Q_=Ev(ah),Y_=e=>(e*=2)<1?.5*ah(e):.5*(2-Math.pow(2,-10*(e-1))),X_={linear:Ee,easeIn:q_,easeInOut:_v,easeOut:G_,circIn:oh,circInOut:J_,circOut:kv,backIn:ah,backInOut:Q_,backOut:Cv,anticipate:Y_},Zf=e=>{if(Array.isArray(e)){ih(e.length===4);const[t,n,r,s]=e;return po(t,n,r,s)}else if(typeof e=="string")return X_[e];return e},lh=(e,t)=>n=>!!(ho(n)&&ZS.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),Pv=(e,t,n)=>r=>{if(!ho(r))return r;const[s,i,o,l]=r.match(vl);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},Z_=e=>er(0,255,e),uc={...Wr,transform:e=>Math.round(Z_(e))},Pr={test:lh("rgb","red"),parse:Pv("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+uc.transform(e)+", "+uc.transform(t)+", "+uc.transform(n)+", "+ki(ji.transform(r))+")"};function eE(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const ku={test:lh("#"),parse:eE,transform:Pr.transform},xs={test:lh("hsl","hue"),parse:Pv("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+rn.transform(ki(t))+", "+rn.transform(ki(n))+", "+ki(ji.transform(r))+")"},Qe={test:e=>Pr.test(e)||ku.test(e)||xs.test(e),parse:e=>Pr.test(e)?Pr.parse(e):xs.test(e)?xs.parse(e):ku.parse(e),transform:e=>ho(e)?e:e.hasOwnProperty("red")?Pr.transform(e):xs.transform(e)},ye=(e,t,n)=>-n*e+n*t+e;function dc(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function tE({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,o=0;if(!t)s=i=o=n;else{const l=n<.5?n*(1+t):n+t-n*t,a=2*n-l;s=dc(a,l,e+1/3),i=dc(a,l,e),o=dc(a,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const hc=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},nE=[ku,Pr,xs],rE=e=>nE.find(t=>t.test(e));function ep(e){const t=rE(e);let n=t.parse(e);return t===xs&&(n=tE(n)),n}const Tv=(e,t)=>{const n=ep(e),r=ep(t),s={...n};return i=>(s.red=hc(n.red,r.red,i),s.green=hc(n.green,r.green,i),s.blue=hc(n.blue,r.blue,i),s.alpha=ye(n.alpha,r.alpha,i),Pr.transform(s))};function sE(e){var t,n;return isNaN(e)&&ho(e)&&(((t=e.match(vl))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(tv))===null||n===void 0?void 0:n.length)||0)>0}const Nv={regex:YS,countKey:"Vars",token:"${v}",parse:Ee},Rv={regex:tv,countKey:"Colors",token:"${c}",parse:Qe.parse},Iv={regex:vl,countKey:"Numbers",token:"${n}",parse:Wr.parse};function fc(e,{regex:t,countKey:n,token:r,parse:s}){const i=e.tokenised.match(t);i&&(e["num"+n]=i.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...i.map(s)))}function Va(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&fc(n,Nv),fc(n,Rv),fc(n,Iv),n}function Av(e){return Va(e).values}function Mv(e){const{values:t,numColors:n,numVars:r,tokenised:s}=Va(e),i=t.length;return o=>{let l=s;for(let a=0;a<i;a++)a<r?l=l.replace(Nv.token,o[a]):a<r+n?l=l.replace(Rv.token,Qe.transform(o[a])):l=l.replace(Iv.token,ki(o[a]));return l}}const iE=e=>typeof e=="number"?0:e;function oE(e){const t=Av(e);return Mv(e)(t.map(iE))}const tr={test:sE,parse:Av,createTransformer:Mv,getAnimatableNone:oE},Lv=(e,t)=>n=>`${n>0?t:e}`;function Ov(e,t){return typeof e=="number"?n=>ye(e,t,n):Qe.test(e)?Tv(e,t):e.startsWith("var(")?Lv(e,t):$v(e,t)}const Dv=(e,t)=>{const n=[...e],r=n.length,s=e.map((i,o)=>Ov(i,t[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},aE=(e,t)=>{const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=Ov(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},$v=(e,t)=>{const n=tr.createTransformer(t),r=Va(e),s=Va(t);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?Qn(Dv(r.values,s.values),n):Lv(e,t)},eo=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},tp=(e,t)=>n=>ye(e,t,n);function lE(e){return typeof e=="number"?tp:typeof e=="string"?Qe.test(e)?Tv:$v:Array.isArray(e)?Dv:typeof e=="object"?aE:tp}function cE(e,t,n){const r=[],s=n||lE(e[0]),i=e.length-1;for(let o=0;o<i;o++){let l=s(e[o],e[o+1]);if(t){const a=Array.isArray(t)?t[o]||Ee:t;l=Qn(a,l)}r.push(l)}return r}function Uv(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(ih(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=cE(t,r,s),l=o.length,a=c=>{let u=0;if(l>1)for(;u<e.length-2&&!(c<e[u+1]);u++);const h=eo(e[u],e[u+1],c);return o[u](h)};return n?c=>a(er(e[0],e[i-1],c)):a}function uE(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=eo(0,t,r);e.push(ye(n,1,s))}}function dE(e){const t=[0];return uE(t,e.length-1),t}function hE(e,t){return e.map(n=>n*t)}function fE(e,t){return e.map(()=>t||_v).splice(0,e.length-1)}function Fa({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=K_(r)?r.map(Zf):Zf(r),i={done:!1,value:t[0]},o=hE(n&&n.length===t.length?n:dE(t),e),l=Uv(o,t,{ease:Array.isArray(s)?s:fE(t,s)});return{calculatedDuration:e,next:a=>(i.value=l(a),i.done=a>=e,i)}}function zv(e,t){return t?e*(1e3/t):0}const pE=5;function Vv(e,t,n){const r=Math.max(t-pE,0);return zv(n-e(r),t-r)}const pc=.001,mE=.01,np=10,gE=.05,vE=1;function yE({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let s,i;U_(e<=Yn(np));let o=1-t;o=er(gE,vE,o),e=er(mE,np,gn(e)),o<1?(s=c=>{const u=c*o,h=u*e,f=u-n,p=Cu(c,o),m=Math.exp(-h);return pc-f/p*m},i=c=>{const h=c*o*e,f=h*n+n,p=Math.pow(o,2)*Math.pow(c,2)*e,m=Math.exp(-h),v=Cu(Math.pow(c,2),o);return(-s(c)+pc>0?-1:1)*((f-p)*m)/v}):(s=c=>{const u=Math.exp(-c*e),h=(c-n)*e+1;return-pc+u*h},i=c=>{const u=Math.exp(-c*e),h=(n-c)*(e*e);return u*h});const l=5/e,a=wE(s,i,l);if(e=Yn(e),isNaN(a))return{stiffness:100,damping:10,duration:e};{const c=Math.pow(a,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:e}}}const xE=12;function wE(e,t,n){let r=n;for(let s=1;s<xE;s++)r=r-e(r)/t(r);return r}function Cu(e,t){return e*Math.sqrt(1-t*t)}const bE=["duration","bounce"],SE=["stiffness","damping","mass"];function rp(e,t){return t.some(n=>e[n]!==void 0)}function _E(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!rp(e,SE)&&rp(e,bE)){const n=yE(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function Fv({keyframes:e,restDelta:t,restSpeed:n,...r}){const s=e[0],i=e[e.length-1],o={done:!1,value:s},{stiffness:l,damping:a,mass:c,duration:u,velocity:h,isResolvedFromDuration:f}=_E({...r,velocity:-gn(r.velocity||0)}),p=h||0,m=a/(2*Math.sqrt(l*c)),v=i-s,b=gn(Math.sqrt(l/c)),y=Math.abs(v)<5;n||(n=y?.01:2),t||(t=y?.005:.5);let g;if(m<1){const x=Cu(b,m);g=S=>{const _=Math.exp(-m*b*S);return i-_*((p+m*b*v)/x*Math.sin(x*S)+v*Math.cos(x*S))}}else if(m===1)g=x=>i-Math.exp(-b*x)*(v+(p+b*v)*x);else{const x=b*Math.sqrt(m*m-1);g=S=>{const _=Math.exp(-m*b*S),j=Math.min(x*S,300);return i-_*((p+m*b*v)*Math.sinh(j)+x*v*Math.cosh(j))/x}}return{calculatedDuration:f&&u||null,next:x=>{const S=g(x);if(f)o.done=x>=u;else{let _=p;x!==0&&(m<1?_=Vv(g,x,S):_=0);const j=Math.abs(_)<=n,E=Math.abs(i-S)<=t;o.done=j&&E}return o.value=o.done?i:S,o}}}function sp({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:a,restDelta:c=.5,restSpeed:u}){const h=e[0],f={done:!1,value:h},p=C=>l!==void 0&&C<l||a!==void 0&&C>a,m=C=>l===void 0?a:a===void 0||Math.abs(l-C)<Math.abs(a-C)?l:a;let v=n*t;const b=h+v,y=o===void 0?b:o(b);y!==b&&(v=y-h);const g=C=>-v*Math.exp(-C/r),x=C=>y+g(C),S=C=>{const M=g(C),A=x(C);f.done=Math.abs(M)<=c,f.value=f.done?y:A};let _,j;const E=C=>{p(f.value)&&(_=C,j=Fv({keyframes:[f.value,m(f.value)],velocity:Vv(x,C,f.value),damping:s,stiffness:i,restDelta:c,restSpeed:u}))};return E(0),{calculatedDuration:null,next:C=>{let M=!1;return!j&&_===void 0&&(M=!0,S(C),E(C)),_!==void 0&&C>_?j.next(C-_):(!M&&S(C),f)}}}const EE=e=>{const t=({timestamp:n})=>e(n);return{start:()=>ue.update(t,!0),stop:()=>Sn(t),now:()=>He.isProcessing?He.timestamp:performance.now()}},ip=2e4;function op(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<ip;)t+=n,r=e.next(t);return t>=ip?1/0:t}const jE={decay:sp,inertia:sp,tween:Fa,keyframes:Fa,spring:Fv};function Ba({autoplay:e=!0,delay:t=0,driver:n=EE,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",onPlay:a,onStop:c,onComplete:u,onUpdate:h,...f}){let p=1,m=!1,v,b;const y=()=>{b=new Promise(I=>{v=I})};y();let g;const x=jE[s]||Fa;let S;x!==Fa&&typeof r[0]!="number"&&(S=Uv([0,100],r,{clamp:!1}),r=[0,100]);const _=x({...f,keyframes:r});let j;l==="mirror"&&(j=x({...f,keyframes:[...r].reverse(),velocity:-(f.velocity||0)}));let E="idle",C=null,M=null,A=null;_.calculatedDuration===null&&i&&(_.calculatedDuration=op(_));const{calculatedDuration:V}=_;let O=1/0,ae=1/0;V!==null&&(O=V+o,ae=O*(i+1)-o);let q=0;const U=I=>{if(M===null)return;p>0&&(M=Math.min(M,I)),p<0&&(M=Math.min(I-ae/p,M)),C!==null?q=C:q=Math.round(I-M)*p;const $=q-t*(p>=0?1:-1),H=p>=0?$<0:$>ae;q=Math.max($,0),E==="finished"&&C===null&&(q=ae);let te=q,Q=_;if(i){const Ke=Math.min(q,ae)/O;let Ne=Math.floor(Ke),ee=Ke%1;!ee&&Ke>=1&&(ee=1),ee===1&&Ne--,Ne=Math.min(Ne,i+1),!!(Ne%2)&&(l==="reverse"?(ee=1-ee,o&&(ee-=o/O)):l==="mirror"&&(Q=j)),te=er(0,1,ee)*O}const ne=H?{done:!1,value:r[0]}:Q.next(te);S&&(ne.value=S(ne.value));let{done:je}=ne;!H&&V!==null&&(je=p>=0?q>=ae:q<=0);const Mt=C===null&&(E==="finished"||E==="running"&&je);return h&&h(ne.value),Mt&&k(),ne},J=()=>{g&&g.stop(),g=void 0},T=()=>{E="idle",J(),v(),y(),M=A=null},k=()=>{E="finished",u&&u(),J(),v()},N=()=>{if(m)return;g||(g=n(U));const I=g.now();a&&a(),C!==null?M=I-C:(!M||E==="finished")&&(M=I),E==="finished"&&y(),A=M,C=null,E="running",g.start()};e&&N();const P={then(I,$){return b.then(I,$)},get time(){return gn(q)},set time(I){I=Yn(I),q=I,C!==null||!g||p===0?C=I:M=g.now()-I/p},get duration(){const I=_.calculatedDuration===null?op(_):_.calculatedDuration;return gn(I)},get speed(){return p},set speed(I){I===p||!g||(p=I,P.time=gn(q))},get state(){return E},play:N,pause:()=>{E="paused",C=q},stop:()=>{m=!0,E!=="idle"&&(E="idle",c&&c(),T())},cancel:()=>{A!==null&&U(A),T()},complete:()=>{E="finished"},sample:I=>(M=0,U(I))};return P}function kE(e){let t;return()=>(t===void 0&&(t=e()),t)}const CE=kE(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),PE=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Vo=10,TE=2e4,NE=(e,t)=>t.type==="spring"||e==="backgroundColor"||!xv(t.ease);function RE(e,t,{onUpdate:n,onComplete:r,...s}){if(!(CE()&&PE.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,l,a,c=!1;const u=()=>{a=new Promise(x=>{l=x})};u();let{keyframes:h,duration:f=300,ease:p,times:m}=s;if(NE(t,s)){const x=Ba({...s,repeat:0,delay:0});let S={done:!1,value:h[0]};const _=[];let j=0;for(;!S.done&&j<TE;)S=x.sample(j),_.push(S.value),j+=Vo;m=void 0,h=_,f=j-Vo,p="linear"}const v=V_(e.owner.current,t,h,{...s,duration:f,ease:p,times:m}),b=()=>{c=!1,v.cancel()},y=()=>{c=!0,ue.update(b),l(),u()};return v.onfinish=()=>{c||(e.set(F_(h,s)),r&&r(),y())},{then(x,S){return a.then(x,S)},attachTimeline(x){return v.timeline=x,v.onfinish=null,Ee},get time(){return gn(v.currentTime||0)},set time(x){v.currentTime=Yn(x)},get speed(){return v.playbackRate},set speed(x){v.playbackRate=x},get duration(){return gn(f)},play:()=>{o||(v.play(),Sn(b))},pause:()=>v.pause(),stop:()=>{if(o=!0,v.playState==="idle")return;const{currentTime:x}=v;if(x){const S=Ba({...s,autoplay:!1});e.setWithVelocity(S.sample(x-Vo).value,S.sample(x).value,Vo)}y()},complete:()=>{c||v.finish()},cancel:y}}function IE({keyframes:e,delay:t,onUpdate:n,onComplete:r}){const s=()=>(n&&n(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Ee,pause:Ee,stop:Ee,then:i=>(i(),Promise.resolve()),cancel:Ee,complete:Ee});return t?Ba({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const AE={type:"spring",stiffness:500,damping:25,restSpeed:10},ME=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),LE={type:"keyframes",duration:.8},OE={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},DE=(e,{keyframes:t})=>t.length>2?LE:Br.has(e)?e.startsWith("scale")?ME(t[1]):AE:OE,Pu=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(tr.test(t)||t==="0")&&!t.startsWith("url(")),$E=new Set(["brightness","contrast","saturate","opacity"]);function UE(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(vl)||[];if(!r)return e;const s=n.replace(r,"");let i=$E.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const zE=/([a-z-]*)\(.*?\)/g,Tu={...tr,getAnimatableNone:e=>{const t=e.match(zE);return t?t.map(UE).join(" "):e}},VE={...nv,color:Qe,backgroundColor:Qe,outlineColor:Qe,fill:Qe,stroke:Qe,borderColor:Qe,borderTopColor:Qe,borderRightColor:Qe,borderBottomColor:Qe,borderLeftColor:Qe,filter:Tu,WebkitFilter:Tu},ch=e=>VE[e];function Bv(e,t){let n=ch(e);return n!==Tu&&(n=tr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Wv=e=>/^0[^.\s]+$/.test(e);function FE(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||Wv(e)}function BE(e,t,n,r){const s=Pu(t,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:e.get();let l;const a=[];for(let c=0;c<i.length;c++)i[c]===null&&(i[c]=c===0?o:i[c-1]),FE(i[c])&&a.push(c),typeof i[c]=="string"&&i[c]!=="none"&&i[c]!=="0"&&(l=i[c]);if(s&&a.length&&l)for(let c=0;c<a.length;c++){const u=a[c];i[u]=Bv(t,l)}return i}function WE({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:l,from:a,elapsed:c,...u}){return!!Object.keys(u).length}function uh(e,t){return e[t]||e.default||e}const HE={skipAnimations:!1},dh=(e,t,n,r={})=>s=>{const i=uh(r,e)||{},o=i.delay||r.delay||0;let{elapsed:l=0}=r;l=l-Yn(o);const a=BE(t,e,n,i),c=a[0],u=a[a.length-1],h=Pu(e,c),f=Pu(e,u);let p={keyframes:a,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:m=>{t.set(m),i.onUpdate&&i.onUpdate(m)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(WE(i)||(p={...p,...DE(e,p)}),p.duration&&(p.duration=Yn(p.duration)),p.repeatDelay&&(p.repeatDelay=Yn(p.repeatDelay)),!h||!f||z_.current||i.type===!1||HE.skipAnimations)return IE(p);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const m=RE(t,e,p);if(m)return m}return Ba(p)};function Wa(e){return!!(ht(e)&&e.add)}const Hv=e=>/^\-?\d*\.?\d+$/.test(e);function hh(e,t){e.indexOf(t)===-1&&e.push(t)}function fh(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class ph{constructor(){this.subscriptions=[]}add(t){return hh(this.subscriptions,t),()=>fh(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const qE=e=>!isNaN(parseFloat(e));class GE{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=He;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,ue.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ue.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=qE(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new ph);const r=this.events[t].add(n);return t==="change"?()=>{r(),ue.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=t,this.timeDelta=r}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?zv(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function $s(e,t){return new GE(e,t)}const qv=e=>t=>t.test(e),KE={test:e=>e==="auto",parse:e=>e},Gv=[Wr,F,rn,Cn,t_,e_,KE],si=e=>Gv.find(qv(e)),JE=[...Gv,Qe,tr],QE=e=>JE.find(qv(e));function YE(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,$s(n))}function XE(e,t){const n=xl(e,t);let{transitionEnd:r={},transition:s={},...i}=n?e.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const l=m_(i[o]);YE(e,o,l)}}function ZE(e,t,n){var r,s;const i=Object.keys(t).filter(l=>!e.hasValue(l)),o=i.length;if(o)for(let l=0;l<o;l++){const a=i[l],c=t[a];let u=null;Array.isArray(c)&&(u=c[0]),u===null&&(u=(s=(r=n[a])!==null&&r!==void 0?r:e.readValue(a))!==null&&s!==void 0?s:t[a]),u!=null&&(typeof u=="string"&&(Hv(u)||Wv(u))?u=parseFloat(u):!QE(u)&&tr.test(c)&&(u=Bv(a,c)),e.addValue(a,$s(u,{owner:e})),n[a]===void 0&&(n[a]=u),u!==null&&e.setBaseTarget(a,u))}}function e2(e,t){return t?(t[e]||t.default||t).from:void 0}function t2(e,t,n){const r={};for(const s in e){const i=e2(s,t);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function n2({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function r2(e,t){const n=e.get();if(Array.isArray(t)){for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}else return n!==t}function Kv(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...l}=e.makeTargetAnimatable(t);const a=e.getValue("willChange");r&&(i=r);const c=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const h in l){const f=e.getValue(h),p=l[h];if(!f||p===void 0||u&&n2(u,h))continue;const m={delay:n,elapsed:0,...uh(i||{},h)};if(window.HandoffAppearAnimations){const y=e.getProps()[J0];if(y){const g=window.HandoffAppearAnimations(y,h,f,ue);g!==null&&(m.elapsed=g,m.isHandoff=!0)}}let v=!m.isHandoff&&!r2(f,p);if(m.type==="spring"&&(f.getVelocity()||m.velocity)&&(v=!1),f.animation&&(v=!1),v)continue;f.start(dh(h,f,p,e.shouldReduceMotion&&Br.has(h)?{type:!1}:m));const b=f.animation;Wa(a)&&(a.add(h),b.then(()=>a.remove(h))),c.push(b)}return o&&Promise.all(c).then(()=>{o&&XE(e,o)}),c}function Nu(e,t,n={}){const r=xl(e,t,n.custom);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(Kv(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(a=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:h}=s;return s2(e,t,c+a,u,h,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[a,c]=l==="beforeChildren"?[i,o]:[o,i];return a().then(()=>c())}else return Promise.all([i(),o(n.delay)])}function s2(e,t,n=0,r=0,s=1,i){const o=[],l=(e.variantChildren.size-1)*r,a=s===1?(c=0)=>c*r:(c=0)=>l-c*r;return Array.from(e.variantChildren).sort(i2).forEach((c,u)=>{c.notify("AnimationStart",t),o.push(Nu(c,t,{...i,delay:n+a(u)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(o)}function i2(e,t){return e.sortNodePosition(t)}function o2(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>Nu(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=Nu(e,t,n);else{const s=typeof t=="function"?xl(e,t,n.custom):t;r=Promise.all(Kv(e,s,n))}return r.then(()=>e.notify("AnimationComplete",t))}const a2=[...Jd].reverse(),l2=Jd.length;function c2(e){return t=>Promise.all(t.map(({animation:n,options:r})=>o2(e,n,r)))}function u2(e){let t=c2(e);const n=h2();let r=!0;const s=(a,c)=>{const u=xl(e,c);if(u){const{transition:h,transitionEnd:f,...p}=u;a={...a,...p,...f}}return a};function i(a){t=a(e)}function o(a,c){const u=e.getProps(),h=e.getVariantContext(!0)||{},f=[],p=new Set;let m={},v=1/0;for(let y=0;y<l2;y++){const g=a2[y],x=n[g],S=u[g]!==void 0?u[g]:h[g],_=Xi(S),j=g===c?x.isActive:null;j===!1&&(v=y);let E=S===h[g]&&S!==u[g]&&_;if(E&&r&&e.manuallyAnimateOnMount&&(E=!1),x.protectedKeys={...m},!x.isActive&&j===null||!S&&!x.prevProp||ml(S)||typeof S=="boolean")continue;let M=d2(x.prevProp,S)||g===c&&x.isActive&&!E&&_||y>v&&_,A=!1;const V=Array.isArray(S)?S:[S];let O=V.reduce(s,{});j===!1&&(O={});const{prevResolvedValues:ae={}}=x,q={...ae,...O},U=J=>{M=!0,p.has(J)&&(A=!0,p.delete(J)),x.needsAnimating[J]=!0};for(const J in q){const T=O[J],k=ae[J];if(m.hasOwnProperty(J))continue;let N=!1;za(T)&&za(k)?N=!vv(T,k):N=T!==k,N?T!==void 0?U(J):p.add(J):T!==void 0&&p.has(J)?U(J):x.protectedKeys[J]=!0}x.prevProp=S,x.prevResolvedValues=O,x.isActive&&(m={...m,...O}),r&&e.blockInitialAnimation&&(M=!1),M&&(!E||A)&&f.push(...V.map(J=>({animation:J,options:{type:g,...a}})))}if(p.size){const y={};p.forEach(g=>{const x=e.getBaseTarget(g);x!==void 0&&(y[g]=x)}),f.push({animation:y})}let b=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(b=!1),r=!1,b?t(f):Promise.resolve()}function l(a,c,u){var h;if(n[a].isActive===c)return Promise.resolve();(h=e.variantChildren)===null||h===void 0||h.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(a,c)}),n[a].isActive=c;const f=o(u,a);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>n}}function d2(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!vv(t,e):!1}function hr(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function h2(){return{animate:hr(!0),whileInView:hr(),whileHover:hr(),whileTap:hr(),whileDrag:hr(),whileFocus:hr(),exit:hr()}}class f2 extends cr{constructor(t){super(t),t.animationState||(t.animationState=u2(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),ml(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let p2=0;class m2 extends cr{constructor(){super(...arguments),this.id=p2++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const g2={animation:{Feature:f2},exit:{Feature:m2}},ap=(e,t)=>Math.abs(e-t);function v2(e,t){const n=ap(e.x,t.x),r=ap(e.y,t.y);return Math.sqrt(n**2+r**2)}class Jv{constructor(t,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=gc(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=v2(h.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:m}=h,{timestamp:v}=He;this.history.push({...m,timestamp:v});const{onStart:b,onMove:y}=this.handlers;f||(b&&b(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=mc(f,this.transformPagePoint),ue.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:p,onSessionEnd:m,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=gc(h.type==="pointercancel"?this.lastMoveEventInfo:mc(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,b),m&&m(h,b)},!hv(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=yl(t),l=mc(o,this.transformPagePoint),{point:a}=l,{timestamp:c}=He;this.history=[{...a,timestamp:c}];const{onSessionStart:u}=n;u&&u(t,gc(l,this.history)),this.removeListeners=Qn(mn(this.contextWindow,"pointermove",this.handlePointerMove),mn(this.contextWindow,"pointerup",this.handlePointerUp),mn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Sn(this.updatePoint)}}function mc(e,t){return t?{point:t(e.point)}:e}function lp(e,t){return{x:e.x-t.x,y:e.y-t.y}}function gc({point:e},t){return{point:e,delta:lp(e,Qv(t)),offset:lp(e,y2(t)),velocity:x2(t,.1)}}function y2(e){return e[0]}function Qv(e){return e[e.length-1]}function x2(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=Qv(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>Yn(t)));)n--;if(!r)return{x:0,y:0};const i=gn(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function wt(e){return e.max-e.min}function Ru(e,t=0,n=.01){return Math.abs(e-t)<=n}function cp(e,t,n,r=.5){e.origin=r,e.originPoint=ye(t.min,t.max,e.origin),e.scale=wt(n)/wt(t),(Ru(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=ye(n.min,n.max,e.origin)-e.originPoint,(Ru(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Ci(e,t,n,r){cp(e.x,t.x,n.x,r?r.originX:void 0),cp(e.y,t.y,n.y,r?r.originY:void 0)}function up(e,t,n){e.min=n.min+t.min,e.max=e.min+wt(t)}function w2(e,t,n){up(e.x,t.x,n.x),up(e.y,t.y,n.y)}function dp(e,t,n){e.min=t.min-n.min,e.max=e.min+wt(t)}function Pi(e,t,n){dp(e.x,t.x,n.x),dp(e.y,t.y,n.y)}function b2(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?ye(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?ye(n,e,r.max):Math.min(e,n)),e}function hp(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function S2(e,{top:t,left:n,bottom:r,right:s}){return{x:hp(e.x,n,s),y:hp(e.y,t,r)}}function fp(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function _2(e,t){return{x:fp(e.x,t.x),y:fp(e.y,t.y)}}function E2(e,t){let n=.5;const r=wt(e),s=wt(t);return s>r?n=eo(t.min,t.max-r,e.min):r>s&&(n=eo(e.min,e.max-s,t.min)),er(0,1,n)}function j2(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Iu=.35;function k2(e=Iu){return e===!1?e=0:e===!0&&(e=Iu),{x:pp(e,"left","right"),y:pp(e,"top","bottom")}}function pp(e,t,n){return{min:mp(e,t),max:mp(e,n)}}function mp(e,t){return typeof e=="number"?e:e[t]||0}const gp=()=>({translate:0,scale:1,origin:0,originPoint:0}),ws=()=>({x:gp(),y:gp()}),vp=()=>({min:0,max:0}),Pe=()=>({x:vp(),y:vp()});function kt(e){return[e("x"),e("y")]}function Yv({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function C2({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function P2(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function vc(e){return e===void 0||e===1}function Au({scale:e,scaleX:t,scaleY:n}){return!vc(e)||!vc(t)||!vc(n)}function xr(e){return Au(e)||Xv(e)||e.z||e.rotate||e.rotateX||e.rotateY}function Xv(e){return yp(e.x)||yp(e.y)}function yp(e){return e&&e!=="0%"}function Ha(e,t,n){const r=e-n,s=t*r;return n+s}function xp(e,t,n,r,s){return s!==void 0&&(e=Ha(e,s,r)),Ha(e,n,r)+t}function Mu(e,t=0,n=1,r,s){e.min=xp(e.min,t,n,r,s),e.max=xp(e.max,t,n,r,s)}function Zv(e,{x:t,y:n}){Mu(e.x,t.translate,t.scale,t.originPoint),Mu(e.y,n.translate,n.scale,n.originPoint)}function T2(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,o;for(let l=0;l<s;l++){i=n[l],o=i.projectionDelta;const a=i.instance;a&&a.style&&a.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&bs(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Zv(e,o)),r&&xr(i.latestValues)&&bs(e,i.latestValues))}t.x=wp(t.x),t.y=wp(t.y)}function wp(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function In(e,t){e.min=e.min+t,e.max=e.max+t}function bp(e,t,[n,r,s]){const i=t[s]!==void 0?t[s]:.5,o=ye(e.min,e.max,i);Mu(e,t[n],t[r],o,t.scale)}const N2=["x","scaleX","originX"],R2=["y","scaleY","originY"];function bs(e,t){bp(e.x,t,N2),bp(e.y,t,R2)}function ey(e,t){return Yv(P2(e.getBoundingClientRect(),t))}function I2(e,t,n){const r=ey(e,n),{scroll:s}=t;return s&&(In(r.x,s.offset.x),In(r.y,s.offset.y)),r}const ty=({current:e})=>e?e.ownerDocument.defaultView:null,A2=new WeakMap;class M2{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Pe(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(yl(u,"page").point)},i=(u,h)=>{const{drag:f,dragPropagation:p,onDragStart:m}=this.getProps();if(f&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=pv(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),kt(b=>{let y=this.getAxisMotionValue(b).get()||0;if(rn.test(y)){const{projection:g}=this.visualElement;if(g&&g.layout){const x=g.layout.layoutBox[b];x&&(y=wt(x)*(parseFloat(y)/100))}}this.originPoint[b]=y}),m&&ue.update(()=>m(u,h),!1,!0);const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:m,onDrag:v}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:b}=h;if(p&&this.currentDirection===null){this.currentDirection=L2(b),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",h.point,b),this.updateAxis("y",h.point,b),this.visualElement.render(),v&&v(u,h)},l=(u,h)=>this.stop(u,h),a=()=>kt(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Jv(t,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:a},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:ty(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&ue.update(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!Fo(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=b2(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;n&&ys(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=S2(s.layoutBox,n):this.constraints=!1,this.elastic=k2(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&kt(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=j2(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!ys(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=I2(r,s.root,this.visualElement.getTransformPagePoint());let o=_2(s.layout.layoutBox,i);if(n){const l=n(C2(o));this.hasMutatedConstraints=!!l,l&&(o=Yv(l))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),a=this.constraints||{},c=kt(u=>{if(!Fo(u,n,this.currentDirection))return;let h=a&&a[u]||{};o&&(h={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,m={type:"inertia",velocity:r?t[u]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,m)});return Promise.all(c).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(dh(t,r,0,n))}stopAnimation(){kt(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){kt(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){kt(n=>{const{drag:r}=this.getProps();if(!Fo(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:l}=s.layout.layoutBox[n];i.set(t[n]-ye(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ys(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};kt(o=>{const l=this.getAxisMotionValue(o);if(l){const a=l.get();s[o]=E2({min:a,max:a},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),kt(o=>{if(!Fo(o,t,null))return;const l=this.getAxisMotionValue(o),{min:a,max:c}=this.constraints[o];l.set(ye(a,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;A2.set(this.visualElement,this);const t=this.visualElement.current,n=mn(t,"pointerdown",a=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(a)}),r=()=>{const{dragConstraints:a}=this.getProps();ys(a)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=hn(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:a,hasLayoutChanged:c})=>{this.isDragging&&c&&(kt(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=a[u].translate,h.set(h.get()+a[u].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Iu,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function Fo(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function L2(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class O2 extends cr{constructor(t){super(t),this.removeGroupControls=Ee,this.removeListeners=Ee,this.controls=new M2(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ee}unmount(){this.removeGroupControls(),this.removeListeners()}}const Sp=e=>(t,n)=>{e&&ue.update(()=>e(t,n))};class D2 extends cr{constructor(){super(...arguments),this.removePointerDownListener=Ee}onPointerDown(t){this.session=new Jv(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ty(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Sp(t),onStart:Sp(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&ue.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=mn(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function $2(){const e=w.useContext(fl);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,s=w.useId();return w.useEffect(()=>r(s),[]),!t&&n?[!1,()=>n&&n(s)]:[!0]}const ua={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function _p(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ii={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(F.test(e))e=parseFloat(e);else return e;const n=_p(e,t.target.x),r=_p(e,t.target.y);return`${n}% ${r}%`}},U2={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=tr.parse(e);if(s.length>5)return r;const i=tr.createTransformer(e),o=typeof s[0]!="number"?1:0,l=n.x.scale*t.x,a=n.y.scale*t.y;s[0+o]/=l,s[1+o]/=a;const c=ye(l,a,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class z2 extends pe.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;GS(V2),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),ua.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||ue.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function ny(e){const[t,n]=$2(),r=w.useContext(Yd);return pe.createElement(z2,{...e,layoutGroup:r,switchLayoutGroup:w.useContext(Y0),isPresent:t,safeToRemove:n})}const V2={borderRadius:{...ii,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ii,borderTopRightRadius:ii,borderBottomLeftRadius:ii,borderBottomRightRadius:ii,boxShadow:U2},ry=["TopLeft","TopRight","BottomLeft","BottomRight"],F2=ry.length,Ep=e=>typeof e=="string"?parseFloat(e):e,jp=e=>typeof e=="number"||F.test(e);function B2(e,t,n,r,s,i){s?(e.opacity=ye(0,n.opacity!==void 0?n.opacity:1,W2(r)),e.opacityExit=ye(t.opacity!==void 0?t.opacity:1,0,H2(r))):i&&(e.opacity=ye(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<F2;o++){const l=`border${ry[o]}Radius`;let a=kp(t,l),c=kp(n,l);if(a===void 0&&c===void 0)continue;a||(a=0),c||(c=0),a===0||c===0||jp(a)===jp(c)?(e[l]=Math.max(ye(Ep(a),Ep(c),r),0),(rn.test(c)||rn.test(a))&&(e[l]+="%")):e[l]=c}(t.rotate||n.rotate)&&(e.rotate=ye(t.rotate||0,n.rotate||0,r))}function kp(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const W2=sy(0,.5,kv),H2=sy(.5,.95,Ee);function sy(e,t,n){return r=>r<e?0:r>t?1:n(eo(e,t,r))}function Cp(e,t){e.min=t.min,e.max=t.max}function _t(e,t){Cp(e.x,t.x),Cp(e.y,t.y)}function Pp(e,t,n,r,s){return e-=t,e=Ha(e,1/n,r),s!==void 0&&(e=Ha(e,1/s,r)),e}function q2(e,t=0,n=1,r=.5,s,i=e,o=e){if(rn.test(t)&&(t=parseFloat(t),t=ye(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=ye(i.min,i.max,r);e===i&&(l-=t),e.min=Pp(e.min,t,n,l,s),e.max=Pp(e.max,t,n,l,s)}function Tp(e,t,[n,r,s],i,o){q2(e,t[n],t[r],t[s],t.scale,i,o)}const G2=["x","scaleX","originX"],K2=["y","scaleY","originY"];function Np(e,t,n,r){Tp(e.x,t,G2,n?n.x:void 0,r?r.x:void 0),Tp(e.y,t,K2,n?n.y:void 0,r?r.y:void 0)}function Rp(e){return e.translate===0&&e.scale===1}function iy(e){return Rp(e.x)&&Rp(e.y)}function J2(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function oy(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Ip(e){return wt(e.x)/wt(e.y)}class Q2{constructor(){this.members=[]}add(t){hh(this.members,t),t.scheduleRender()}remove(t){if(fh(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Ap(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:a,rotateX:c,rotateY:u}=n;a&&(r+=`rotate(${a}deg) `),c&&(r+=`rotateX(${c}deg) `),u&&(r+=`rotateY(${u}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const Y2=(e,t)=>e.depth-t.depth;class X2{constructor(){this.children=[],this.isDirty=!1}add(t){hh(this.children,t),this.isDirty=!0}remove(t){fh(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Y2),this.isDirty=!1,this.children.forEach(t)}}function Z2(e,t){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(Sn(r),e(i-t))};return ue.read(r,!0),()=>Sn(r)}function ej(e){window.MotionDebug&&window.MotionDebug.record(e)}function tj(e){return e instanceof SVGElement&&e.tagName!=="svg"}function nj(e,t,n){const r=ht(e)?e:$s(e);return r.start(dh("",r,t,n)),r.animation}const Mp=["","X","Y","Z"],rj={visibility:"hidden"},Lp=1e3;let sj=0;const wr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function ay({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},l=t==null?void 0:t()){this.id=sj++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,wr.totalNodes=wr.resolvedTargetDeltas=wr.recalculatedProjection=0,this.nodes.forEach(aj),this.nodes.forEach(hj),this.nodes.forEach(fj),this.nodes.forEach(lj),ej(wr)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new X2)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new ph),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const a=this.eventHandlers.get(o);a&&a.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=tj(o),this.instance=o;const{layoutId:a,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(c||a)&&(this.isLayoutDirty=!0),e){let h;const f=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=Z2(f,250),ua.hasAnimatedSinceResize&&(ua.hasAnimatedSinceResize=!1,this.nodes.forEach(Dp))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||yj,{onLayoutAnimationStart:b,onLayoutAnimationComplete:y}=u.getProps(),g=!this.targetLayout||!oy(this.targetLayout,m)||p,x=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||f&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,x);const S={...uh(v,"layout"),onPlay:b,onComplete:y};(u.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else f||Dp(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Sn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(pj),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:a}=this.options;if(l===void 0&&!a)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Op);return}this.isUpdating||this.nodes.forEach(uj),this.isUpdating=!1,this.nodes.forEach(dj),this.nodes.forEach(ij),this.nodes.forEach(oj),this.clearAllSnapshots();const l=performance.now();He.delta=er(0,1e3/60,l-He.timestamp),He.timestamp=l,He.isProcessing=!0,ac.update.process(He),ac.preRender.process(He),ac.render.process(He),He.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(cj),this.sharedNodes.forEach(mj)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ue.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ue.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let a=0;a<this.path.length;a++)this.path[a].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Pe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!iy(this.projectionDelta),a=this.getTransformTemplate(),c=a?a(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(l||xr(this.latestValues)||u)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let a=this.removeElementScroll(l);return o&&(a=this.removeTransform(a)),xj(a),{animationId:this.root.animationId,measuredBox:l,layoutBox:a,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Pe();const l=o.measureViewportBox(),{scroll:a}=this.root;return a&&(In(l.x,a.offset.x),In(l.y,a.offset.y)),l}removeElementScroll(o){const l=Pe();_t(l,o);for(let a=0;a<this.path.length;a++){const c=this.path[a],{scroll:u,options:h}=c;if(c!==this.root&&u&&h.layoutScroll){if(u.isRoot){_t(l,o);const{scroll:f}=this.root;f&&(In(l.x,-f.offset.x),In(l.y,-f.offset.y))}In(l.x,u.offset.x),In(l.y,u.offset.y)}}return l}applyTransform(o,l=!1){const a=Pe();_t(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&bs(a,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),xr(u.latestValues)&&bs(a,u.latestValues)}return xr(this.latestValues)&&bs(a,this.latestValues),a}removeTransform(o){const l=Pe();_t(l,o);for(let a=0;a<this.path.length;a++){const c=this.path[a];if(!c.instance||!xr(c.latestValues))continue;Au(c.latestValues)&&c.updateSnapshot();const u=Pe(),h=c.measurePageBox();_t(u,h),Np(l,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return xr(this.latestValues)&&Np(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==He.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==a;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=He.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pe(),this.relativeTargetOrigin=Pe(),Pi(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),_t(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Pe(),this.targetWithTransforms=Pe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),w2(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):_t(this.target,this.layout.layoutBox),Zv(this.target,this.targetDelta)):_t(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pe(),this.relativeTargetOrigin=Pe(),Pi(this.relativeTargetOrigin,this.target,p.target),_t(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}wr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Au(this.parent.latestValues)||Xv(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),a=!!this.resumingFrom||this!==l;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===He.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;_t(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;T2(this.layoutCorrected,this.treeScale,this.path,a),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:m}=l;if(!m){this.projectionTransform&&(this.projectionDelta=ws(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=ws(),this.projectionDeltaWithTransform=ws());const v=this.projectionTransform;Ci(this.projectionDelta,this.layoutCorrected,m,this.latestValues),this.projectionTransform=Ap(this.projectionDelta,this.treeScale),(this.projectionTransform!==v||this.treeScale.x!==f||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m)),wr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const a=this.snapshot,c=a?a.latestValues:{},u={...this.latestValues},h=ws();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=Pe(),p=a?a.source:void 0,m=this.layout?this.layout.source:void 0,v=p!==m,b=this.getStack(),y=!b||b.members.length<=1,g=!!(v&&!y&&this.options.crossfade===!0&&!this.path.some(vj));this.animationProgress=0;let x;this.mixTargetDelta=S=>{const _=S/1e3;$p(h.x,o.x,_),$p(h.y,o.y,_),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Pi(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),gj(this.relativeTarget,this.relativeTargetOrigin,f,_),x&&J2(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=Pe()),_t(x,this.relativeTarget)),v&&(this.animationValues=u,B2(u,c,this.latestValues,_,g,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Sn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ue.update(()=>{ua.hasAnimatedSinceResize=!0,this.currentAnimation=nj(0,Lp,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Lp),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:a,layout:c,latestValues:u}=o;if(!(!l||!a||!c)){if(this!==o&&this.layout&&c&&ly(this.options.animationType,this.layout.layoutBox,c.layoutBox)){a=this.target||Pe();const h=wt(this.layout.layoutBox.x);a.x.min=o.target.x.min,a.x.max=a.x.min+h;const f=wt(this.layout.layoutBox.y);a.y.min=o.target.y.min,a.y.max=a.y.min+f}_t(l,a),bs(l,u),Ci(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Q2),this.sharedNodes.get(o).add(l);const c=l.options.initialPromotionConfig;l.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:a}={}){const c=this.getStack();c&&c.promote(this,a),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:a}=o;if((a.rotate||a.rotateX||a.rotateY||a.rotateZ)&&(l=!0),!l)return;const c={};for(let u=0;u<Mp.length;u++){const h="rotate"+Mp[u];a[h]&&(c[h]=a[h],o.setStaticValue(h,0))}o.render();for(const u in c)o.setStaticValue(u,c[u]);o.scheduleRender()}getProjectionStyles(o){var l,a;if(!this.instance||this.isSVG)return;if(!this.isVisible)return rj;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=ca(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=ca(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!xr(this.latestValues)&&(v.transform=u?u({},""):"none",this.hasProjected=!1),v}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=Ap(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:p,y:m}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${m.origin*100}% 0`,h.animationValues?c.opacity=h===this?(a=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&a!==void 0?a:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const v in $a){if(f[v]===void 0)continue;const{correct:b,applyTo:y}=$a[v],g=c.transform==="none"?f[v]:b(f[v],h);if(y){const x=y.length;for(let S=0;S<x;S++)c[y[S]]=g}else c[v]=g}return this.options.layoutId&&(c.pointerEvents=h===this?ca(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(Op),this.root.sharedNodes.clear()}}}function ij(e){e.updateLayout()}function oj(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,o=n.source!==e.layout.source;i==="size"?kt(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],p=wt(f);f.min=r[h].min,f.max=f.min+p}):ly(i,n.layoutBox,r)&&kt(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],p=wt(r[h]);f.max=f.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+p)});const l=ws();Ci(l,r,n.layoutBox);const a=ws();o?Ci(a,e.applyTransform(s,!0),n.measuredBox):Ci(a,r,n.layoutBox);const c=!iy(l);let u=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const m=Pe();Pi(m,n.layoutBox,f.layoutBox);const v=Pe();Pi(v,r,p.layoutBox),oy(m,v)||(u=!0),h.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=m,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:a,layoutDelta:l,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function aj(e){wr.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function lj(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function cj(e){e.clearSnapshot()}function Op(e){e.clearMeasurements()}function uj(e){e.isLayoutDirty=!1}function dj(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Dp(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function hj(e){e.resolveTargetDelta()}function fj(e){e.calcProjection()}function pj(e){e.resetRotation()}function mj(e){e.removeLeadSnapshot()}function $p(e,t,n){e.translate=ye(t.translate,0,n),e.scale=ye(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Up(e,t,n,r){e.min=ye(t.min,n.min,r),e.max=ye(t.max,n.max,r)}function gj(e,t,n,r){Up(e.x,t.x,n.x,r),Up(e.y,t.y,n.y,r)}function vj(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const yj={duration:.45,ease:[.4,0,.1,1]},zp=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),Vp=zp("applewebkit/")&&!zp("chrome/")?Math.round:Ee;function Fp(e){e.min=Vp(e.min),e.max=Vp(e.max)}function xj(e){Fp(e.x),Fp(e.y)}function ly(e,t,n){return e==="position"||e==="preserve-aspect"&&!Ru(Ip(t),Ip(n),.2)}const wj=ay({attachResizeListener:(e,t)=>hn(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),yc={current:void 0},cy=ay({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!yc.current){const e=new wj({});e.mount(window),e.setOptions({layoutScroll:!0}),yc.current=e}return yc.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),bj={pan:{Feature:D2},drag:{Feature:O2,ProjectionNode:cy,MeasureLayout:ny}},Sj=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function _j(e){const t=Sj.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}function Lu(e,t,n=1){const[r,s]=_j(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return Hv(o)?parseFloat(o):o}else return Eu(s)?Lu(s,t,n+1):s}function Ej(e,{...t},n){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(s=>{const i=s.get();if(!Eu(i))return;const o=Lu(i,r);o&&s.set(o)});for(const s in t){const i=t[s];if(!Eu(i))continue;const o=Lu(i,r);o&&(t[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:t,transitionEnd:n}}const jj=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),uy=e=>jj.has(e),kj=e=>Object.keys(e).some(uy),Bp=e=>e===Wr||e===F,Wp=(e,t)=>parseFloat(e.split(", ")[t]),Hp=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return Wp(s[1],t);{const i=r.match(/^matrix\((.+)\)$/);return i?Wp(i[1],e):0}},Cj=new Set(["x","y","z"]),Pj=uo.filter(e=>!Cj.has(e));function Tj(e){const t=[];return Pj.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Us={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Hp(4,13),y:Hp(5,14)};Us.translateX=Us.x;Us.translateY=Us.y;const Nj=(e,t,n)=>{const r=t.measureViewportBox(),s=t.current,i=getComputedStyle(s),{display:o}=i,l={};o==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(c=>{l[c]=Us[c](r,i)}),t.render();const a=t.measureViewportBox();return n.forEach(c=>{const u=t.getValue(c);u&&u.jump(l[c]),e[c]=Us[c](a,i)}),e},Rj=(e,t,n={},r={})=>{t={...t},r={...r};const s=Object.keys(t).filter(uy);let i=[],o=!1;const l=[];if(s.forEach(a=>{const c=e.getValue(a);if(!e.hasValue(a))return;let u=n[a],h=si(u);const f=t[a];let p;if(za(f)){const m=f.length,v=f[0]===null?1:0;u=f[v],h=si(u);for(let b=v;b<m&&f[b]!==null;b++)p?ih(si(f[b])===p):p=si(f[b])}else p=si(f);if(h!==p)if(Bp(h)&&Bp(p)){const m=c.get();typeof m=="string"&&c.set(parseFloat(m)),typeof f=="string"?t[a]=parseFloat(f):Array.isArray(f)&&p===F&&(t[a]=f.map(parseFloat))}else h!=null&&h.transform&&(p!=null&&p.transform)&&(u===0||f===0)?u===0?c.set(p.transform(u)):t[a]=h.transform(f):(o||(i=Tj(e),o=!0),l.push(a),r[a]=r[a]!==void 0?r[a]:t[a],c.jump(f))}),l.length){const a=l.indexOf("height")>=0?window.pageYOffset:null,c=Nj(t,e,l);return i.length&&i.forEach(([u,h])=>{e.getValue(u).set(h)}),e.render(),pl&&a!==null&&window.scrollTo({top:a}),{target:c,transitionEnd:r}}else return{target:t,transitionEnd:r}};function Ij(e,t,n,r){return kj(t)?Rj(e,t,n,r):{target:t,transitionEnd:r}}const Aj=(e,t,n,r)=>{const s=Ej(e,t,r);return t=s.target,r=s.transitionEnd,Ij(e,t,n,r)},Ou={current:null},dy={current:!1};function Mj(){if(dy.current=!0,!!pl)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Ou.current=e.matches;e.addListener(t),t()}else Ou.current=!1}function Lj(e,t,n){const{willChange:r}=t;for(const s in t){const i=t[s],o=n[s];if(ht(i))e.addValue(s,i),Wa(r)&&r.add(s);else if(ht(o))e.addValue(s,$s(i,{owner:e})),Wa(r)&&r.remove(s);else if(o!==i)if(e.hasValue(s)){const l=e.getValue(s);!l.hasAnimated&&l.set(i)}else{const l=e.getStaticValue(s);e.addValue(s,$s(l!==void 0?l:i,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const qp=new WeakMap,hy=Object.keys(Zi),Oj=hy.length,Gp=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Dj=Qd.length;class $j{constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ue.render(this.render,!1,!0);const{latestValues:l,renderState:a}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=a,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=gl(n),this.isVariantNode=Q0(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(n,{});for(const h in u){const f=u[h];l[h]!==void 0&&ht(f)&&(f.set(l[h],!1),Wa(c)&&c.add(h))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,qp.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),dy.current||Mj(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ou.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){qp.delete(this.current),this.projection&&this.projection.unmount(),Sn(this.notifyUpdate),Sn(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const r=Br.has(t),s=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&ue.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},r,s,i){let o,l;for(let a=0;a<Oj;a++){const c=hy[a],{isEnabled:u,Feature:h,ProjectionNode:f,MeasureLayout:p}=Zi[c];f&&(o=f),u(n)&&(!this.features[c]&&h&&(this.features[c]=new h(this)),p&&(l=p))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:a,layout:c,drag:u,dragConstraints:h,layoutScroll:f,layoutRoot:p}=n;this.projection.setOptions({layoutId:a,layout:c,alwaysMeasureLayout:!!u||h&&ys(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:p})}return l}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Pe()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Gp.length;r++){const s=Gp[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=t["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=Lj(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<Dj;r++){const s=Qd[r],i=this.props[s];(Xi(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=$s(n,{owner:this}),this.addValue(t,r)),r}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=sh(this.props,r))===null||n===void 0?void 0:n[t]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!ht(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new ph),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class fy extends $j{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...r},{transformValues:s},i){let o=t2(r,t||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){ZE(this,r,o);const l=Aj(this,r,o,n);n=l.transitionEnd,r=l.target}return{transition:t,transitionEnd:n,...r}}}function Uj(e){return window.getComputedStyle(e)}class zj extends fy{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(Br.has(n)){const r=ch(n);return r&&r.default||0}else{const r=Uj(t),s=(ev(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return ey(t,n)}build(t,n,r,s){Zd(t,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(t,n){return rh(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ht(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,r,s){ov(t,n,r,s)}}class Vj extends fy{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Br.has(n)){const r=ch(n);return r&&r.default||0}return n=av.has(n)?n:Kd(n),t.getAttribute(n)}measureInstanceViewportBox(){return Pe()}scrapeMotionValuesFromProps(t,n){return cv(t,n)}build(t,n,r,s){th(t,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,r,s){lv(t,n,r,s)}mount(t){this.isSVGTag=nh(t.tagName),super.mount(t)}}const Fj=(e,t)=>Xd(e)?new Vj(t,{enableHardwareAcceleration:!1}):new zj(t,{enableHardwareAcceleration:!0}),Bj={layout:{ProjectionNode:cy,MeasureLayout:ny}},Wj={...g2,...O_,...bj,...Bj},Bt=HS((e,t)=>__(e,t,Wj,Fj));function py(){const e=w.useRef(!1);return Gd(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Hj(){const e=py(),[t,n]=w.useState(0),r=w.useCallback(()=>{e.current&&n(t+1)},[t]);return[w.useCallback(()=>ue.postRender(r),[r]),t]}class qj extends w.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Gj({children:e,isPresent:t}){const n=w.useId(),r=w.useRef(null),s=w.useRef({width:0,height:0,top:0,left:0});return w.useInsertionEffect(()=>{const{width:i,height:o,top:l,left:a}=s.current;if(t||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${a}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[t]),w.createElement(qj,{isPresent:t,childRef:r,sizeRef:s},w.cloneElement(e,{ref:r}))}const xc=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const l=uv(Kj),a=w.useId(),c=w.useMemo(()=>({id:a,initial:t,isPresent:n,custom:s,onExitComplete:u=>{l.set(u,!0);for(const h of l.values())if(!h)return;r&&r()},register:u=>(l.set(u,!1),()=>l.delete(u))}),i?void 0:[n]);return w.useMemo(()=>{l.forEach((u,h)=>l.set(h,!1))},[n]),w.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),o==="popLayout"&&(e=w.createElement(Gj,{isPresent:n},e)),w.createElement(fl.Provider,{value:c},e)};function Kj(){return new Map}function Jj(e){return w.useEffect(()=>()=>e(),[])}const br=e=>e.key||"";function Qj(e,t){e.forEach(n=>{const r=br(n);t.set(r,n)})}function Yj(e){const t=[];return w.Children.forEach(e,n=>{w.isValidElement(n)&&t.push(n)}),t}const my=({children:e,custom:t,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const l=w.useContext(Yd).forceRender||Hj()[0],a=py(),c=Yj(e);let u=c;const h=w.useRef(new Map).current,f=w.useRef(u),p=w.useRef(new Map).current,m=w.useRef(!0);if(Gd(()=>{m.current=!1,Qj(c,p),f.current=u}),Jj(()=>{m.current=!0,p.clear(),h.clear()}),m.current)return w.createElement(w.Fragment,null,u.map(g=>w.createElement(xc,{key:br(g),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},g)));u=[...u];const v=f.current.map(br),b=c.map(br),y=v.length;for(let g=0;g<y;g++){const x=v[g];b.indexOf(x)===-1&&!h.has(x)&&h.set(x,void 0)}return o==="wait"&&h.size&&(u=[]),h.forEach((g,x)=>{if(b.indexOf(x)!==-1)return;const S=p.get(x);if(!S)return;const _=v.indexOf(x);let j=g;if(!j){const E=()=>{h.delete(x);const C=Array.from(p.keys()).filter(M=>!b.includes(M));if(C.forEach(M=>p.delete(M)),f.current=c.filter(M=>{const A=br(M);return A===x||C.includes(A)}),!h.size){if(a.current===!1)return;l(),r&&r()}};j=w.createElement(xc,{key:br(S),isPresent:!1,onExitComplete:E,custom:t,presenceAffectsLayout:i,mode:o},S),h.set(x,j)}u.splice(_,0,j)}),u=u.map(g=>{const x=g.key;return h.has(x)?g:w.createElement(xc,{key:br(g),isPresent:!0,presenceAffectsLayout:i,mode:o},g)}),w.createElement(w.Fragment,null,h.size?u:u.map(g=>w.cloneElement(g)))};/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Zj=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),Kp=e=>{const t=Zj(e);return t.charAt(0).toUpperCase()+t.slice(1)},gy=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ek={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=w.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},a)=>w.createElement("svg",{ref:a,...ek,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:gy("lucide",s),...l},[...o.map(([c,u])=>w.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=(e,t)=>{const n=w.forwardRef(({className:r,...s},i)=>w.createElement(tk,{ref:i,iconNode:t,className:gy(`lucide-${Xj(Kp(e))}`,`lucide-${e}`,r),...s}));return n.displayName=Kp(e),n};/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],rk=be("arrow-left",nk);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ik=be("calendar",sk);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Ss=be("camera",ok);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],lk=be("chevron-down",ak);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],mh=be("circle-alert",ck);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],vy=be("circle-check-big",uk);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Ti=be("download",dk);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],fk=be("grid-3x3",hk);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],yy=be("image",pk);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],mo=be("loader-circle",mk);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],xy=be("lock",gk);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],wy=be("log-out",vk);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],wl=be("mail",yk);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=[["path",{d:"M5 12h14",key:"1ays0h"}]],wk=be("minus",xk);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],by=be("plus",bk);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],bl=be("printer",Sk);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Sy=be("qr-code",_k);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],jk=be("send",Ek);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],gh=be("settings",kk);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Pk=be("share-2",Ck);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tk=[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]],Jp=be("tv",Tk);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Rk=be("wand-sparkles",Nk);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ik=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Dr=be("x",Ik),Qp=e=>{let t;const n=new Set,r=(u,h)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const p=t;t=h??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(m=>m(t,p))}},s=()=>t,a={setState:r,getState:s,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{n.clear()}},c=t=e(r,s,a);return a},Ak=e=>e?Qp(e):Qp;var _y={exports:{}},Ey={},jy={exports:{}},ky={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zs=w;function Mk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Lk=typeof Object.is=="function"?Object.is:Mk,Ok=zs.useState,Dk=zs.useEffect,$k=zs.useLayoutEffect,Uk=zs.useDebugValue;function zk(e,t){var n=t(),r=Ok({inst:{value:n,getSnapshot:t}}),s=r[0].inst,i=r[1];return $k(function(){s.value=n,s.getSnapshot=t,wc(s)&&i({inst:s})},[e,n,t]),Dk(function(){return wc(s)&&i({inst:s}),e(function(){wc(s)&&i({inst:s})})},[e]),Uk(n),n}function wc(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Lk(e,n)}catch{return!0}}function Vk(e,t){return t()}var Fk=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Vk:zk;ky.useSyncExternalStore=zs.useSyncExternalStore!==void 0?zs.useSyncExternalStore:Fk;jy.exports=ky;var Bk=jy.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sl=w,Wk=Bk;function Hk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qk=typeof Object.is=="function"?Object.is:Hk,Gk=Wk.useSyncExternalStore,Kk=Sl.useRef,Jk=Sl.useEffect,Qk=Sl.useMemo,Yk=Sl.useDebugValue;Ey.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var i=Kk(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Qk(function(){function a(p){if(!c){if(c=!0,u=p,p=r(p),s!==void 0&&o.hasValue){var m=o.value;if(s(m,p))return h=m}return h=p}if(m=h,qk(u,p))return m;var v=r(p);return s!==void 0&&s(m,v)?(u=p,m):(u=p,h=v)}var c=!1,u,h,f=n===void 0?null:n;return[function(){return a(t())},f===null?void 0:function(){return a(f())}]},[t,n,r,s]);var l=Gk(e,i[0],i[1]);return Jk(function(){o.hasValue=!0,o.value=l},[l]),Yk(l),l};_y.exports=Ey;var Xk=_y.exports;const Zk=Ku(Xk),{useDebugValue:eC}=pe,{useSyncExternalStoreWithSelector:tC}=Zk;const nC=e=>e;function rC(e,t=nC,n){const r=tC(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return eC(r),r}const Yp=e=>{const t=typeof e=="function"?Ak(e):e,n=(r,s)=>rC(t,r,s);return Object.assign(n,t),n},sC=e=>e?Yp(e):Yp;function iC(e,t){let n;try{n=e()}catch{return}return{getItem:s=>{var i;const o=a=>a===null?null:JSON.parse(a,t==null?void 0:t.reviver),l=(i=n.getItem(s))!=null?i:null;return l instanceof Promise?l.then(o):o(l)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,t==null?void 0:t.replacer)),removeItem:s=>n.removeItem(s)}}const to=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return to(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return to(r)(n)}}}},oC=(e,t)=>(n,r,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:b=>b,version:0,merge:(b,y)=>({...y,...b}),...t},o=!1;const l=new Set,a=new Set;let c;try{c=i.getStorage()}catch{}if(!c)return e((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...b)},r,s);const u=to(i.serialize),h=()=>{const b=i.partialize({...r()});let y;const g=u({state:b,version:i.version}).then(x=>c.setItem(i.name,x)).catch(x=>{y=x});if(y)throw y;return g},f=s.setState;s.setState=(b,y)=>{f(b,y),h()};const p=e((...b)=>{n(...b),h()},r,s);let m;const v=()=>{var b;if(!c)return;o=!1,l.forEach(g=>g(r()));const y=((b=i.onRehydrateStorage)==null?void 0:b.call(i,r()))||void 0;return to(c.getItem.bind(c))(i.name).then(g=>{if(g)return i.deserialize(g)}).then(g=>{if(g)if(typeof g.version=="number"&&g.version!==i.version){if(i.migrate)return i.migrate(g.state,g.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return g.state}).then(g=>{var x;return m=i.merge(g,(x=r())!=null?x:p),n(m,!0),h()}).then(()=>{y==null||y(m,void 0),o=!0,a.forEach(g=>g(m))}).catch(g=>{y==null||y(void 0,g)})};return s.persist={setOptions:b=>{i={...i,...b},b.getStorage&&(c=b.getStorage())},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:b=>(l.add(b),()=>{l.delete(b)}),onFinishHydration:b=>(a.add(b),()=>{a.delete(b)})},v(),m||p},aC=(e,t)=>(n,r,s)=>{let i={storage:iC(()=>localStorage),partialize:v=>v,version:0,merge:(v,b)=>({...b,...v}),...t},o=!1;const l=new Set,a=new Set;let c=i.storage;if(!c)return e((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...v)},r,s);const u=()=>{const v=i.partialize({...r()});return c.setItem(i.name,{state:v,version:i.version})},h=s.setState;s.setState=(v,b)=>{h(v,b),u()};const f=e((...v)=>{n(...v),u()},r,s);s.getInitialState=()=>f;let p;const m=()=>{var v,b;if(!c)return;o=!1,l.forEach(g=>{var x;return g((x=r())!=null?x:f)});const y=((b=i.onRehydrateStorage)==null?void 0:b.call(i,(v=r())!=null?v:f))||void 0;return to(c.getItem.bind(c))(i.name).then(g=>{if(g)if(typeof g.version=="number"&&g.version!==i.version){if(i.migrate)return[!0,i.migrate(g.state,g.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,g.state];return[!1,void 0]}).then(g=>{var x;const[S,_]=g;if(p=i.merge(_,(x=r())!=null?x:f),n(p,!0),S)return u()}).then(()=>{y==null||y(p,void 0),p=r(),o=!0,a.forEach(g=>g(p))}).catch(g=>{y==null||y(void 0,g)})};return s.persist={setOptions:v=>{i={...i,...v},v.storage&&(c=v.storage)},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:v=>(l.add(v),()=>{l.delete(v)}),onFinishHydration:v=>(a.add(v),()=>{a.delete(v)})},i.skipHydration||m(),p||f},lC=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?oC(e,t):aC(e,t),cC=lC,uC="modulepreload",dC=function(e){return"/"+e},Xp={},$r=function(t,n,r){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=dC(i),i in Xp)return;Xp[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!r)for(let u=s.length-1;u>=0;u--){const h=s[u];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":uC,o||(c.as="script",c.crossOrigin=""),c.href=i,document.head.appendChild(c),o)return new Promise((u,h)=>{c.addEventListener("load",u),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},hC=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>$r(()=>Promise.resolve().then(()=>Gs),void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class vh extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class fC extends vh{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class pC extends vh{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class mC extends vh{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Du;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Du||(Du={}));var gC=globalThis&&globalThis.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(h){o(h)}}function a(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(l,a)}c((r=r.apply(e,t||[])).next())})};class vC{constructor(t,{headers:n={},customFetch:r,region:s=Du.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=hC(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return gC(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let l={},{region:a}=n;a||(a=this.region),a&&a!=="any"&&(l["x-region"]=a);let c;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(l["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(l["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:c}).catch(m=>{throw new fC(m)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new pC(u);if(!u.ok)throw new mC(u);let f=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield u.json():f==="application/octet-stream"?p=yield u.blob():f==="text/event-stream"?p=u:f==="multipart/form-data"?p=yield u.formData():p=yield u.text(),{data:p,error:null}}catch(s){return{data:null,error:s}}})}}var at={},yh={},_l={},go={},El={},jl={},yC=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Vs=yC();const xC=Vs.fetch,Cy=Vs.fetch.bind(Vs),Py=Vs.Headers,wC=Vs.Request,bC=Vs.Response,Gs=Object.freeze(Object.defineProperty({__proto__:null,Headers:Py,Request:wC,Response:bC,default:Cy,fetch:xC},Symbol.toStringTag,{value:"Module"})),SC=yx(Gs);var kl={};Object.defineProperty(kl,"__esModule",{value:!0});let _C=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};kl.default=_C;var Ty=yt&&yt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jl,"__esModule",{value:!0});const EC=Ty(SC),jC=Ty(kl);let kC=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=EC.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,a;let c=null,u=null,h=null,f=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),b=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&b&&b.length>1&&(h=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const v=await i.text();try{c=JSON.parse(v),Array.isArray(c)&&i.status===404&&(u=[],c=null,f=200,p="OK")}catch{i.status===404&&v===""?(f=204,p="No Content"):c={message:v}}if(c&&this.isMaybeSingle&&(!((a=c==null?void 0:c.details)===null||a===void 0)&&a.includes("0 rows"))&&(c=null,f=200,p="OK"),c&&this.shouldThrowOnError)throw new jC.default(c)}return{error:c,data:u,count:h,status:f,statusText:p}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,a;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(a=i==null?void 0:i.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};jl.default=kC;var CC=yt&&yt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(El,"__esModule",{value:!0});const PC=CC(jl);let TC=class extends PC.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const a=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${a};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};El.default=TC;var NC=yt&&yt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(go,"__esModule",{value:!0});const RC=NC(El);let IC=class extends RC.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};go.default=IC;var AC=yt&&yt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_l,"__esModule",{value:!0});const oi=AC(go);let MC=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=n,this.schema=r,this.fetch=s}select(t,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new oi.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,a)=>l.concat(Object.keys(a)),[]);if(o.length>0){const l=[...new Set(o)].map(a=>`"${a}"`);this.url.searchParams.set("columns",l.join(","))}}return new oi.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const a=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(a.length>0){const c=[...new Set(a)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new oi.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new oi.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new oi.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};_l.default=MC;var Cl={},Pl={};Object.defineProperty(Pl,"__esModule",{value:!0});Pl.version=void 0;Pl.version="0.0.0-automated";Object.defineProperty(Cl,"__esModule",{value:!0});Cl.DEFAULT_HEADERS=void 0;const LC=Pl;Cl.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${LC.version}`};var Ny=yt&&yt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yh,"__esModule",{value:!0});const OC=Ny(_l),DC=Ny(go),$C=Cl;let UC=class Ry{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},$C.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new OC.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Ry(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let a;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(o="POST",a=n);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new DC.default({method:o,url:l,headers:c,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}};yh.default=UC;var Ks=yt&&yt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(at,"__esModule",{value:!0});at.PostgrestError=at.PostgrestBuilder=at.PostgrestTransformBuilder=at.PostgrestFilterBuilder=at.PostgrestQueryBuilder=at.PostgrestClient=void 0;const Iy=Ks(yh);at.PostgrestClient=Iy.default;const Ay=Ks(_l);at.PostgrestQueryBuilder=Ay.default;const My=Ks(go);at.PostgrestFilterBuilder=My.default;const Ly=Ks(El);at.PostgrestTransformBuilder=Ly.default;const Oy=Ks(jl);at.PostgrestBuilder=Oy.default;const Dy=Ks(kl);at.PostgrestError=Dy.default;var zC=at.default={PostgrestClient:Iy.default,PostgrestQueryBuilder:Ay.default,PostgrestFilterBuilder:My.default,PostgrestTransformBuilder:Ly.default,PostgrestBuilder:Oy.default,PostgrestError:Dy.default};const{PostgrestClient:VC,PostgrestQueryBuilder:qN,PostgrestFilterBuilder:GN,PostgrestTransformBuilder:KN,PostgrestBuilder:JN,PostgrestError:QN}=zC,FC="2.11.2",BC={"X-Client-Info":`realtime-js/${FC}`},WC="1.0.0",$y=1e4,HC=1e3;var Ns;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ns||(Ns={}));var pt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(pt||(pt={}));var Vt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Vt||(Vt={}));var $u;(function(e){e.websocket="websocket"})($u||($u={}));var _r;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(_r||(_r={}));class qC{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(t.slice(o,o+s));o=o+s;const a=r.decode(t.slice(o,o+i));o=o+i;const c=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:a,payload:c}}}class Uy{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var le;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(le||(le={}));const Zp=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,o)=>(i[o]=GC(o,e,t,s),i),{})},GC=(e,t,n,r)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=n[e];return i&&!r.includes(i)?zy(i,o):Uu(o)},zy=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return YC(t,n)}switch(e){case le.bool:return KC(t);case le.float4:case le.float8:case le.int2:case le.int4:case le.int8:case le.numeric:case le.oid:return JC(t);case le.json:case le.jsonb:return QC(t);case le.timestamp:return XC(t);case le.abstime:case le.date:case le.daterange:case le.int4range:case le.int8range:case le.money:case le.reltime:case le.text:case le.time:case le.timestamptz:case le.timetz:case le.tsrange:case le.tstzrange:return Uu(t);default:return Uu(t)}},Uu=e=>e,KC=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},JC=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},QC=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},YC=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>zy(t,l))}return e},XC=e=>typeof e=="string"?e.replace(" ","T"):e,Vy=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class bc{constructor(t,n,r={},s=$y){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var em;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(em||(em={}));class Ni{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ni.syncState(this.state,s,i,o),this.pendingDiffs.forEach(a=>{this.state=Ni.syncDiff(this.state,a,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ni.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),o=this.transformState(n),l={},a={};return this.map(i,(c,u)=>{o[c]||(a[c]=u)}),this.map(o,(c,u)=>{const h=i[c];if(h){const f=u.map(b=>b.presence_ref),p=h.map(b=>b.presence_ref),m=u.filter(b=>p.indexOf(b.presence_ref)<0),v=h.filter(b=>f.indexOf(b.presence_ref)<0);m.length>0&&(l[c]=m),v.length>0&&(a[c]=v)}else l[c]=u}),this.syncDiff(i,{joins:l,leaves:a},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,a)=>{var c;const u=(c=t[l])!==null&&c!==void 0?c:[];if(t[l]=this.cloneDeep(a),u.length>0){const h=t[l].map(p=>p.presence_ref),f=u.filter(p=>h.indexOf(p.presence_ref)<0);t[l].unshift(...f)}r(l,u,a)}),this.map(o,(l,a)=>{let c=t[l];if(!c)return;const u=a.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),t[l]=c,s(l,c,a),c.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var tm;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(tm||(tm={}));var nm;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(nm||(nm={}));var ln;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ln||(ln={}));class xh{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new bc(this,Vt.join,this.params,this.timeout),this.rejoinTimer=new Uy(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Ni(this),this.broadcastEndpointURL=Vy(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(u=>t==null?void 0:t(ln.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(ln.CLOSED));const a={},c={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(a.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},a)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){t==null||t(ln.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,m=[];for(let v=0;v<p;v++){const b=f[v],{filter:{event:y,schema:g,table:x,filter:S}}=b,_=u&&u[v];if(_&&_.event===y&&_.schema===g&&_.table===x&&_.filter===S)m.push(Object.assign(Object.assign({},b),{id:_.id}));else{this.unsubscribe(),t==null||t(ln.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,t&&t(ln.SUBSCRIBED);return}}).receive("error",u=>{t==null||t(ln.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ln.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,a;const c=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((a=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||a===void 0)&&a.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=pt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new bc(this,Vt.leave,{},t);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new bc(this,t,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:a,leave:c,join:u}=Vt;if(r&&[l,a,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var m,v,b;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((b=(v=p.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(p=>p.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var m,v,b,y,g,x;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const S=p.id,_=(m=p.filter)===null||m===void 0?void 0:m.event;return S&&((v=n.ids)===null||v===void 0?void 0:v.includes(S))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const S=(g=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return S==="*"||S===((x=n==null?void 0:n.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:v,table:b,commit_timestamp:y,type:g,errors:x}=m;f=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:y,eventType:g,new:{},old:{},errors:x}),this._getPayloadRecords(m))}p.callback(f,r)})}_isClosed(){return this.state===pt.closed}_isJoined(){return this.state===pt.joined}_isJoining(){return this.state===pt.joining}_isLeaving(){return this.state===pt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&xh.isEqual(s.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Vt.close,{},t)}_onError(t){this._on(Vt.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Zp(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Zp(t.columns,t.old_record)),n}}const ZC=()=>{},eP=typeof WebSocket<"u",tP=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class nP{constructor(t,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=BC,this.params={},this.timeout=$y,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=ZC,this.conn=null,this.sendBuffer=[],this.serializer=new qC,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>$r(()=>Promise.resolve().then(()=>Gs),void 0).then(({default:a})=>a(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${$u.websocket}`,this.httpEndpoint=Vy(t),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Uy(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(eP){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new rP(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),$r(()=>import("./browser-8c34b90f.js").then(t=>t.b),[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:WC}))}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ns.connecting:return _r.Connecting;case Ns.open:return _r.Open;case Ns.closing:return _r.Closing;default:return _r.Closed}}isConnected(){return this.connectionState()===_r.Open}channel(t,n={config:{}}){const r=new xh(`realtime:${t}`,n,this);return this.channels.push(r),r}push(t){const{topic:n,event:r,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var a;(a=this.conn)===null||a===void 0||a.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let n=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(s=>{n&&s.updateJoinPayload({access_token:n}),s.joinedOnce&&s._isJoined()&&s._push(Vt.access_token,{access_token:n})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(HC,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Vt.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([tP],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class rP{constructor(t,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ns.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=r.close}}class wh extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ae(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class sP extends wh{constructor(t,n){super(t),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class zu extends wh{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var iP=globalThis&&globalThis.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(h){o(h)}}function a(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(l,a)}c((r=r.apply(e,t||[])).next())})};const Fy=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>$r(()=>Promise.resolve().then(()=>Gs),void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},oP=()=>iP(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield $r(()=>Promise.resolve().then(()=>Gs),void 0)).Response:Response}),Vu=e=>{if(Array.isArray(e))return e.map(n=>Vu(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Vu(r)}),t};var Hr=globalThis&&globalThis.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(h){o(h)}}function a(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(l,a)}c((r=r.apply(e,t||[])).next())})};const Sc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),aP=(e,t,n)=>Hr(void 0,void 0,void 0,function*(){const r=yield oP();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{t(new sP(Sc(s),e.status||500))}).catch(s=>{t(new zu(Sc(s),s))}):t(new zu(Sc(e),e))}),lP=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function vo(e,t,n,r,s,i){return Hr(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,lP(t,r,s,i)).then(a=>{if(!a.ok)throw a;return r!=null&&r.noResolveJson?a:a.json()}).then(a=>o(a)).catch(a=>aP(a,l,r))})})}function qa(e,t,n,r){return Hr(this,void 0,void 0,function*(){return vo(e,"GET",t,n,r)})}function An(e,t,n,r,s){return Hr(this,void 0,void 0,function*(){return vo(e,"POST",t,r,s,n)})}function cP(e,t,n,r,s){return Hr(this,void 0,void 0,function*(){return vo(e,"PUT",t,r,s,n)})}function uP(e,t,n,r){return Hr(this,void 0,void 0,function*(){return vo(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function By(e,t,n,r,s){return Hr(this,void 0,void 0,function*(){return vo(e,"DELETE",t,r,s,n)})}var st=globalThis&&globalThis.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(h){o(h)}}function a(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(l,a)}c((r=r.apply(e,t||[])).next())})};const dP={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},rm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class hP{constructor(t,n={},r,s){this.url=t,this.headers=n,this.bucketId=r,this.fetch=Fy(s)}uploadOrUpdate(t,n,r,s){return st(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},rm),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const a=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),a&&i.append("metadata",this.encodeMetadata(a)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),a&&i.append("metadata",this.encodeMetadata(a))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,a&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(a)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:c,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(Ae(i))return{data:null,error:i};throw i}})}upload(t,n,r){return st(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return st(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let a;const c=Object.assign({upsert:rm.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",c.cacheControl),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",c.cacheControl)):(a=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:a,headers:u}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(a){if(Ae(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(t,n){return st(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield An(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new wh("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(Ae(r))return{data:null,error:r};throw r}})}update(t,n,r){return st(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return st(this,void 0,void 0,function*(){try{return{data:yield An(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Ae(s))return{data:null,error:s};throw s}})}copy(t,n,r){return st(this,void 0,void 0,function*(){try{return{data:{path:(yield An(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Ae(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return st(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield An(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Ae(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return st(this,void 0,void 0,function*(){try{const s=yield An(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Ae(s))return{data:null,error:s};throw s}})}download(t,n){return st(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield qa(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Ae(l))return{data:null,error:l};throw l}})}info(t){return st(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield qa(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Vu(r),error:null}}catch(r){if(Ae(r))return{data:null,error:r};throw r}})}exists(t){return st(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield uP(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Ae(r)&&r instanceof zu){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});a!==""&&s.push(a);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${c}`)}}}remove(t){return st(this,void 0,void 0,function*(){try{return{data:yield By(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Ae(n))return{data:null,error:n};throw n}})}list(t,n,r){return st(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},dP),n),{prefix:t||""});return{data:yield An(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Ae(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const fP="2.7.1",pP={"X-Client-Info":`storage-js/${fP}`};var Qr=globalThis&&globalThis.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(h){o(h)}}function a(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(l,a)}c((r=r.apply(e,t||[])).next())})};class mP{constructor(t,n={},r){this.url=t,this.headers=Object.assign(Object.assign({},pP),n),this.fetch=Fy(r)}listBuckets(){return Qr(this,void 0,void 0,function*(){try{return{data:yield qa(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Ae(t))return{data:null,error:t};throw t}})}getBucket(t){return Qr(this,void 0,void 0,function*(){try{return{data:yield qa(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Ae(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Qr(this,void 0,void 0,function*(){try{return{data:yield An(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ae(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Qr(this,void 0,void 0,function*(){try{return{data:yield cP(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ae(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Qr(this,void 0,void 0,function*(){try{return{data:yield An(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Ae(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Qr(this,void 0,void 0,function*(){try{return{data:yield By(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Ae(n))return{data:null,error:n};throw n}})}}class gP extends mP{constructor(t,n={},r){super(t,n,r)}from(t){return new hP(this.url,this.headers,t,this.fetch)}}const vP="2.49.3";let pi="";typeof Deno<"u"?pi="deno":typeof document<"u"?pi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?pi="react-native":pi="node";const yP={"X-Client-Info":`supabase-js-${pi}/${vP}`},xP={headers:yP},wP={schema:"public"},bP={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},SP={};var _P=globalThis&&globalThis.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(h){o(h)}}function a(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(l,a)}c((r=r.apply(e,t||[])).next())})};const EP=e=>{let t;return e?t=e:typeof fetch>"u"?t=Cy:t=fetch,(...n)=>t(...n)},jP=()=>typeof Headers>"u"?Py:Headers,kP=(e,t,n)=>{const r=EP(n),s=jP();return(i,o)=>_P(void 0,void 0,void 0,function*(){var l;const a=(l=yield t())!==null&&l!==void 0?l:e;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${a}`),r(i,Object.assign(Object.assign({},o),{headers:c}))})};var CP=globalThis&&globalThis.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(h){o(h)}}function a(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(l,a)}c((r=r.apply(e,t||[])).next())})};function PP(e){return e.replace(/\/$/,"")}function TP(e,t){const{db:n,auth:r,realtime:s,global:i}=e,{db:o,auth:l,realtime:a,global:c}=t,u={db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},l),r),realtime:Object.assign(Object.assign({},a),s),global:Object.assign(Object.assign({},c),i),accessToken:()=>CP(this,void 0,void 0,function*(){return""})};return e.accessToken?u.accessToken=e.accessToken:delete u.accessToken,u}const Wy="2.69.1",rs=30*1e3,Fu=3,_c=Fu*rs,NP="http://localhost:9999",RP="supabase.auth.token",IP={"X-Client-Info":`gotrue-js/${Wy}`},Bu="X-Supabase-Api-Version",Hy={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},AP=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,MP=6e5;class bh extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function W(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class LP extends bh{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function OP(e){return W(e)&&e.name==="AuthApiError"}class qy extends bh{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class ur extends bh{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class Pn extends ur{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function DP(e){return W(e)&&e.name==="AuthSessionMissingError"}class Ec extends ur{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Bo extends ur{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Wo extends ur{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $P(e){return W(e)&&e.name==="AuthImplicitGrantRedirectError"}class sm extends ur{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Wu extends ur{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function jc(e){return W(e)&&e.name==="AuthRetryableFetchError"}class im extends ur{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Ri extends ur{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const om="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),am=` 	
\r=`.split(""),UP=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<am.length;t+=1)e[am[t].charCodeAt(0)]=-2;for(let t=0;t<om.length;t+=1)e[om[t].charCodeAt(0)]=t;return e})();function Gy(e,t,n){const r=UP[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function lm(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{FP(o,r,n)};for(let o=0;o<e.length;o+=1)Gy(e.charCodeAt(o),s,i);return t.join("")}function zP(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function VP(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}zP(r,t)}}function FP(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function BP(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Gy(e.charCodeAt(s),n,r);return new Uint8Array(t)}function WP(e){const t=[];return VP(e,n=>t.push(n)),new Uint8Array(t)}function HP(e){return Math.round(Date.now()/1e3)+e}function qP(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Yt=()=>typeof window<"u"&&typeof document<"u",fr={tested:!1,writable:!1},Ii=()=>{if(!Yt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(fr.tested)return fr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),fr.tested=!0,fr.writable=!0}catch{fr.tested=!0,fr.writable=!1}return fr.writable};function GP(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const Ky=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>$r(()=>Promise.resolve().then(()=>Gs),void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},KP=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Jy=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Ho=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},qo=async(e,t)=>{await e.removeItem(t)};class Tl{constructor(){this.promise=new Tl.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Tl.promiseConstructor=Promise;function kc(e){const t=e.split(".");if(t.length!==3)throw new Ri("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!AP.test(t[r]))throw new Ri("JWT not in base64url format");return{header:JSON.parse(lm(t[0])),payload:JSON.parse(lm(t[1])),signature:BP(t[2]),raw:{header:t[0],payload:t[1]}}}async function JP(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function QP(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function YP(e){return("0"+e.toString(16)).substr(-2)}function XP(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,YP).join("")}async function ZP(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function eT(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await ZP(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Yr(e,t,n=!1){const r=XP();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Jy(e,`${t}-code-verifier`,s);const i=await eT(r);return[i,r===i?"plain":"s256"]}const tT=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function nT(e){const t=e.headers.get(Bu);if(!t||!t.match(tT))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function rT(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function sT(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var iT=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Sr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),oT=[502,503,504];async function cm(e){var t;if(!KP(e))throw new Wu(Sr(e),0);if(oT.includes(e.status))throw new Wu(Sr(e),e.status);let n;try{n=await e.json()}catch(i){throw new qy(Sr(i),i)}let r;const s=nT(e);if(s&&s.getTime()>=Hy["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new im(Sr(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Pn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new im(Sr(n),e.status,n.weak_password.reasons);throw new LP(Sr(n),e.status||500,r)}const aT=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Z(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Bu]||(i[Bu]=Hy["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",a=await lT(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(a):{data:Object.assign({},a),error:null}}async function lT(e,t,n,r,s,i){const o=aT(t,r,s,i);let l;try{l=await e(n,Object.assign({},o))}catch(a){throw console.error(a),new Wu(Sr(a),0)}if(l.ok||await cm(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(a){await cm(a)}}function Tn(e){var t;let n=null;hT(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=HP(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function um(e){const t=Tn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Dn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function cT(e){return{data:e,error:null}}function uT(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,o=iT(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},a=Object.assign({},o);return{data:{properties:l,user:a},error:null}}function dT(e){return e}function hT(e){return e.access_token&&e.refresh_token&&e.expires_in}var fT=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class pT{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Ky(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n="global"){try{return await Z(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(W(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Z(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Dn})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=fT(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Z(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:uT,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(W(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Z(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Dn})}catch(n){if(W(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,o,l,a;try{const c={nextPage:null,lastPage:0,total:0},u=await Z(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:dT});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(a=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&a!==void 0?a:[];return p.length>0&&(p.forEach(m=>{const v=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(m.split(";")[1].split("=")[1]);c[`${b}Page`]=v}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(W(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){try{return await Z(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Dn})}catch(n){if(W(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){try{return await Z(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Dn})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){try{return await Z(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Dn})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){try{const{data:n,error:r}=await Z(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(W(n))return{data:null,error:n};throw n}}async _deleteFactor(t){try{return{data:await Z(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(W(n))return{data:null,error:n};throw n}}}const mT={getItem:e=>Ii()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Ii()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Ii()&&globalThis.localStorage.removeItem(e)}};function dm(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function gT(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Xr={debug:!!(globalThis&&Ii()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Qy extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class vT extends Qy{}async function yT(e,t,n){Xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Xr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new vT(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Xr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}gT();const xT={url:NP,storageKey:RP,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:IP,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function hm(e,t,n){return await n()}class no{constructor(t){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=no.nextInstanceID,no.nextInstanceID+=1,this.instanceID>0&&Yt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},xT),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new pT({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Ky(s.fetch),this.lock=s.lock||hm,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Yt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=yT:this.lock=hm,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Ii()?this.storage=mT:(this.memoryStorage={},this.storage=dm(this.memoryStorage)):(this.memoryStorage={},this.storage=dm(this.memoryStorage)),Yt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Wy}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=GP(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Yt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),$P(i)){const a=(t=i.details)===null||t===void 0?void 0:t.code;if(a==="identity_already_exists"||a==="identity_not_found"||a==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return W(n)?{error:n}:{error:new qy("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await Z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Tn}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(i){if(W(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:u,password:h,options:f}=t;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await Yr(this.storage,this.storageKey)),i=await Z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:m},xform:Tn})}else if("phone"in t){const{phone:u,password:h,options:f}=t;i=await Z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Tn})}else throw new Bo("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(i){if(W(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:l}=t;n=await Z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:um})}else if("phone"in t){const{phone:i,password:o,options:l}=t;n=await Z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:um})}else throw new Bo("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Ec}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(W(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const n=await Ho(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await Z(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Tn});if(await qo(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ec}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(W(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=t,l=await Z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Tn}),{data:a,error:c}=l;return c?{data:{user:null,session:null},error:c}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new Ec}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:c})}catch(n){if(W(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,o;try{if("email"in t){const{email:l,options:a}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Yr(this.storage,this.storageKey));const{error:h}=await Z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=a==null?void 0:a.data)!==null&&n!==void 0?n:{},create_user:(r=a==null?void 0:a.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:a}=t,{data:c,error:u}=await Z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=a==null?void 0:a.data)!==null&&s!==void 0?s:{},create_user:(i=a==null?void 0:a.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},channel:(o=a==null?void 0:a.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Bo("You must provide either an email or phone number.")}catch(l){if(W(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await Z(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Tn});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const a=o.session,c=o.user;return a!=null&&a.access_token&&(await this._saveSession(a),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(s){if(W(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Yr(this.storage,this.storageKey)),await Z(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:cT})}catch(i){if(W(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Pn;const{error:s}=await Z(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(W(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:o}=await Z(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:o,error:l}=await Z(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Bo("You must provide either an email or phone number and a type")}catch(n){if(W(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Ho(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<_c:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(a,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(a,c,u))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Dn}):await this._useSession(async n=>{var r,s,i;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Pn}:await Z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Dn})})}catch(n){if(W(n))return DP(n)&&(await this._removeSession(),await qo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Pn;const o=s.session;let l=null,a=null;this.flowType==="pkce"&&t.email!=null&&([l,a]=await Yr(this.storage,this.storageKey));const{data:c,error:u}=await Z(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:a}),jwt:o.access_token,xform:Dn});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Pn;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=kc(t.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:l,error:a}=await this._callRefreshToken(t.refresh_token);if(a)return{data:{user:null,session:null},error:a};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:a}=await this._getUser(t.access_token);if(a)throw a;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(W(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Pn;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(W(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Yt())throw new Wo("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Wo(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new sm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Wo("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new sm("No code detected.");const{data:g,error:x}=await this._exchangeCodeForSession(t.code);if(x)throw x;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:a,token_type:c}=t;if(!i||!l||!o||!c)throw new Wo("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let f=u+h;a&&(f=parseInt(a));const p=f-u;p*1e3<=rs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const m=f-h;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,u);const{data:v,error:b}=await this._getUser(i);if(b)throw b;const y={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(r){if(W(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Ho(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(OP(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await qo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=qP(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Yr(this.storage,this.storageKey,!0));try{return await Z(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(W(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(W(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,l,a,c,u;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:!0});return await Z(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Yt()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(W(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await Z(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(W(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await QP(async s=>(s>0&&await JP(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Z(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Tn})),(s,i)=>{const o=200*Math.pow(2,s);return i&&jc(i)&&Date.now()+o-r<rs})}catch(r){if(this._debug(n,"error",r),W(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Yt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Ho(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((t=r.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<_c;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${_c}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),jc(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Pn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Tl;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Pn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),W(i)){const o={session:null,error:i};return jc(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(a){i.push(a)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Jy(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await qo(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Yt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),rs);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/rs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${rs}ms, refresh threshold is ${Fu} ticks`),s<=Fu&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Qy)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Yt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Yr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Z(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(W(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:a,error:c}=await Z(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((s=a==null?void 0:a.totp)===null||s===void 0)&&s.qr_code)&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(n){if(W(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:l}=await Z(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(W(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Z(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(W(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=kc(s.access_token);let l=null;o.aal&&(l=o.aal);let a=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(a="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:a,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(o=>o.kid===t);if(r||(r=this.jwks.keys.find(o=>o.kid===t),r&&this.jwks_cached_at+MP>Date.now()))return r;const{data:s,error:i}=await Z(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new Ri("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===t),!r)throw new Ri("No matching signing key found in JWKS");return r}async getClaims(t,n={keys:[]}){try{let r=t;if(!r){const{data:p,error:m}=await this.getSession();if(m||!p.session)return{data:null,error:m};r=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:a}}=kc(r);if(rT(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const c=sT(s.alg),u=await this.fetchJwk(s.kid,n),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,o,WP(`${l}.${a}`)))throw new Ri("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(W(r))return{data:null,error:r};throw r}}}no.nextInstanceID=0;const wT=no;class bT extends wT{constructor(t){super(t)}}var ST=globalThis&&globalThis.__awaiter||function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(h){o(h)}}function a(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(l,a)}c((r=r.apply(e,t||[])).next())})};class _T{constructor(t,n,r){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=PP(t);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const a=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:wP,realtime:SP,auth:Object.assign(Object.assign({},bP),{storageKey:a}),global:xP},u=TP(r??{},c);this.storageKey=(s=u.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=kP(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new VC(`${l}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new vC(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new gP(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return ST(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:l,debug:a},c,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new bT({url:this.authUrl,headers:Object.assign(Object.assign({},h),c),storageKey:i,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:l,debug:a,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new nP(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ET=(e,t,n)=>new _T(e,t,n),pr={duration:4e3,position:"bottom-right"},Et={success:{icon:"✅",style:{background:"#10B981",color:"white"},duration:4e3},error:{icon:"❌",style:{background:"#EF4444",color:"white"},duration:6e3},info:{icon:"ℹ️",style:{background:"#3B82F6",color:"white"},duration:4e3},warning:{icon:"⚠️",style:{background:"#F59E0B",color:"white"},duration:5e3},loading:{icon:"⏳",style:{background:"#6B7280",color:"white"}}},D={success:(e,t={})=>(console.log(`${Et.success.icon} ${e}`),ge.success(e,{...pr,...Et.success,...t})),error:(e,t={})=>{const n=typeof e=="string"?e:"Une erreur est survenue";return console.error(`${Et.error.icon} ${n}`),ge.error(n,{...pr,...Et.error,...t})},info:(e,t={})=>(console.log(`${Et.info.icon} ${e}`),ge(e,{...pr,...Et.info,...t})),warning:(e,t={})=>(console.log(`${Et.warning.icon} ${e}`),ge(e,{...pr,...Et.warning,...t})),loading:(e,t={})=>(console.log(`${Et.loading.icon} ${e}`),ge.loading(e,{...pr,...Et.loading,...t})),promise:async(e,t,n={})=>(console.log(`🔄 ${t.loading}`),ge.promise(e,{loading:t.loading,success:t.success,error:t.error},{...pr,...n})),update:(e,t,n="info")=>{if(!e)return;const r=Et[n]||Et.info;console.log(`${r.icon} ${t} (mise à jour)`),ge.update(e,{render:t,...pr,...r})},dismiss:e=>{e&&ge.dismiss(e)},dismissAll:()=>{ge.dismiss()}},mr={DEBUG:0,INFO:1,WARN:2,ERROR:3},fm={DEBUG:"#808080",INFO:"#0066cc",WARN:"#ff9900",ERROR:"#cc0000"};class At{constructor(t){this.context=t,this.level=mr.DEBUG}setLevel(t){this.level=mr[t]||mr.DEBUG}formatMessage(t,n,r){const i=`[${new Date().toISOString()}] [${this.context}] [${t}]`;r?(console.groupCollapsed(`%c${i} ${n}`,`color: ${fm[t]}`),console.log("Données:",r),console.groupEnd()):console.log(`%c${i} ${n}`,`color: ${fm[t]}`)}debug(t,n){this.level<=mr.DEBUG&&this.formatMessage("DEBUG",t,n)}info(t,n){this.level<=mr.INFO&&this.formatMessage("INFO",t,n)}warn(t,n){this.level<=mr.WARN&&this.formatMessage("WARN",t,n)}error(t,n){this.level<=mr.ERROR&&(this.formatMessage("ERROR",t,n),n!=null&&n.stack&&console.error(n.stack))}}const fn=new At("Supabase"),jT="https://azafzikvwdartavmpwsc.supabase.co",kT="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF6YWZ6aWt2d2RhcnRhdm1wd3NjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk0NjM1NDMsImV4cCI6MjA1NTAzOTU0M30.MNV4la2gg_gwetjzx5ALYvZzEOU2_JW01kfdVk-ub40",z=ET(jT,kT,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1,storage:window.localStorage,storageKey:"snap-booth-auth",flowType:"pkce"},realtime:{params:{eventsPerSecond:10},config:{timeout:3e4,heartbeat:{interval:15e3}}}});z.auth.onAuthStateChange((e,t)=>{var n;fn.info("Changement d'état d'authentification",{event:e}),e==="SIGNED_IN"?(fn.info("Utilisateur connecté",{userId:(n=t==null?void 0:t.user)==null?void 0:n.id}),D.success("Connecté avec succès")):e==="SIGNED_OUT"?(fn.info("Utilisateur déconnecté"),D.success("Déconnecté avec succès")):e==="TOKEN_REFRESHED"&&fn.info("Token rafraîchi")});z.auth.getSession().then(({data:{session:e},error:t})=>{t?(fn.error("Erreur lors de la vérification de la session",t),D.error("Erreur de connexion à Supabase")):e?fn.info("Session existante trouvée",{userId:e.user.id}):fn.info("Aucune session active")});const CT=(e,t,n={},r={})=>z.channel(e).on("postgres_changes",{event:"*",schema:"public",table:t,...n},i=>{fn.debug("Changement en temps réel reçu",{channel:e,table:t,payload:i}),i.eventType==="INSERT"&&r.onInsert?r.onInsert(i.new):i.eventType==="UPDATE"&&r.onUpdate?r.onUpdate(i.new,i.old):i.eventType==="DELETE"&&r.onDelete&&r.onDelete(i.old)}).subscribe(i=>{fn.info("Statut de la souscription",{channel:e,status:i}),i==="SUBSCRIBED"&&r.onSubscribe?r.onSubscribe():i==="CLOSED"&&r.onClose?r.onClose():i==="CHANNEL_ERROR"&&r.onError&&r.onError()}),$e=new At("Auth"),en=sC(cC((e,t)=>({user:null,isLoading:!1,error:null,setUser:n=>e({user:n,isLoading:!1}),login:async(n,r)=>{try{$e.info("Tentative de connexion",{email:n}),e({isLoading:!0,error:null});const{data:{user:s},error:i}=await z.auth.signInWithPassword({email:n,password:r});if(i)throw i;if(!s)throw new Error("Aucune donnée utilisateur retournée");$e.info("Utilisateur authentifié, récupération du profil",{userId:s.id});const{data:o,error:l}=await z.from("profiles").select("role").eq("id",s.id).single();if(l&&l.code!=="PGRST116")throw l;const a=n==="manuel@gmail.com"||(o==null?void 0:o.role)==="admin";if(a){$e.info("Mise à jour des métadonnées utilisateur avec rôle admin",{userId:s.id});const{error:u}=await z.auth.updateUser({data:{role:"admin"}});u&&$e.error("Erreur lors de la mise à jour des métadonnées",u)}const c={id:s.id,email:s.email,role:a?"admin":"user"};return $e.info("Connexion réussie",c),e({user:c,isLoading:!1,error:null}),{error:null}}catch(s){$e.error("Erreur de connexion",s);let i="Une erreur est survenue lors de la connexion";return s.message.includes("Invalid login credentials")&&(i="Email ou mot de passe incorrect"),e({user:null,isLoading:!1,error:i}),{error:s}}},signup:async(n,r)=>{try{if($e.info("Tentative d'inscription",{email:n}),e({isLoading:!0,error:null}),n==="nouvelleereprod@gmail.com")throw new Error("Cet email ne peut pas être utilisé pour l'inscription");const{data:{user:s},error:i}=await z.auth.signUp({email:n,password:r,options:{data:{role:"user"}}});if(i)throw i;if(!s)throw new Error("Aucune donnée utilisateur retournée");const o={id:s.id,email:s.email,role:"user"};return $e.info("Inscription réussie",o),e({user:o,isLoading:!1,error:null}),{error:null}}catch(s){$e.error("Erreur d'inscription",s);let i="Une erreur est survenue lors de l'inscription";return s.message.includes("already registered")&&(i="Un compte existe déjà avec cet email"),e({user:null,isLoading:!1,error:i}),{error:s}}},logout:async()=>{try{$e.info("Tentative de déconnexion"),e({isLoading:!0});const{error:n}=await z.auth.signOut();if(n)throw n;$e.info("Déconnexion réussie"),e({user:null,isLoading:!1,error:null})}catch(n){$e.error("Erreur lors de la déconnexion",n),e({isLoading:!1,error:n.message})}},checkSession:async()=>{try{$e.info("Vérification de la session"),e({isLoading:!0});const{data:{session:n},error:r}=await z.auth.getSession();if(r)throw r;if(n!=null&&n.user){$e.info("Session trouvée",{userId:n.user.id});const{data:s}=await z.from("profiles").select("role").eq("id",n.user.id).single(),i=n.user.email==="nouvelleereprod@gmail.com"||(s==null?void 0:s.role)==="admin",o={id:n.user.id,email:n.user.email,role:i?"admin":"user"};$e.info("Session restaurée",o),e({user:o,isLoading:!1,error:null})}else $e.info("Aucune session active"),e({user:null,isLoading:!1,error:null})}catch(n){$e.error("Erreur lors de la vérification de la session",n),e({user:null,isLoading:!1,error:n.message})}}}),{name:"auth-storage",partialize:e=>{var t;return{user:e.user,role:(t=e.user)==null?void 0:t.role}},version:1})),jn=new At("Login");function PT(){const[e,t]=w.useState(""),[n,r]=w.useState(""),[s,i]=w.useState(!1),[o,l]=w.useState(null),a=sn(),{login:c,signup:u,user:h,isLoading:f,error:p}=en();w.useEffect(()=>{h&&jn.info("Utilisateur déjà connecté, redirection vers /events")},[h,a]);const m=async b=>{if(b.preventDefault(),!e||!n){const y=!e&&!n?"Veuillez saisir votre email et mot de passe":e?"Veuillez saisir votre mot de passe":"Veuillez saisir votre email";jn.debug("Validation échouée",{email:!!e,password:!!n}),en.setState({error:y}),D.error(y);return}l(null),jn.info(`Tentative de ${s?"création de compte":"connexion"}`,{email:e}),console.log("Tentative de connexion avec:",{email:e,passwordLength:n.length,isSignUp:s});try{const{error:y}=s?await u(e,n):await c(e,n);if(y)if(console.log("Erreur d'authentification détaillée:",y),y.message.includes("already registered")||y.message.includes("already exists")||y.message.includes("user_already_exists"))jn.info("Compte existant détecté lors de l'inscription"),i(!1),D.info("Un compte existe déjà avec cet email. Connectez-vous.");else throw y;else s?(jn.info("Compte créé avec succès"),l("Compte créé avec succès !"),D.success("Compte créé avec succès !"),await new Promise(g=>setTimeout(g,1500))):(jn.info("Connexion réussie"),D.success("Connexion réussie !"))}catch(y){jn.error("Erreur d'authentification",y);let g=y.message;y.message.includes("Invalid login credentials")&&(g="Email ou mot de passe incorrect. Vérifiez vos identifiants et réessayez."),D.error(g)}},v=()=>{jn.info(`Changement de mode vers ${s?"connexion":"inscription"}`),i(!s),en.setState({error:null}),l(null),t(""),r("")};return d.jsx(Bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-gradient-to-br from-purple-600 to-blue-500 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[d.jsxs("div",{className:"flex flex-col items-center mb-8",children:[d.jsx("div",{className:"bg-purple-100 p-3 rounded-full mb-4",children:d.jsx(Ss,{className:"w-8 h-8 text-purple-600"})}),d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"SNAP BOOTH"}),d.jsx("p",{className:"text-gray-500 mt-2",children:s?"Créez votre compte":"Connectez-vous à votre borne photo"})]}),d.jsxs("form",{onSubmit:m,className:"space-y-6",children:[p&&d.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg flex items-center gap-2",children:[d.jsx(mh,{className:"w-5 h-5 flex-shrink-0"}),d.jsx("span",{className:"text-sm",children:p})]}),o&&d.jsxs("div",{className:"bg-green-50 text-green-600 p-3 rounded-lg flex items-center gap-2",children:[d.jsx(vy,{className:"w-5 h-5 flex-shrink-0"}),d.jsx("span",{className:"text-sm",children:o})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),d.jsx("input",{type:"email",id:"email",value:e,onChange:b=>{t(b.target.value),en.setState({error:null})},className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),d.jsx("input",{type:"password",id:"password",value:n,onChange:b=>{r(b.target.value),en.setState({error:null})},className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500",required:!0,minLength:6}),s&&d.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Minimum 6 caractères"})]}),d.jsxs("button",{type:"submit",disabled:f,className:"w-full flex justify-center items-center gap-2 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[f&&d.jsx(mo,{className:"w-4 h-4 animate-spin"}),f?"Chargement...":s?"Créer un compte":"Se connecter"]}),d.jsx("div",{className:"text-center",children:d.jsx("button",{type:"button",onClick:v,className:"text-sm text-purple-600 hover:text-purple-500",children:s?"Déjà un compte ? Connectez-vous":"Pas de compte ? Créez-en un"})})]})]})})}const ai=new At("Storage");function TT(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}async function NT(e,t){if(!e||!t)throw new Error("eventId et eventName sont requis");const n=`${e}-${TT(t)}`;ai.info("Création du dossier",{folderName:n});try{const{data:{publicUrl:r},error:s}=z.storage.from("event-photos").getPublicUrl("test.txt");if(s)throw ai.error("Erreur lors de la vérification du bucket",s),new Error("Le système de stockage n'est pas accessible");const i=new Blob([""],{type:"text/plain"}),o=`${n}/.keep`,{error:l}=await z.storage.from("event-photos").upload(o,i,{contentType:"text/plain",cacheControl:"3600",upsert:!0});if(l&&!l.message.includes("already exists"))throw ai.error("Erreur lors de la création du dossier",l),new Error("Impossible de créer le dossier de l'événement");return ai.info("Dossier créé avec succès",{folderName:n}),n}catch(r){throw ai.error("Erreur lors de la création du dossier",r),D.error(r.message),r}}const it=new At("EventSelection");function RT({onSelectEvent:e}){const t=sn(),{user:n,logout:r}=en(),[s,i]=w.useState([]),[o,l]=w.useState({}),[a,c]=w.useState(!0),[u,h]=w.useState(null),[f,p]=w.useState(!1),[m,v]=w.useState({name:"",date:new Date().toISOString().split("T")[0],description:""}),b=w.useCallback(async()=>{if(n)try{it.info("Chargement des événements");let S=z.from("events").select("*").order("date",{ascending:!1});n.role!=="admin"&&(S=S.eq("created_by",n.id));const{data:_,error:j}=await S;if(j)throw j;const E={};await Promise.all((_||[]).map(async C=>{const{count:M}=await z.from("photos").select("*",{count:"exact",head:!0}).eq("event_id",C.id);E[C.id]=M||0})),i(_||[]),l(E),it.info("Événements chargés",{count:_==null?void 0:_.length})}catch(S){it.error("Erreur lors du chargement des événements",S),h("Impossible de charger les événements"),D.error("Impossible de charger les événements")}finally{c(!1)}},[n]);w.useEffect(()=>{if(!n){t("/login");return}b();const S=CT("events_changes","events",n.role!=="admin"?{filter:`created_by=eq.${n.id}`}:{},{onInsert:_=>{it.info("Nouvel événement reçu",{eventId:_.id}),i(j=>[_,...j]),l(j=>({...j,[_.id]:0}))},onDelete:_=>{it.info("Événement supprimé",{eventId:_.id}),i(j=>j.filter(E=>E.id!==_.id)),l(j=>{const E={...j};return delete E[_.id],E})},onUpdate:_=>{it.info("Événement mis à jour",{eventId:_.id}),i(j=>j.map(E=>E.id===_.id?_:E))},onError:()=>{it.error("Erreur de connexion temps réel"),D.error("La connexion temps réel a été perdue")}});return()=>{it.info("Nettoyage des souscriptions"),S.unsubscribe()}},[n,t,b]);const y=async()=>{if(!n||!m.name.trim()){h("Le nom de l'événement est requis");return}p(!0),h(null);try{it.info("Création d'un nouvel événement",{name:m.name});const{data:S,error:_}=await z.from("events").insert([{name:m.name.trim(),date:m.date,description:m.description.trim()||null,created_by:n.id}]).select().single();if(_)throw _;if(!S)throw new Error("Aucune donnée retournée");await NT(S.id,S.name),i(j=>[S,...j]),l(j=>({...j,[S.id]:0})),p(!1),v({name:"",date:new Date().toISOString().split("T")[0],description:""}),it.info("Événement créé avec succès",{eventId:S.id}),D.success("Événement créé avec succès"),t("/photos",{state:{event:S}})}catch(S){it.error("Erreur lors de la création de l'événement",S),h("Impossible de créer l'événement"),D.error("Impossible de créer l'événement"),p(!1)}},g=S=>{n.role==="admin"||S.created_by===n.id?(it.info("Sélection d'un événement",{eventId:S.id}),typeof e=="function"?e(S):t("/photos",{state:{event:S}})):(it.warn("Accès non autorisé à l'événement",{eventId:S.id}),h("Vous n'avez pas accès à cet événement"),D.error("Vous n'avez pas accès à cet événement"))},x=async()=>{it.info("Déconnexion"),await r(),t("/login")};return a?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsx(mo,{className:"w-8 h-8 text-purple-600 animate-spin"})}):d.jsx(Bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-gray-50 p-8",children:d.jsxs("div",{className:"max-w-6xl mx-auto",children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:n.role==="admin"?"Tous les événements":"Vos événements"}),u&&d.jsx("p",{className:"text-red-600 text-sm mt-2",children:u})]}),d.jsxs("div",{className:"flex items-center space-x-4",children:[n.role==="admin"&&d.jsxs("button",{onClick:()=>t("/admin"),className:"flex items-center space-x-2 px-4 py-2 bg-purple-100 text-purple-700 hover:bg-purple-200 rounded-md transition-colors",children:[d.jsx(gh,{className:"w-5 h-5"}),d.jsx("span",{children:"Tableau de bord admin"})]}),d.jsxs("button",{onClick:x,className:"flex items-center space-x-2 px-4 py-2 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:[d.jsx(wy,{className:"w-5 h-5"}),d.jsx("span",{children:"Déconnexion"})]})]})]}),d.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[s.map(S=>d.jsxs(Bt.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>g(S),className:"bg-white p-6 rounded-xl shadow-sm hover:shadow-md transition-shadow text-left",children:[d.jsxs("div",{className:"flex items-start justify-between mb-4",children:[d.jsx(ik,{className:"w-8 h-8 text-purple-600"}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[d.jsx(yy,{className:"w-4 h-4"}),d.jsxs("span",{children:[o[S.id]||0," photos"]})]}),n.role==="admin"&&S.created_by!==n.id&&d.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs",children:"Autre utilisateur"})]})]}),d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:S.name}),d.jsx("p",{className:"text-sm text-gray-500",children:new Date(S.date).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})}),S.description&&d.jsx("p",{className:"mt-2 text-sm text-gray-600 line-clamp-2",children:S.description})]},S.id)),d.jsx(Bt.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-purple-50 p-6 rounded-xl border-2 border-dashed border-purple-200 hover:border-purple-300 transition-colors",children:f?d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom de l'événement"}),d.jsx("input",{type:"text",placeholder:"Ex: Mariage Julie & Thomas",value:m.name,onChange:S=>v({...m,name:S.target.value}),className:"w-full px-3 py-2 border border-purple-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),d.jsx("input",{type:"date",value:m.date,onChange:S=>v({...m,date:S.target.value}),className:"w-full px-3 py-2 border border-purple-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (optionnelle)"}),d.jsx("textarea",{value:m.description,onChange:S=>v({...m,description:S.target.value}),placeholder:"Ajoutez une description...",rows:3,className:"w-full px-3 py-2 border border-purple-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),d.jsxs("div",{className:"flex gap-2 pt-2",children:[d.jsx("button",{onClick:y,disabled:!m.name.trim(),className:"flex-1 bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Créer l'événement"}),d.jsx("button",{onClick:()=>{p(!1),v({name:"",date:new Date().toISOString().split("T")[0],description:""}),h(null)},className:"px-4 py-2 text-purple-600 hover:bg-purple-100 rounded-md transition-colors",children:"Annuler"})]})]}):d.jsxs("button",{onClick:()=>p(!0),className:"w-full h-full flex flex-col items-center justify-center py-8",children:[d.jsx(by,{className:"w-8 h-8 text-purple-600 mb-4"}),d.jsx("h3",{className:"text-lg font-semibold text-purple-600",children:"Nouvel événement"}),d.jsx("p",{className:"text-sm text-purple-500 mt-1",children:"Cliquez pour créer"})]})})]})]})})}const pm=new At("AdminDashboard");function IT(){const[e,t]=w.useState([]),[n,r]=w.useState(null),[s,i]=w.useState(!0);w.useEffect(()=>{const a=localStorage.getItem("admin_selected_event_id");a&&r(a),o()},[]);const o=async()=>{try{i(!0);const{data:a,error:c}=await z.from("events").select("*").order("created_at",{ascending:!1});if(c)throw c;t(a||[]),!n&&a&&a.length>0&&(r(a[0].id),localStorage.setItem("admin_selected_event_id",a[0].id))}catch(a){pm.error("Erreur lors du chargement des événements:",a),D.error("Erreur lors du chargement des événements")}finally{i(!1)}},l=a=>{const c=a.target.value;r(c),localStorage.setItem("admin_selected_event_id",c)};return pm.info("Rendu du tableau de bord administratif"),d.jsxs("div",{className:"min-h-screen bg-gray-100 p-6",children:[d.jsx("h1",{className:"text-3xl font-bold mb-8 text-center text-purple-800",children:"Tableau de Bord SnapBooth"}),d.jsxs("div",{className:"mb-8",children:[d.jsx("label",{htmlFor:"event-select",className:"block text-sm font-medium text-gray-700 mb-2",children:"Sélectionner un événement :"}),d.jsxs("select",{id:"event-select",value:n||"",onChange:l,className:"block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500",disabled:s||e.length===0,children:[d.jsx("option",{value:"",disabled:!0,children:"Sélectionner un événement"}),e.map(a=>d.jsx("option",{value:a.id,children:a.name},a.id))]})]}),!n&&d.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:d.jsx("p",{className:"text-yellow-700",children:"Veuillez sélectionner un événement pour accéder aux fonctionnalités."})}),n&&d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[d.jsx("div",{className:"bg-purple-700 text-white p-4",children:d.jsxs("h2",{className:"text-xl font-bold flex items-center",children:[d.jsx(Ss,{className:"mr-2"})," Écrans de Capture"]})}),d.jsxs("div",{className:"p-6 space-y-4",children:[d.jsxs(ri,{to:"/captures/verticale-1",className:"flex items-center justify-between w-full p-3 bg-purple-50 hover:bg-purple-100 rounded-md transition-colors",children:[d.jsx("span",{children:"Écran Vertical Univers"}),d.jsx("span",{className:"text-purple-700",children:"→"})]}),d.jsxs(ri,{to:"/captures/verticale-2",className:"flex items-center justify-between w-full p-3 bg-purple-50 hover:bg-purple-100 rounded-md transition-colors",children:[d.jsx("span",{children:"Écran Vertical Dessin"}),d.jsx("span",{className:"text-purple-700",children:"→"})]}),d.jsxs(ri,{to:"/captures/verticale-3",className:"flex items-center justify-between w-full p-3 bg-purple-50 hover:bg-purple-100 rounded-md transition-colors",children:[d.jsx("span",{children:"Écran Vertical Caricature"}),d.jsx("span",{className:"text-purple-700",children:"→"})]}),d.jsxs(ri,{to:"/captures/horizontale-1",className:"flex items-center justify-between w-full p-3 bg-purple-50 hover:bg-purple-100 rounded-md transition-colors",children:[d.jsx("span",{children:"Écran Horizontal Cartoon"}),d.jsx("span",{className:"text-purple-700",children:"→"})]})]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[d.jsx("div",{className:"bg-blue-600 text-white p-4",children:d.jsxs("h2",{className:"text-xl font-bold flex items-center",children:[d.jsx(fk,{className:"mr-2"})," SnapPrint & Partage"]})}),d.jsxs("div",{className:"p-6",children:[d.jsx("p",{className:"text-gray-600 mb-4",children:"Accédez à la grille de photos pour l'impression, le partage par QR code et l'envoi par email."}),d.jsxs("div",{className:"flex justify-center space-x-2 mb-4",children:[d.jsx("span",{className:"p-2 bg-blue-100 rounded-full",children:d.jsx(bl,{size:20,className:"text-blue-600"})}),d.jsx("span",{className:"p-2 bg-blue-100 rounded-full",children:d.jsx(Sy,{size:20,className:"text-blue-600"})}),d.jsx("span",{className:"p-2 bg-blue-100 rounded-full",children:d.jsx(wl,{size:20,className:"text-blue-600"})})]}),d.jsx(ri,{to:"/admin/photos",className:"block w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white text-center rounded-md transition-colors",children:"Accéder à la grille de photos"})]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[d.jsx("div",{className:"bg-gray-700 text-white p-4",children:d.jsxs("h2",{className:"text-xl font-bold flex items-center",children:[d.jsx(gh,{className:"mr-2"})," Paramètres & Configuration"]})}),d.jsxs("div",{className:"p-6",children:[d.jsx("p",{className:"text-gray-600 mb-6",children:"Configurez les paramètres de l'événement, des écrans et de l'application."}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("button",{className:"flex items-center justify-between w-full p-3 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:[d.jsx("span",{children:"Paramètres de l'événement"}),d.jsx("span",{className:"text-gray-700",children:"→"})]}),d.jsxs("button",{className:"flex items-center justify-between w-full p-3 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:[d.jsx("span",{children:"Configuration des écrans"}),d.jsx("span",{className:"text-gray-700",children:"→"})]}),d.jsxs("button",{className:"flex items-center justify-between w-full p-3 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:[d.jsx("span",{children:"Paramètres globaux"}),d.jsx("span",{className:"text-gray-700",children:"→"})]})]})]})]})]})]})}var AT=Object.defineProperty,Ga=Object.getOwnPropertySymbols,Yy=Object.prototype.hasOwnProperty,Xy=Object.prototype.propertyIsEnumerable,mm=(e,t,n)=>t in e?AT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hu=(e,t)=>{for(var n in t||(t={}))Yy.call(t,n)&&mm(e,n,t[n]);if(Ga)for(var n of Ga(t))Xy.call(t,n)&&mm(e,n,t[n]);return e},qu=(e,t)=>{var n={};for(var r in e)Yy.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Ga)for(var r of Ga(e))t.indexOf(r)<0&&Xy.call(e,r)&&(n[r]=e[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Ur;(e=>{const t=class Y{constructor(a,c,u,h){if(this.version=a,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],a<Y.MIN_VERSION||a>Y.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=a*4+17;let f=[];for(let m=0;m<this.size;m++)f.push(!1);for(let m=0;m<this.size;m++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const p=this.addEccAndInterleave(u);if(this.drawCodewords(p),h==-1){let m=1e9;for(let v=0;v<8;v++){this.applyMask(v),this.drawFormatBits(v);const b=this.getPenaltyScore();b<m&&(h=v,m=b),this.applyMask(v)}}s(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(a,c){const u=e.QrSegment.makeSegments(a);return Y.encodeSegments(u,c)}static encodeBinary(a,c){const u=e.QrSegment.makeBytes(a);return Y.encodeSegments([u],c)}static encodeSegments(a,c,u=1,h=40,f=-1,p=!0){if(!(Y.MIN_VERSION<=u&&u<=h&&h<=Y.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let m,v;for(m=u;;m++){const x=Y.getNumDataCodewords(m,c)*8,S=o.getTotalBits(a,m);if(S<=x){v=S;break}if(m>=h)throw new RangeError("Data too long")}for(const x of[Y.Ecc.MEDIUM,Y.Ecc.QUARTILE,Y.Ecc.HIGH])p&&v<=Y.getNumDataCodewords(m,x)*8&&(c=x);let b=[];for(const x of a){n(x.mode.modeBits,4,b),n(x.numChars,x.mode.numCharCountBits(m),b);for(const S of x.getData())b.push(S)}s(b.length==v);const y=Y.getNumDataCodewords(m,c)*8;s(b.length<=y),n(0,Math.min(4,y-b.length),b),n(0,(8-b.length%8)%8,b),s(b.length%8==0);for(let x=236;b.length<y;x^=253)n(x,8,b);let g=[];for(;g.length*8<b.length;)g.push(0);return b.forEach((x,S)=>g[S>>>3]|=x<<7-(S&7)),new Y(m,c,g,f)}getModule(a,c){return 0<=a&&a<this.size&&0<=c&&c<this.size&&this.modules[c][a]}getModules(){return this.modules}drawFunctionPatterns(){for(let u=0;u<this.size;u++)this.setFunctionModule(6,u,u%2==0),this.setFunctionModule(u,6,u%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const a=this.getAlignmentPatternPositions(),c=a.length;for(let u=0;u<c;u++)for(let h=0;h<c;h++)u==0&&h==0||u==0&&h==c-1||u==c-1&&h==0||this.drawAlignmentPattern(a[u],a[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(a){const c=this.errorCorrectionLevel.formatBits<<3|a;let u=c;for(let f=0;f<10;f++)u=u<<1^(u>>>9)*1335;const h=(c<<10|u)^21522;s(h>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,r(h,f));this.setFunctionModule(8,7,r(h,6)),this.setFunctionModule(8,8,r(h,7)),this.setFunctionModule(7,8,r(h,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,r(h,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,r(h,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,r(h,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let a=this.version;for(let u=0;u<12;u++)a=a<<1^(a>>>11)*7973;const c=this.version<<12|a;s(c>>>18==0);for(let u=0;u<18;u++){const h=r(c,u),f=this.size-11+u%3,p=Math.floor(u/3);this.setFunctionModule(f,p,h),this.setFunctionModule(p,f,h)}}drawFinderPattern(a,c){for(let u=-4;u<=4;u++)for(let h=-4;h<=4;h++){const f=Math.max(Math.abs(h),Math.abs(u)),p=a+h,m=c+u;0<=p&&p<this.size&&0<=m&&m<this.size&&this.setFunctionModule(p,m,f!=2&&f!=4)}}drawAlignmentPattern(a,c){for(let u=-2;u<=2;u++)for(let h=-2;h<=2;h++)this.setFunctionModule(a+h,c+u,Math.max(Math.abs(h),Math.abs(u))!=1)}setFunctionModule(a,c,u){this.modules[c][a]=u,this.isFunction[c][a]=!0}addEccAndInterleave(a){const c=this.version,u=this.errorCorrectionLevel;if(a.length!=Y.getNumDataCodewords(c,u))throw new RangeError("Invalid argument");const h=Y.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][c],f=Y.ECC_CODEWORDS_PER_BLOCK[u.ordinal][c],p=Math.floor(Y.getNumRawDataModules(c)/8),m=h-p%h,v=Math.floor(p/h);let b=[];const y=Y.reedSolomonComputeDivisor(f);for(let x=0,S=0;x<h;x++){let _=a.slice(S,S+v-f+(x<m?0:1));S+=_.length;const j=Y.reedSolomonComputeRemainder(_,y);x<m&&_.push(0),b.push(_.concat(j))}let g=[];for(let x=0;x<b[0].length;x++)b.forEach((S,_)=>{(x!=v-f||_>=m)&&g.push(S[x])});return s(g.length==p),g}drawCodewords(a){if(a.length!=Math.floor(Y.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let u=this.size-1;u>=1;u-=2){u==6&&(u=5);for(let h=0;h<this.size;h++)for(let f=0;f<2;f++){const p=u-f,v=(u+1&2)==0?this.size-1-h:h;!this.isFunction[v][p]&&c<a.length*8&&(this.modules[v][p]=r(a[c>>>3],7-(c&7)),c++)}}s(c==a.length*8)}applyMask(a){if(a<0||a>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let u=0;u<this.size;u++){let h;switch(a){case 0:h=(u+c)%2==0;break;case 1:h=c%2==0;break;case 2:h=u%3==0;break;case 3:h=(u+c)%3==0;break;case 4:h=(Math.floor(u/3)+Math.floor(c/2))%2==0;break;case 5:h=u*c%2+u*c%3==0;break;case 6:h=(u*c%2+u*c%3)%2==0;break;case 7:h=((u+c)%2+u*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][u]&&h&&(this.modules[c][u]=!this.modules[c][u])}}getPenaltyScore(){let a=0;for(let f=0;f<this.size;f++){let p=!1,m=0,v=[0,0,0,0,0,0,0];for(let b=0;b<this.size;b++)this.modules[f][b]==p?(m++,m==5?a+=Y.PENALTY_N1:m>5&&a++):(this.finderPenaltyAddHistory(m,v),p||(a+=this.finderPenaltyCountPatterns(v)*Y.PENALTY_N3),p=this.modules[f][b],m=1);a+=this.finderPenaltyTerminateAndCount(p,m,v)*Y.PENALTY_N3}for(let f=0;f<this.size;f++){let p=!1,m=0,v=[0,0,0,0,0,0,0];for(let b=0;b<this.size;b++)this.modules[b][f]==p?(m++,m==5?a+=Y.PENALTY_N1:m>5&&a++):(this.finderPenaltyAddHistory(m,v),p||(a+=this.finderPenaltyCountPatterns(v)*Y.PENALTY_N3),p=this.modules[b][f],m=1);a+=this.finderPenaltyTerminateAndCount(p,m,v)*Y.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let p=0;p<this.size-1;p++){const m=this.modules[f][p];m==this.modules[f][p+1]&&m==this.modules[f+1][p]&&m==this.modules[f+1][p+1]&&(a+=Y.PENALTY_N2)}let c=0;for(const f of this.modules)c=f.reduce((p,m)=>p+(m?1:0),c);const u=this.size*this.size,h=Math.ceil(Math.abs(c*20-u*10)/u)-1;return s(0<=h&&h<=9),a+=h*Y.PENALTY_N4,s(0<=a&&a<=2568888),a}getAlignmentPatternPositions(){if(this.version==1)return[];{const a=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(a*2-2))*2;let u=[6];for(let h=this.size-7;u.length<a;h-=c)u.splice(1,0,h);return u}}static getNumRawDataModules(a){if(a<Y.MIN_VERSION||a>Y.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*a+128)*a+64;if(a>=2){const u=Math.floor(a/7)+2;c-=(25*u-10)*u-55,a>=7&&(c-=36)}return s(208<=c&&c<=29648),c}static getNumDataCodewords(a,c){return Math.floor(Y.getNumRawDataModules(a)/8)-Y.ECC_CODEWORDS_PER_BLOCK[c.ordinal][a]*Y.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][a]}static reedSolomonComputeDivisor(a){if(a<1||a>255)throw new RangeError("Degree out of range");let c=[];for(let h=0;h<a-1;h++)c.push(0);c.push(1);let u=1;for(let h=0;h<a;h++){for(let f=0;f<c.length;f++)c[f]=Y.reedSolomonMultiply(c[f],u),f+1<c.length&&(c[f]^=c[f+1]);u=Y.reedSolomonMultiply(u,2)}return c}static reedSolomonComputeRemainder(a,c){let u=c.map(h=>0);for(const h of a){const f=h^u.shift();u.push(0),c.forEach((p,m)=>u[m]^=Y.reedSolomonMultiply(p,f))}return u}static reedSolomonMultiply(a,c){if(a>>>8||c>>>8)throw new RangeError("Byte out of range");let u=0;for(let h=7;h>=0;h--)u=u<<1^(u>>>7)*285,u^=(c>>>h&1)*a;return s(u>>>8==0),u}finderPenaltyCountPatterns(a){const c=a[1];s(c<=this.size*3);const u=c>0&&a[2]==c&&a[3]==c*3&&a[4]==c&&a[5]==c;return(u&&a[0]>=c*4&&a[6]>=c?1:0)+(u&&a[6]>=c*4&&a[0]>=c?1:0)}finderPenaltyTerminateAndCount(a,c,u){return a&&(this.finderPenaltyAddHistory(c,u),c=0),c+=this.size,this.finderPenaltyAddHistory(c,u),this.finderPenaltyCountPatterns(u)}finderPenaltyAddHistory(a,c){c[0]==0&&(a+=this.size),c.pop(),c.unshift(a)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function n(l,a,c){if(a<0||a>31||l>>>a)throw new RangeError("Value out of range");for(let u=a-1;u>=0;u--)c.push(l>>>u&1)}function r(l,a){return(l>>>a&1)!=0}function s(l){if(!l)throw new Error("Assertion error")}const i=class Se{constructor(a,c,u){if(this.mode=a,this.numChars=c,this.bitData=u,c<0)throw new RangeError("Invalid argument");this.bitData=u.slice()}static makeBytes(a){let c=[];for(const u of a)n(u,8,c);return new Se(Se.Mode.BYTE,a.length,c)}static makeNumeric(a){if(!Se.isNumeric(a))throw new RangeError("String contains non-numeric characters");let c=[];for(let u=0;u<a.length;){const h=Math.min(a.length-u,3);n(parseInt(a.substring(u,u+h),10),h*3+1,c),u+=h}return new Se(Se.Mode.NUMERIC,a.length,c)}static makeAlphanumeric(a){if(!Se.isAlphanumeric(a))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],u;for(u=0;u+2<=a.length;u+=2){let h=Se.ALPHANUMERIC_CHARSET.indexOf(a.charAt(u))*45;h+=Se.ALPHANUMERIC_CHARSET.indexOf(a.charAt(u+1)),n(h,11,c)}return u<a.length&&n(Se.ALPHANUMERIC_CHARSET.indexOf(a.charAt(u)),6,c),new Se(Se.Mode.ALPHANUMERIC,a.length,c)}static makeSegments(a){return a==""?[]:Se.isNumeric(a)?[Se.makeNumeric(a)]:Se.isAlphanumeric(a)?[Se.makeAlphanumeric(a)]:[Se.makeBytes(Se.toUtf8ByteArray(a))]}static makeEci(a){let c=[];if(a<0)throw new RangeError("ECI assignment value out of range");if(a<128)n(a,8,c);else if(a<16384)n(2,2,c),n(a,14,c);else if(a<1e6)n(6,3,c),n(a,21,c);else throw new RangeError("ECI assignment value out of range");return new Se(Se.Mode.ECI,0,c)}static isNumeric(a){return Se.NUMERIC_REGEX.test(a)}static isAlphanumeric(a){return Se.ALPHANUMERIC_REGEX.test(a)}getData(){return this.bitData.slice()}static getTotalBits(a,c){let u=0;for(const h of a){const f=h.mode.numCharCountBits(c);if(h.numChars>=1<<f)return 1/0;u+=4+f+h.bitData.length}return u}static toUtf8ByteArray(a){a=encodeURI(a);let c=[];for(let u=0;u<a.length;u++)a.charAt(u)!="%"?c.push(a.charCodeAt(u)):(c.push(parseInt(a.substring(u+1,u+3),16)),u+=2);return c}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=i;e.QrSegment=i})(Ur||(Ur={}));(e=>{(t=>{const n=class{constructor(s,i){this.ordinal=s,this.formatBits=i}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),t.Ecc=n})(e.QrCode||(e.QrCode={}))})(Ur||(Ur={}));(e=>{(t=>{const n=class{constructor(s,i){this.modeBits=s,this.numBitsCharCount=i}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),t.Mode=n})(e.QrSegment||(e.QrSegment={}))})(Ur||(Ur={}));var _s=Ur;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var MT={L:_s.QrCode.Ecc.LOW,M:_s.QrCode.Ecc.MEDIUM,Q:_s.QrCode.Ecc.QUARTILE,H:_s.QrCode.Ecc.HIGH},Zy=128,ex="L",tx="#FFFFFF",nx="#000000",rx=!1,sx=1,LT=4,OT=0,DT=.1;function ix(e,t=0){const n=[];return e.forEach(function(r,s){let i=null;r.forEach(function(o,l){if(!o&&i!==null){n.push(`M${i+t} ${s+t}h${l-i}v1H${i+t}z`),i=null;return}if(l===r.length-1){if(!o)return;i===null?n.push(`M${l+t},${s+t} h1v1H${l+t}z`):n.push(`M${i+t},${s+t} h${l+1-i}v1H${i+t}z`);return}o&&i===null&&(i=l)})}),n.join("")}function ox(e,t){return e.slice().map((n,r)=>r<t.y||r>=t.y+t.h?n:n.map((s,i)=>i<t.x||i>=t.x+t.w?s:!1))}function $T(e,t,n,r){if(r==null)return null;const s=e.length+n*2,i=Math.floor(t*DT),o=s/t,l=(r.width||i)*o,a=(r.height||i)*o,c=r.x==null?e.length/2-l/2:r.x*o,u=r.y==null?e.length/2-a/2:r.y*o,h=r.opacity==null?1:r.opacity;let f=null;if(r.excavate){let m=Math.floor(c),v=Math.floor(u),b=Math.ceil(l+c-m),y=Math.ceil(a+u-v);f={x:m,y:v,w:b,h:y}}const p=r.crossOrigin;return{x:c,y:u,h:a,w:l,excavation:f,opacity:h,crossOrigin:p}}function UT(e,t){return t!=null?Math.max(Math.floor(t),0):e?LT:OT}function ax({value:e,level:t,minVersion:n,includeMargin:r,marginSize:s,imageSettings:i,size:o,boostLevel:l}){let a=pe.useMemo(()=>{const m=(Array.isArray(e)?e:[e]).reduce((v,b)=>(v.push(..._s.QrSegment.makeSegments(b)),v),[]);return _s.QrCode.encodeSegments(m,MT[t],n,void 0,void 0,l)},[e,t,n,l]);const{cells:c,margin:u,numCells:h,calculatedImageSettings:f}=pe.useMemo(()=>{let p=a.getModules();const m=UT(r,s),v=p.length+m*2,b=$T(p,o,m,i);return{cells:p,margin:m,numCells:v,calculatedImageSettings:b}},[a,o,i,r,s]);return{qrcode:a,margin:u,cells:c,numCells:h,calculatedImageSettings:f}}var zT=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),VT=pe.forwardRef(function(t,n){const r=t,{value:s,size:i=Zy,level:o=ex,bgColor:l=tx,fgColor:a=nx,includeMargin:c=rx,minVersion:u=sx,boostLevel:h,marginSize:f,imageSettings:p}=r,v=qu(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:b}=v,y=qu(v,["style"]),g=p==null?void 0:p.src,x=pe.useRef(null),S=pe.useRef(null),_=pe.useCallback(q=>{x.current=q,typeof n=="function"?n(q):n&&(n.current=q)},[n]),[j,E]=pe.useState(!1),{margin:C,cells:M,numCells:A,calculatedImageSettings:V}=ax({value:s,level:o,minVersion:u,boostLevel:h,includeMargin:c,marginSize:f,imageSettings:p,size:i});pe.useEffect(()=>{if(x.current!=null){const q=x.current,U=q.getContext("2d");if(!U)return;let J=M;const T=S.current,k=V!=null&&T!==null&&T.complete&&T.naturalHeight!==0&&T.naturalWidth!==0;k&&V.excavation!=null&&(J=ox(M,V.excavation));const N=window.devicePixelRatio||1;q.height=q.width=i*N;const P=i/A*N;U.scale(P,P),U.fillStyle=l,U.fillRect(0,0,A,A),U.fillStyle=a,zT?U.fill(new Path2D(ix(J,C))):M.forEach(function(I,$){I.forEach(function(H,te){H&&U.fillRect(te+C,$+C,1,1)})}),V&&(U.globalAlpha=V.opacity),k&&U.drawImage(T,V.x+C,V.y+C,V.w,V.h)}}),pe.useEffect(()=>{E(!1)},[g]);const O=Hu({height:i,width:i},b);let ae=null;return g!=null&&(ae=pe.createElement("img",{src:g,key:g,style:{display:"none"},onLoad:()=>{E(!0)},ref:S,crossOrigin:V==null?void 0:V.crossOrigin})),pe.createElement(pe.Fragment,null,pe.createElement("canvas",Hu({style:O,height:i,width:i,ref:_,role:"img"},y)),ae)});VT.displayName="QRCodeCanvas";var lx=pe.forwardRef(function(t,n){const r=t,{value:s,size:i=Zy,level:o=ex,bgColor:l=tx,fgColor:a=nx,includeMargin:c=rx,minVersion:u=sx,boostLevel:h,title:f,marginSize:p,imageSettings:m}=r,v=qu(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:b,cells:y,numCells:g,calculatedImageSettings:x}=ax({value:s,level:o,minVersion:u,boostLevel:h,includeMargin:c,marginSize:p,imageSettings:m,size:i});let S=y,_=null;m!=null&&x!=null&&(x.excavation!=null&&(S=ox(y,x.excavation)),_=pe.createElement("image",{href:m.src,height:x.h,width:x.w,x:x.x+b,y:x.y+b,preserveAspectRatio:"none",opacity:x.opacity,crossOrigin:x.crossOrigin}));const j=ix(S,b);return pe.createElement("svg",Hu({height:i,width:i,viewBox:`0 0 ${g} ${g}`,ref:n,role:"img"},v),!!f&&pe.createElement("title",null,f),pe.createElement("path",{fill:l,d:`M0,0 h${g}v${g}H0z`,shapeRendering:"crispEdges"}),pe.createElement("path",{fill:a,d:j,shapeRendering:"crispEdges"}),_)});lx.displayName="QRCodeSVG";const Go=new At("Printer");async function FT(e,t=1){try{Go.info("Préparation de l'impression",{photoUrl:e,quantity:t});const n=new Image;n.style.display="none",document.body.appendChild(n),await new Promise((o,l)=>{n.onload=o,n.onerror=()=>l(new Error("Impossible de charger l'image")),n.src=e});const r=document.createElement("iframe");r.style.display="none",document.body.appendChild(r);const s=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Impression Photo</title>
          <style>
            @page {
              size: 15cm 10cm;
              margin: 0;
            }
            body {
              margin: 0;
              padding: 0;
              display: flex;
              justify-content: center;
              align-items: center;
              min-height: 100vh;
            }
            img {
              max-width: 100%;
              max-height: 100%;
              object-fit: contain;
            }
          </style>
        </head>
        <body>
          <img src="${e}" alt="Photo à imprimer">
        </body>
      </html>
    `,i=r.contentWindow.document;i.open(),i.write(s),i.close(),await new Promise(o=>{const l=i.querySelector("img");l.complete?o():l.onload=o}),Go.info("Lancement de l'impression",{quantity:t});for(let o=0;o<t;o++)r.contentWindow.print(),o<t-1&&await new Promise(l=>setTimeout(l,500));return document.body.removeChild(n),document.body.removeChild(r),Go.info("Impression terminée avec succès"),D.success(`Photo imprimée en ${t} exemplaire${t>1?"s":""}`),!0}catch(n){throw Go.error("Erreur lors de l'impression",n),D.error("Impossible d'imprimer la photo"),n}}const BT=async(e,t,n,r,s,i="original")=>{try{if(!window.showDirectoryPicker)return console.warn("L'API File System Access n'est pas disponible dans ce navigateur."),{success:!1,filePath:null,error:new Error("API non supportée")};const l=await(await fetch(e)).blob(),a=new File([l],t,{type:"image/jpeg"});let c;try{const b=localStorage.getItem("photosSaveDirectory");if(b){if(c=JSON.parse(b),await c.requestPermission({mode:"readwrite"})!=="granted")throw new Error("Permission non accordée")}else throw new Error("Aucun répertoire sauvegardé")}catch{try{c=await window.showDirectoryPicker({id:"photosSaveDirectory",startIn:"pictures",mode:"readwrite"}),localStorage.setItem("photosSaveDirectory",JSON.stringify(c))}catch(y){return console.error("Erreur lors de la sélection du répertoire:",y),{success:!1,filePath:null,error:y}}}let u;try{u=await c.getDirectoryHandle(`event_${n}`,{create:!0})}catch(b){return console.error("Erreur lors de la création du sous-répertoire d'événement:",b),{success:!1,filePath:null,error:b}}let h;try{h=await u.getDirectoryHandle(s,{create:!0})}catch(b){return console.error("Erreur lors de la création du sous-répertoire d'écran:",b),{success:!1,filePath:null,error:b}}let f;try{f=await h.getDirectoryHandle(i,{create:!0})}catch(b){return console.error(`Erreur lors de la création du sous-répertoire ${i}:`,b),{success:!1,filePath:null,error:b}}const m=await(await f.getFileHandle(t,{create:!0})).createWritable();return await m.write(a),await m.close(),{success:!0,filePath:`event_${n}/${s}/${i}/${t}`,error:null}}catch(o){return console.error("Erreur lors de la sauvegarde locale de l'image:",o),{success:!1,filePath:null,error:o}}},gm=(e,t,n="original")=>{try{const r=`${n}_${t}`,s=document.createElement("a");return s.href=e,s.download=r,s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s),{success:!0,error:null}}catch(r){return console.error("Erreur lors du téléchargement de l'image:",r),{success:!1,error:r}}},nr=async(e,t,n,r,s,i="original")=>{try{return window.showDirectoryPicker?await BT(e,t,n,r,s,i):{...gm(e,t,i),filePath:null}}catch(o){console.error("Erreur lors de la sauvegarde locale de la photo:",o);try{return{...gm(e,t,i),filePath:null}}catch(l){return console.error("Échec de la solution de secours pour le téléchargement:",l),{success:!1,filePath:null,error:l}}}},yo=({onClose:e,onSuccess:t})=>{const[n,r]=w.useState(""),[s,i]=w.useState(!1),o=l=>{l.preventDefault(),n==="12345"?t():(i(!0),setTimeout(()=>i(!1),2e3))};return d.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4",children:d.jsxs(Bt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"bg-white rounded-lg shadow-xl w-full max-w-md overflow-hidden",children:[d.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[d.jsxs("h2",{className:"text-lg font-medium text-gray-800 flex items-center gap-2",children:[d.jsx(xy,{size:18,className:"text-purple-600"}),"Accès administrateur"]}),d.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-gray-100 transition-colors",children:d.jsx(Dr,{size:20,className:"text-gray-500"})})]}),d.jsxs("form",{onSubmit:o,className:"p-6",children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mot de passe"}),d.jsx("input",{type:"password",id:"password",value:n,onChange:l=>r(l.target.value),className:`w-full px-4 py-2 border ${s?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500`,placeholder:"Entrez le mot de passe administrateur",autoFocus:!0}),s&&d.jsxs("div",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[d.jsx(mh,{size:14}),d.jsx("span",{children:"Mot de passe incorrect"})]})]}),d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Annuler"}),d.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 hover:bg-purple-700 rounded-md transition-colors",children:"Accéder"})]})]})]})})};function li({children:e,variant:t="default",size:n="default",className:r="",disabled:s=!1,onClick:i,...o}){const l="inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",a={default:"bg-purple-600 text-white hover:bg-purple-700 focus-visible:ring-purple-500",destructive:"bg-red-500 text-white hover:bg-red-600 focus-visible:ring-red-500",outline:"border border-gray-300 bg-transparent hover:bg-gray-100 focus-visible:ring-gray-400",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 focus-visible:ring-gray-400",ghost:"bg-transparent hover:bg-gray-100 focus-visible:ring-gray-400",link:"text-purple-600 underline-offset-4 hover:underline focus-visible:ring-purple-500 bg-transparent"},c={default:"h-10 px-4 py-2",sm:"h-8 px-3 text-sm",lg:"h-12 px-6 text-lg",icon:"h-10 w-10 p-0"},u=a[t]||a.default,h=c[n]||c.default;return d.jsx("button",{className:`${l} ${u} ${h} ${r}`,disabled:s,onClick:i,...o,children:e})}function Ko({className:e="",...t}){return d.jsx("div",{className:`rounded-lg border border-gray-200 bg-white shadow-sm ${e}`,...t})}function Jo({className:e="",...t}){return d.jsx("div",{className:`p-6 pt-0 ${e}`,...t})}const Sh=w.createContext({selectedTab:"",setSelectedTab:()=>{}});function WT({value:e,onValueChange:t,defaultValue:n,className:r="",children:s,...i}){const[o,l]=w.useState(e||n||""),a=c=>{l(c),t&&t(c)};return d.jsx(Sh.Provider,{value:{selectedTab:o,setSelectedTab:a},children:d.jsx("div",{className:`w-full ${r}`,...i,children:s})})}function HT({className:e="",...t}){return d.jsx("div",{className:`inline-flex h-10 items-center justify-center rounded-md bg-gray-100 p-1 ${e}`,role:"tablist",...t})}function qT({value:e,className:t="",children:n,...r}){const{selectedTab:s,setSelectedTab:i}=w.useContext(Sh),o=s===e;return d.jsx("button",{role:"tab","aria-selected":o,"data-state":o?"active":"inactive",className:`inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-400 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ${o?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-900"} ${t}`,onClick:()=>i(e),...r,children:n})}function GT({value:e,className:t="",children:n,...r}){const{selectedTab:s}=w.useContext(Sh),i=s===e;return i?d.jsx("div",{role:"tabpanel","data-state":i?"active":"inactive",className:`mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-400 focus-visible:ring-offset-2 ${t}`,...r,children:n}):null}function KT({className:e="",type:t="text",disabled:n=!1,...r}){return d.jsx("input",{type:t,className:`flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-purple-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${e}`,disabled:n,...r})}function gr({className:e="",htmlFor:t,disabled:n=!1,...r}){return d.jsx("label",{htmlFor:t,className:`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${n?"opacity-70 cursor-not-allowed":""} ${e}`,...r})}function xo({onClose:e,initialEventId:t}){var U,J;const[n,r]=w.useState([]),[s,i]=w.useState(t||null),[o,l]=w.useState(""),[a,c]=w.useState({}),[u,h]=w.useState({show:!1,type:"",message:""}),[f,p]=w.useState(!1),[m,v]=w.useState({totalPhotos:0,activeEvents:0,screenUsage:{vertical_1:0,vertical_2:0,vertical_3:0,horizontal:0},filterUsage:{}}),[b,y]=w.useState(null),g=(T,k)=>{h({show:!0,type:T,message:k}),setTimeout(()=>{h({show:!1,type:"",message:""})},3e3)},x=["vertical_1","vertical_2","vertical_3","horizontal"],S={vertical_1:"1080 x 1920",vertical_2:"1080 x 1920",vertical_3:"1080 x 1920",horizontal:"1920 x 1080"},_={cartoon:["Cartoon1","Cartoon2"],dessin:["Sketch1","Sketch2"],univers:["Galaxy","Space"],caricature:["Big Nose","Funny Face"]};w.useEffect(()=>{(async()=>{const{data:k}=await z.from("events").select("id, name");k&&(r(k),v(N=>({...N,activeEvents:k.length})))})(),j()},[]);const j=async()=>{try{const{data:T,error:k}=await z.from("photos").select("id, screen_type, filter_type");if(k)throw k;const{data:N,error:P}=await z.from("events").select("id");if(P)throw P;const I={vertical_1:0,vertical_2:0,vertical_3:0,horizontal:0},$={};T&&T.length>0&&(T.forEach(H=>{H.screen_type&&I.hasOwnProperty(H.screen_type)&&I[H.screen_type]++,H.filter_type&&($[H.filter_type]=($[H.filter_type]||0)+1)}),v({totalPhotos:T.length,activeEvents:N.length,screenUsage:I,filterUsage:$}))}catch(T){console.error("Erreur lors du chargement des statistiques:",T.message),g("error",`Erreur lors du chargement des statistiques: ${T.message}`)}};w.useEffect(()=>{s&&E(s)},[s]);const E=async T=>{try{const{data:k,error:N}=await z.from("screen_settings").select("*").eq("event_id",T);if(N)throw N;const P={};k&&k.length>0&&k.forEach(I=>{P[I.screen_name]={overlay:I.overlay_url,filter:I.filter_name}}),c(P)}catch(k){console.error("Erreur lors du chargement des paramètres:",k.message),g("error","Erreur lors du chargement des paramètres")}},C=async()=>{if(!o.trim())return;p(!0);const{data:T}=await z.from("events").insert({name:o}).select();p(!1),T?(r([...n,T[0]]),l(""),g("success","Événement créé avec succès")):g("error","Erreur lors de la création de l'événement")},M=async(T,k)=>{var N;if(!(!k||!s))try{p(!0);const P=`${s}/${T}/${k.name}`,{data:I,error:$}=await z.storage.from("overlays").upload(P,k,{upsert:!0});if($)throw $;const{data:H}=z.storage.from("overlays").getPublicUrl(P);c({...a,[T]:{...a[T],overlay:H.publicUrl}}),V(T,{overlay:H.publicUrl,filter:(N=a[T])==null?void 0:N.filter}),p(!1),g("success","Image en surimpression téléchargée avec succès")}catch(P){console.error("Erreur lors du téléchargement:",P.message),p(!1),g("error","Erreur lors du téléchargement de l'image en surimpression")}},A=(T,k)=>{var N;c({...a,[T]:{...a[T],filter:k}}),V(T,{overlay:(N=a[T])==null?void 0:N.overlay,filter:k}),g("success","Filtre sélectionné avec succès")},V=async(T,k)=>{if(s)try{p(!0);const N={event_id:s,screen_name:T,overlay_url:k.overlay||null,filter_name:k.filter||null,stand_id:"main",last_updated:new Date().toISOString(),active:!0},{data:P}=await z.from("screen_settings").select("*").eq("event_id",s).eq("screen_name",T).eq("stand_id","main");P&&P.length>0?await z.from("screen_settings").update({overlay_url:k.overlay,filter_name:k.filter,last_updated:N.last_updated}).eq("event_id",s).eq("screen_name",T).eq("stand_id","main"):await z.from("screen_settings").insert(N),p(!1),g("success","Paramètres de l'écran sauvegardés avec succès"),j()}catch(N){console.error("Erreur lors de la sauvegarde des paramètres:",N.message),p(!1),g("error","Erreur lors de la sauvegarde des paramètres de l'écran")}},O=async()=>{var T;if(!s){g("info","Veuillez sélectionner un événement");return}try{p(!0),g("info","Préparation du téléchargement des photos...");const{data:k,error:N}=await z.from("photos").select("*").eq("event_id",s);if(N)throw N;const{data:P,error:I}=await z.from("photos_processed").select("*").eq("event_id",s);if(I)throw I;const $=[...(k||[]).map(ee=>({...ee,type:"original"})),...(P||[]).map(ee=>({...ee,type:"processed"}))];if(!$||$.length===0){g("info","Aucune photo disponible pour cet événement"),p(!1);return}const H=await $r(()=>import("./jszip.min-1257d9d5.js").then(ee=>ee.j),[]).then(ee=>ee.default),te=new H,Q=te.folder("photos_originales"),ne=te.folder("photos_retouchees"),je=$.map(async ee=>{try{const Je=await fetch(ee.url);if(!Je.ok)throw new Error(`Erreur HTTP: ${Je.status}`);const Fe=await Je.blob(),se=ee.url.split("/").pop()||`photo_${ee.id}.jpg`;ee.type==="original"?Q.file(se,Fe):ne.file(se,Fe)}catch(Je){console.error(`Erreur lors du téléchargement de la photo ${ee.id}:`,Je)}});await Promise.all(je);const Mt=((T=n.find(ee=>ee.id===s))==null?void 0:T.name)||"evenement",Ke=await te.generateAsync({type:"blob"}),Ne=document.createElement("a");Ne.href=URL.createObjectURL(Ke),Ne.download=`${Mt}_photos.zip`,document.body.appendChild(Ne),Ne.click(),URL.revokeObjectURL(Ne.href),document.body.removeChild(Ne),p(!1),g("success","Téléchargement des photos terminé")}catch(k){console.error("Erreur lors du téléchargement des photos:",k.message),p(!1),g("error","Erreur lors du téléchargement des photos")}},ae=T=>{y(T)},q=()=>{y(null)};return d.jsxs("div",{className:"p-6 space-y-6 bg-white rounded-lg shadow-md",children:[u.show&&d.jsxs("div",{className:`p-4 mb-4 rounded-lg ${u.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[u.type==="success"?d.jsx(vy,{className:"w-5 h-5 mr-2"}):d.jsx(mh,{className:"w-5 h-5 mr-2"}),u.message]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h1",{className:"text-4xl font-extrabold text-purple-700",children:"🎛 SNAP BOOTH - Administration"}),e&&d.jsx("button",{onClick:e,className:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 text-gray-700",children:"✕"})]}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[d.jsx(Ko,{children:d.jsxs(Jo,{className:"space-y-4 p-4",children:[d.jsx(gr,{htmlFor:"event",className:"text-purple-700 font-semibold",children:"Créer un événement"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(KT,{id:"event",placeholder:"Nom de l'événement...",value:o,onChange:T=>l(T.target.value),className:"focus:ring-purple-500"}),d.jsx(li,{className:"bg-purple-600 hover:bg-purple-700 text-white",onClick:C,disabled:f,children:"Créer"})]})]})}),d.jsx(Ko,{children:d.jsxs(Jo,{className:"space-y-4 p-4",children:[d.jsx(gr,{className:"text-purple-700 font-semibold",children:"Événements existants"}),d.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(T=>d.jsx(li,{variant:s===T.id?"default":"outline",className:s===T.id?"bg-purple-600 text-white":"border-purple-300 text-purple-700",onClick:()=>i(T.id),children:T.name},T.id))})]})})]}),d.jsx(Ko,{children:d.jsxs(Jo,{className:"space-y-4 p-4",children:[d.jsx(gr,{className:"text-purple-700 font-semibold",children:"Tableau de bord"}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-lg font-bold text-purple-700",children:"Statistiques"}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:["Total des photos : ",m.totalPhotos]}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:["Événements actifs : ",m.activeEvents]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-lg font-bold text-purple-700",children:"Utilisation des écrans"}),Object.entries(m.screenUsage).map(([T,k])=>d.jsxs("p",{className:"text-sm text-muted-foreground",children:[T.replace("_"," ")," : ",k]},T))]})]})]})}),s&&d.jsxs(WT,{defaultValue:"vertical_1",children:[d.jsx(HT,{className:"flex flex-wrap gap-2 justify-center",children:x.map(T=>d.jsxs(qT,{value:T,className:"uppercase text-sm font-medium",children:[d.jsx(Jp,{className:"inline-block mr-1 w-4 h-4"}),T.replace("_"," ")]},T))}),x.map(T=>{var k,N,P;return d.jsx(GT,{value:T,children:d.jsx(Ko,{className:"bg-gray-50",children:d.jsx(Jo,{className:"p-6 space-y-6",children:d.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsxs(gr,{className:"font-bold text-purple-700",children:["Écran : ",T.replace("_"," ").toUpperCase()]}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:["Résolution : ",S[T]]}),d.jsx(gr,{className:"text-sm font-medium text-gray-700",children:"Image PNG en surimpression"}),d.jsx("input",{type:"file",accept:"image/png",onChange:I=>M(T,I.target.files[0])}),((k=a[T])==null?void 0:k.overlay)&&d.jsx("img",{src:a[T].overlay,alt:"Miniature",className:"w-full max-w-xs border rounded"})]}),d.jsxs("div",{className:"space-y-4 col-span-2",children:[d.jsx(gr,{className:"font-bold text-purple-700",children:"Filtres artistiques"}),Object.entries(_).map(([I,$])=>d.jsxs("div",{className:"space-y-1",children:[d.jsx("h3",{className:"text-sm uppercase text-muted-foreground",children:I}),d.jsx("div",{className:"flex flex-wrap gap-2",children:$.map(H=>{var te,Q;return d.jsxs(li,{variant:((te=a[T])==null?void 0:te.filter)===H?"default":"outline",className:((Q=a[T])==null?void 0:Q.filter)===H?"bg-purple-600 text-white":"border border-purple-300 text-purple-700",onClick:()=>A(T,H),children:[d.jsx(Rk,{className:"w-4 h-4 mr-1"}),H]},H)})})]},I))]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx(gr,{className:"font-bold text-purple-700",children:"Prévisualisation"}),d.jsxs("div",{className:"relative w-full max-w-xs h-60 border rounded overflow-hidden bg-gray-100",children:[((N=a[T])==null?void 0:N.overlay)&&d.jsx("img",{src:a[T].overlay,alt:"overlay",className:"absolute inset-0 w-full h-full object-cover opacity-80"}),((P=a[T])==null?void 0:P.filter)&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-xl font-bold text-white bg-black/30",children:a[T].filter})]}),d.jsxs(li,{variant:"secondary",size:"lg",className:"bg-purple-600 text-white hover:bg-purple-700",onClick:()=>ae(T),children:[d.jsx(Jp,{className:"mr-2 w-5 h-5 inline-block"})," Prévisualisation en plein écran"]})]})]})})})},T)})]}),b&&d.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-black/50 flex items-center justify-center",children:d.jsxs("div",{className:"relative w-full max-w-3xl h-full bg-white rounded-lg shadow-md p-6",children:[d.jsx("button",{onClick:q,className:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 text-gray-700 absolute top-4 right-4",children:"✕"}),d.jsxs("div",{className:"relative w-full h-full border rounded overflow-hidden bg-gray-100",children:[((U=a[b])==null?void 0:U.overlay)&&d.jsx("img",{src:a[b].overlay,alt:"overlay",className:"absolute inset-0 w-full h-full object-cover opacity-80"}),((J=a[b])==null?void 0:J.filter)&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-3xl font-bold text-white bg-black/30",children:a[b].filter})]})]})}),s&&d.jsx("div",{className:"pt-6 text-center",children:d.jsxs(li,{variant:"secondary",size:"lg",className:"bg-purple-600 text-white hover:bg-purple-700",onClick:O,children:[d.jsx(Ti,{className:"mr-2 w-5 h-5 inline-block"})," Télécharger toutes les photos de l'événement"]})})]})}function cx({image:e,onClose:t}){const[n,r]=w.useState(1),[s,i]=w.useState(!1),[o,l]=w.useState(""),a=async()=>{try{i(!0),l("");const c=D.loading(`Impression de ${n} copie${n>1?"s":""}...`);await FT(e,n),D.update(c,`${n} copie${n>1?"s":""} imprimée${n>1?"s":""} avec succès`,"success"),setTimeout(t,1500)}catch(c){l("Erreur lors de l'impression"),D.error(`Erreur d'impression: ${c.message||"Problème inconnu"}`)}finally{i(!1)}};return d.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-auto shadow-xl",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Imprimer"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 transition-colors","aria-label":"Fermer",children:d.jsx(Dr,{size:24})})]}),d.jsx("div",{className:"mb-6 bg-gray-100 rounded-lg p-2 flex justify-center",children:d.jsx("img",{src:e,alt:"Aperçu avant impression",className:"h-48 object-contain rounded"})}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-gray-700 mb-2 font-medium",children:"Nombre de copies"}),d.jsxs("div",{className:"flex items-center justify-center gap-4",children:[d.jsx("button",{onClick:()=>r(1),className:`w-16 h-16 text-2xl rounded-full border-2 ${n===1?"border-purple-600 bg-purple-600 text-white":"border-gray-300 text-gray-600 hover:border-purple-600"}`,children:"1"}),d.jsx("button",{onClick:()=>r(2),className:`w-16 h-16 text-2xl rounded-full border-2 ${n===2?"border-purple-600 bg-purple-600 text-white":"border-gray-300 text-gray-600 hover:border-purple-600"}`,children:"2"}),d.jsx("button",{onClick:()=>r(3),className:`w-16 h-16 text-2xl rounded-full border-2 ${n===3?"border-purple-600 bg-purple-600 text-white":"border-gray-300 text-gray-600 hover:border-purple-600"}`,children:"3"})]}),d.jsxs("div",{className:"mt-4 flex items-center justify-center",children:[d.jsx("button",{onClick:()=>r(Math.max(1,n-1)),className:"bg-gray-200 hover:bg-gray-300 text-gray-700 p-2 rounded-l-md","aria-label":"Réduire le nombre de copies",children:d.jsx(wk,{size:18})}),d.jsx("div",{className:"px-6 py-2 bg-gray-100 text-gray-800 text-center min-w-[60px] font-medium",children:n}),d.jsx("button",{onClick:()=>r(n+1),className:"bg-gray-200 hover:bg-gray-300 text-gray-700 p-2 rounded-r-md","aria-label":"Augmenter le nombre de copies",children:d.jsx(by,{size:18})})]})]}),o&&d.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-md text-sm",children:o}),d.jsxs("div",{className:"flex gap-3 mt-4",children:[d.jsx("button",{onClick:t,className:"flex-1 py-3 px-4 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg transition-colors",children:"Annuler"}),d.jsx("button",{onClick:a,disabled:s,className:"flex-1 py-3 px-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors flex items-center justify-center gap-2 disabled:opacity-70 disabled:hover:bg-purple-600",children:s?d.jsxs(d.Fragment,{children:[d.jsx(mo,{size:20,className:"animate-spin"}),d.jsx("span",{children:"Impression..."})]}):d.jsxs(d.Fragment,{children:[d.jsx(bl,{size:20}),d.jsx("span",{children:"Imprimer"})]})})]})]})}const ro={_origin:"https://api.emailjs.com"},JT=(e,t="https://api.emailjs.com")=>{ro._userID=e,ro._origin=t},ux=(e,t,n)=>{if(!e)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class vm{constructor(t){this.status=t.status,this.text=t.responseText}}const dx=(e,t,n={})=>new Promise((r,s)=>{const i=new XMLHttpRequest;i.addEventListener("load",({target:o})=>{const l=new vm(o);l.status===200||l.text==="OK"?r(l):s(l)}),i.addEventListener("error",({target:o})=>{s(new vm(o))}),i.open("POST",ro._origin+e,!0),Object.keys(n).forEach(o=>{i.setRequestHeader(o,n[o])}),i.send(t)}),QT=(e,t,n,r)=>{const s=r||ro._userID;return ux(s,e,t),dx("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:s,service_id:e,template_id:t,template_params:n}),{"Content-type":"application/json"})},YT=e=>{let t;if(typeof e=="string"?t=document.querySelector(e):t=e,!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return t},XT=(e,t,n,r)=>{const s=r||ro._userID,i=YT(n);ux(s,e,t);const o=new FormData(i);return o.append("lib_version","3.2.0"),o.append("service_id",e),o.append("template_id",t),o.append("user_id",s),dx("/api/v1.0/email/send-form",o)},ZT={init:JT,send:QT,sendForm:XT};function hx({image:e,onClose:t}){const[n,r]=w.useState(""),[s,i]=w.useState(!1),[o,l]=w.useState(""),[a,c]=w.useState(!1),u=async h=>{if(h.preventDefault(),!n){l("Veuillez entrer une adresse email");return}try{i(!0),l("");const f=D.loading("Envoi de la photo par email..."),p={to_email:n,image_url:e,message:"Voici votre photo du photobooth!"};await ZT.send({}.VITE_EMAILJS_SERVICE_ID,{}.VITE_EMAILJS_TEMPLATE_ID,p,{}.VITE_EMAILJS_USER_ID),c(!0),D.update(f,"Photo envoyée avec succès!","success"),setTimeout(t,2e3)}catch(f){l("Erreur lors de l'envoi. Veuillez réessayer."),D.error(`Erreur d'envoi: ${f.message||"Problème inconnu"}`),console.error("Erreur email:",f)}finally{i(!1)}};return d.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-auto shadow-xl",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Envoyer par email"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 transition-colors","aria-label":"Fermer",children:d.jsx(Dr,{size:24})})]}),d.jsx("div",{className:"mb-6 bg-gray-100 rounded-lg p-2 flex justify-center",children:d.jsx("img",{src:e,alt:"Aperçu avant envoi",className:"h-48 object-contain rounded"})}),a?d.jsxs("div",{className:"text-center p-6",children:[d.jsx("div",{className:"w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),d.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Envoi réussi!"}),d.jsxs("p",{className:"text-gray-600 mb-4",children:["La photo a été envoyée à ",n]}),d.jsx("button",{onClick:t,className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:"Fermer"})]}):d.jsxs("form",{onSubmit:u,children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"email",className:"block text-gray-700 mb-2 font-medium",children:"Adresse email"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(wl,{size:18,className:"text-gray-400"})}),d.jsx("input",{id:"email",type:"email",value:n,onChange:h=>r(h.target.value),placeholder:"exemple@email.com",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-colors",required:!0})]}),o&&d.jsx("p",{className:"mt-2 text-sm text-red-600",children:o})]}),d.jsxs("div",{className:"flex gap-3 mt-6",children:[d.jsx("button",{type:"button",onClick:t,className:"flex-1 py-3 px-4 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg transition-colors",children:"Annuler"}),d.jsx("button",{type:"submit",disabled:s,className:"flex-1 py-3 px-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors flex items-center justify-center gap-2 disabled:opacity-70 disabled:hover:bg-purple-600",children:s?d.jsxs(d.Fragment,{children:[d.jsx(mo,{size:20,className:"animate-spin"}),d.jsx("span",{children:"Envoi..."})]}):d.jsxs(d.Fragment,{children:[d.jsx(jk,{size:20}),d.jsx("span",{children:"Envoyer"})]})})]})]})]})}function eN({photo:e,event:t,onClose:n,onQRCodeGenerated:r}){const[s,i]=w.useState("options"),[o,l]=w.useState(""),a=()=>e?`${window.location.origin}/share?photoId=${e.id}&eventId=${t.id}`:"",c=()=>{if(!e){D.warning("Veuillez sélectionner une photo à partager");return}const m=a();l(m),i("qrcode"),r&&r(m)},u=()=>{if(!e){D.warning("Veuillez sélectionner une photo à partager");return}i("email")},h=()=>{if(!e){D.warning("Veuillez sélectionner une photo à partager");return}i("print")},f=async(m="processed")=>{if(!e){D.warning("Veuillez sélectionner une photo à télécharger");return}try{const v=D.loading("Préparation du téléchargement...");let b=e.url,y=`photo_${e.id}_processed.jpg`;m==="original"&&e.original_photo_id&&(b=e.original_url||b,y=`photo_${e.id}_original.jpg`);const g=localStorage.getItem("standId")||"default",x=e.screen_type||"default",S=await nr(b,y,t.id,g,x,m);if(S.success)D.update(v,`Photo sauvegardée dans ${S.filePath}`,"success");else{const _=document.createElement("a");_.href=b,_.download=y,_.click(),D.update(v,"Téléchargement démarré","success")}}catch(v){console.error("Erreur lors du téléchargement:",v),D.error(`Erreur de téléchargement: ${v.message||"Problème inconnu"}`)}},p={hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1,transition:{duration:.3}},exit:{opacity:0,scale:.8,transition:{duration:.2}}};return d.jsx(Bt.div,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n,children:d.jsxs(Bt.div,{className:"bg-white rounded-xl shadow-2xl overflow-hidden max-w-md w-full",variants:p,initial:"hidden",animate:"visible",exit:"exit",onClick:m=>m.stopPropagation(),children:[s==="options"&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"p-6 border-b border-gray-200",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Partager la photo"}),d.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 transition-colors","aria-label":"Fermer",children:d.jsx(Dr,{size:24})})]})}),d.jsx("div",{className:"p-6",children:d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("button",{onClick:c,className:"flex flex-col items-center justify-center p-6 bg-purple-50 hover:bg-purple-100 rounded-xl transition-colors",children:[d.jsx(Sy,{size:48,className:"text-purple-600 mb-3"}),d.jsx("span",{className:"text-gray-800 font-medium",children:"QR Code"})]}),d.jsxs("button",{onClick:u,className:"flex flex-col items-center justify-center p-6 bg-blue-50 hover:bg-blue-100 rounded-xl transition-colors",children:[d.jsx(wl,{size:48,className:"text-blue-600 mb-3"}),d.jsx("span",{className:"text-gray-800 font-medium",children:"Email"})]}),d.jsxs("button",{onClick:h,className:"flex flex-col items-center justify-center p-6 bg-green-50 hover:bg-green-100 rounded-xl transition-colors",children:[d.jsx(bl,{size:48,className:"text-green-600 mb-3"}),d.jsx("span",{className:"text-gray-800 font-medium",children:"Imprimer"})]}),d.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-orange-50 hover:bg-orange-100 rounded-xl transition-colors",children:[d.jsxs("div",{className:"relative",children:[d.jsx(Ti,{size:48,className:"text-orange-600 mb-3"}),d.jsxs("div",{className:"absolute bottom-3 right-0 flex flex-col",children:[d.jsx("button",{onClick:()=>f("processed"),className:"bg-orange-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs mb-1",title:"Télécharger la photo retouchée",children:"P"}),d.jsx("button",{onClick:()=>f("original"),className:"bg-orange-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs",title:"Télécharger la photo originale",children:"O"})]})]}),d.jsx("span",{className:"text-gray-800 font-medium",children:"Télécharger"})]})]})})]}),s==="qrcode"&&d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"QR Code"}),d.jsx("button",{onClick:()=>i("options"),className:"text-gray-500 hover:text-gray-700 transition-colors","aria-label":"Retour",children:d.jsx(Dr,{size:24})})]}),d.jsxs("div",{className:"flex flex-col items-center justify-center p-4 bg-white rounded-lg border border-gray-200 mb-6",children:[d.jsx("div",{className:"bg-white p-3 rounded-lg shadow-md mb-4",children:d.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(o)}`,alt:"QR Code",className:"w-48 h-48"})}),d.jsx("p",{className:"text-sm text-gray-600 text-center mb-4",children:"Scannez ce QR code pour accéder à la photo"}),d.jsx("button",{onClick:()=>{const m=document.createElement("a");m.href=`https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(o)}`,m.download=`qrcode-photo-${e.id}.png`,m.click(),D.success("QR code téléchargé avec succès")},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Télécharger le QR Code"})]})]}),s==="email"&&d.jsx(hx,{image:e.url,onClose:()=>i("options")}),s==="print"&&d.jsx(cx,{image:e.url,onClose:()=>i("options")})]})})}const Zr=new At("PhotoGrid");function fx({event:e,onBack:t}){var T;const n=sn(),r=Kt(),{user:s,logout:i}=en(),[o,l]=w.useState(e||((T=r.state)==null?void 0:T.event)||null),[a,c]=w.useState([]),[u,h]=w.useState(!0),[f,p]=w.useState(null);w.useState(!1);const[m,v]=w.useState(!1),[b,y]=w.useState(!1),[g,x]=w.useState(!1);w.useState(""),w.useState(1),w.useState(!1),w.useState(!1);const[S,_]=w.useState(!1),[j,E]=w.useState(!1),[C,M]=w.useState(!1),[A,V]=w.useState(!1);w.useEffect(()=>{(async()=>{if(!o)try{const N=localStorage.getItem("standId");if(!N){D.error("Aucun stand configuré"),n("/config");return}const{data:P,error:I}=await z.from("events").select("*").eq("stand_id",N).eq("active",!0).single();if(I)throw I;P?(l(P),Zr.info("Événement actif récupéré",{eventId:P.id,eventName:P.name})):(D.warning("Aucun événement actif trouvé"),n("/events"))}catch(N){Zr.error("Erreur lors de la récupération de l'événement actif",N),D.error("Impossible de récupérer l'événement actif"),n("/events")}})()},[n]),w.useEffect(()=>{if(!(o!=null&&o.id))return;(async()=>{try{h(!0),Zr.info("Chargement des photos",{eventId:o.id});const{data:P,error:I}=await z.from("photos").select("*").eq("event_id",o.id).order("created_at",{ascending:!1});if(I)throw I;c(P||[]),Zr.info("Photos chargées",{count:P==null?void 0:P.length})}catch(P){Zr.error("Erreur lors du chargement des photos",P),D.error("Impossible de charger les photos")}finally{h(!1)}})();const N=z.channel("photos_changes").on("postgres_changes",{event:"*",schema:"public",table:"photos",filter:`event_id=eq.${o.id}`},P=>{Zr.debug("Changement en temps réel reçu",P),P.eventType==="INSERT"?c(I=>[P.new,...I]):P.eventType==="DELETE"&&c(I=>I.filter($=>$.id!==P.old.id))}).subscribe();return()=>{N.unsubscribe()}},[o,n]);const O=()=>{if(!f){D.warning("Veuillez sélectionner une photo à partager");return}v(!0)},ae=()=>{v(!1)},q=k=>{},U=async(k,N="processed")=>{if(!k){D.warning("Veuillez sélectionner une photo à télécharger");return}try{const P=D.loading("Préparation du téléchargement...");let I=k.url,$=`photo_${k.id}_processed.jpg`;if(N==="original"){const{data:ne,error:je}=await z.from("photos").select("*").eq("id",k.original_photo_id||k.id).single();if(je)throw je;ne&&(I=ne.url,$=`photo_${ne.id}_original.jpg`)}const H=localStorage.getItem("standId")||"default",te=k.screen_type||"default",Q=await nr(I,$,o.id,H,te,N);if(Q.success)D.update(P,`Photo sauvegardée dans ${Q.filePath}`,"success");else{const ne=document.createElement("a");ne.href=I,ne.download=$,ne.click(),D.update(P,"Téléchargement démarré","success")}}catch(P){console.error("Erreur lors du téléchargement:",P),D.error(`Erreur de téléchargement: ${P.message||"Problème inconnu"}`)}},J=()=>d.jsxs("div",{className:"mb-8 bg-white p-6 rounded-xl shadow-sm",children:[d.jsxs("h2",{className:"text-xl font-bold mb-4 text-gray-900 flex items-center",children:[d.jsx(Ss,{className:"w-5 h-5 mr-2 text-purple-600"}),"Écrans de Capture"]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsxs("button",{onClick:()=>n("/captures/verticale-1"),className:"flex items-center justify-between w-full p-3 bg-purple-50 hover:bg-purple-100 rounded-md transition-colors",children:[d.jsx("span",{children:"Écran Vertical Univers"}),d.jsx("span",{className:"text-purple-700",children:"→"})]}),d.jsxs("button",{onClick:()=>n("/captures/verticale-2"),className:"flex items-center justify-between w-full p-3 bg-purple-50 hover:bg-purple-100 rounded-md transition-colors",children:[d.jsx("span",{children:"Écran Vertical Dessin"}),d.jsx("span",{className:"text-purple-700",children:"→"})]}),d.jsxs("button",{onClick:()=>n("/captures/verticale-3"),className:"flex items-center justify-between w-full p-3 bg-purple-50 hover:bg-purple-100 rounded-md transition-colors",children:[d.jsx("span",{children:"Écran Vertical Caricature"}),d.jsx("span",{className:"text-purple-700",children:"→"})]}),d.jsxs("button",{onClick:()=>n("/captures/horizontale-1"),className:"flex items-center justify-between w-full p-3 bg-purple-50 hover:bg-purple-100 rounded-md transition-colors",children:[d.jsx("span",{children:"Écran Horizontal Cartoon"}),d.jsx("span",{className:"text-purple-700",children:"→"})]})]})]});return d.jsxs("div",{className:"min-h-screen bg-gray-100 flex flex-col",children:[d.jsx("header",{className:"bg-white shadow-md p-4",children:d.jsxs("div",{className:"container mx-auto flex flex-wrap items-center justify-between gap-2",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("button",{onClick:t||(()=>n("/events")),className:"bg-gray-100 hover:bg-gray-200 text-gray-700 p-2 rounded-full",children:d.jsx(rk,{size:24})}),d.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 truncate max-w-[200px] sm:max-w-xs",children:(o==null?void 0:o.name)||"Photos"})]}),d.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-end",children:[(s==null?void 0:s.role)==="admin"&&d.jsxs("button",{onClick:()=>E(!0),className:"bg-purple-100 text-purple-700 hover:bg-purple-200 px-3 py-1.5 rounded-md flex items-center gap-1.5",children:[d.jsx(gh,{size:18}),d.jsx("span",{className:"hidden sm:inline",children:"Administration"})]}),d.jsxs("button",{onClick:()=>n("/captures"),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 rounded-md flex items-center gap-1.5",children:[d.jsx(Ss,{size:18}),d.jsx("span",{className:"hidden sm:inline",children:"Prendre des photos"})]}),d.jsxs("div",{className:"relative",children:[d.jsxs("button",{onClick:()=>V(!A),className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1.5 rounded-md flex items-center gap-1.5",children:[d.jsx(Ss,{size:18}),d.jsx("span",{className:"hidden sm:inline",children:"Écrans de capture"}),d.jsx(lk,{size:16})]}),A&&d.jsx("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-md shadow-lg z-50",children:d.jsxs("div",{className:"py-1",children:[d.jsx("button",{onClick:()=>{n("/captures/verticale-1"),V(!1)},className:"block w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100",children:"Écran Vertical Univers"}),d.jsx("button",{onClick:()=>{n("/captures/verticale-2"),V(!1)},className:"block w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100",children:"Écran Vertical Dessin"}),d.jsx("button",{onClick:()=>{n("/captures/verticale-3"),V(!1)},className:"block w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100",children:"Écran Vertical Caricature"}),d.jsx("button",{onClick:()=>{n("/captures/horizontale-1"),V(!1)},className:"block w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100",children:"Écran Horizontal Cartoon"})]})})]}),d.jsxs("button",{onClick:()=>i().then(()=>n("/login")),className:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-3 py-1.5 rounded-md flex items-center gap-1.5",children:[d.jsx(wy,{size:18}),d.jsx("span",{className:"hidden sm:inline",children:"Déconnexion"})]})]})]})}),d.jsx("main",{className:"flex-1 container mx-auto p-4",children:u?d.jsx("div",{className:"flex items-center justify-center h-64",children:d.jsx(mo,{size:40,className:"animate-spin text-purple-600"})}):a.length===0?d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[d.jsx(yy,{size:48,className:"mx-auto text-gray-400 mb-4"}),d.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Aucune photo disponible"}),d.jsx("p",{className:"text-gray-500 mb-6",children:"Aucune photo n'a été prise pour cet événement ou elles sont en cours de traitement."}),d.jsxs("button",{onClick:()=>n("/captures"),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md inline-flex items-center gap-2",children:[d.jsx(Ss,{size:20}),d.jsx("span",{children:"Prendre des photos"})]})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 mb-8",children:a.map(k=>d.jsx(Bt.div,{layoutId:`photo-${k.id}`,className:`relative aspect-square rounded-lg overflow-hidden shadow-md cursor-pointer transition-transform hover:scale-[1.02] ${(f==null?void 0:f.id)===k.id?"ring-4 ring-purple-500":""}`,onClick:()=>p(k),children:d.jsx("img",{src:k.url,alt:`Photo ${k.id}`,className:"w-full h-full object-cover",loading:"lazy"})},k.id))}),!S&&J()]})}),f&&d.jsx(Bt.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg p-4 z-10",children:d.jsxs("div",{className:"container mx-auto flex flex-wrap justify-between items-center gap-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden",children:d.jsx("img",{src:f.url,alt:"Sélectionnée",className:"w-full h-full object-cover"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-800",children:"Photo sélectionnée"}),d.jsx("p",{className:"text-sm text-gray-500",children:new Date(f.created_at).toLocaleString()})]})]}),d.jsxs("div",{className:"flex flex-wrap gap-2 justify-end",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[d.jsxs("button",{onClick:()=>U(f,"processed"),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-md flex items-center gap-1.5",children:[d.jsx(Ti,{size:18}),d.jsx("span",{className:"hidden sm:inline",children:"Photo retouchée"})]}),d.jsxs("button",{onClick:()=>U(f,"original"),className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded-md flex items-center gap-1.5",children:[d.jsx(Ti,{size:18}),d.jsx("span",{className:"hidden sm:inline",children:"Photo originale"})]})]}),d.jsxs("button",{onClick:()=>{const k=document.createElement("a");k.href=f.url,k.download=`photo_${f.id}.jpg`,k.click(),D.success("Téléchargement démarré")},className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-md flex items-center gap-1.5",children:[d.jsx(Ti,{size:18}),d.jsx("span",{className:"hidden sm:inline",children:"Télécharger"})]}),d.jsxs("button",{onClick:()=>x(!0),className:"bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded-md flex items-center gap-1.5",children:[d.jsx(bl,{size:18}),d.jsx("span",{className:"hidden sm:inline",children:"Imprimer"})]}),d.jsxs("button",{onClick:()=>y(!0),className:"bg-orange-600 hover:bg-orange-700 text-white px-3 py-2 rounded-md flex items-center gap-1.5",children:[d.jsx(wl,{size:18}),d.jsx("span",{className:"hidden sm:inline",children:"Envoyer par email"})]}),d.jsxs("button",{onClick:O,className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded-md flex items-center gap-1.5",children:[d.jsx(Pk,{size:18}),d.jsx("span",{children:"Partager"})]}),d.jsxs("button",{onClick:()=>p(null),className:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-3 py-2 rounded-md flex items-center gap-1.5",children:[d.jsx(Dr,{size:18}),d.jsx("span",{className:"hidden sm:inline",children:"Fermer"})]})]})]})}),d.jsxs(my,{children:[m&&f&&d.jsx(eN,{photo:f,event:o,onClose:ae,onQRCodeGenerated:q}),b&&f&&d.jsx(Bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:d.jsx(hx,{image:f.url,onClose:()=>y(!1)})}),g&&f&&d.jsx(Bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:d.jsx(cx,{image:f.url,onClose:()=>x(!1)})}),j&&d.jsx(yo,{onSuccess:()=>{E(!1),M(!0)},onCancel:()=>E(!1)})]}),C&&d.jsxs("div",{className:"fixed inset-0 bg-white z-50 overflow-auto",children:[d.jsxs("div",{className:"p-4 bg-purple-700 text-white flex justify-between items-center",children:[d.jsx("h2",{className:"text-xl font-bold",children:"Administration"}),d.jsx("button",{onClick:()=>M(!1),className:"bg-purple-800 hover:bg-purple-900 p-2 rounded-full",children:d.jsx(Dr,{size:24})})]}),d.jsx(xo,{initialEventId:o==null?void 0:o.id})]}),S&&d.jsxs("div",{className:"fixed inset-0 bg-black/80 flex flex-col items-center justify-center z-[100]",children:[d.jsx(xy,{size:64,className:"text-white mb-4"}),d.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Interface verrouillée"}),d.jsx("p",{className:"text-white mb-6",children:"Cette interface est actuellement verrouillée"}),d.jsx("button",{onClick:()=>E(!0),className:"bg-white text-purple-700 px-4 py-2 rounded-md font-semibold",children:"Déverrouiller"})]})]})}const es=new At("EventPhotosManager");function tN(){const[e,t]=w.useState(null),[n,r]=w.useState(!0),[s,i]=w.useState(null);en();const o=sn(),l=Kt();w.useEffect(()=>{(async()=>{try{r(!0);const u=localStorage.getItem("standId")||null;if(u){const{data:h,error:f}=await z.from("stands").select("*, events(*)").eq("id",u).single();f?es.error("Erreur lors de la récupération du stand:",f):h&&h.events&&(i(h.events),es.info("Événement actif récupéré:",h.events))}}catch(u){es.error("Erreur lors de la récupération de l'événement actif:",u)}finally{r(!1)}})()},[]),w.useEffect(()=>{var c;(c=l.state)!=null&&c.event?(t(l.state.event),es.info("Événement reçu via location state:",l.state.event)):s&&(t(s),es.info("Utilisation de l'événement actif:",s))},[l.state,s]);const a=()=>{o("/events"),es.info("Navigation vers la liste des événements")};return n?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):e?d.jsx("div",{className:"min-h-screen bg-gray-50",children:d.jsx(fx,{event:e,onBack:a})}):(o("/events"),null)}var px={exports:{}};(function(e,t){(function(r,s){e.exports=s(w)})(yt,function(n){return function(r){var s={};function i(o){if(s[o])return s[o].exports;var l=s[o]={i:o,l:!1,exports:{}};return r[o].call(l.exports,l,l.exports,i),l.l=!0,l.exports}return i.m=r,i.c=s,i.d=function(o,l,a){i.o(o,l)||Object.defineProperty(o,l,{enumerable:!0,get:a})},i.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.t=function(o,l){if(l&1&&(o=i(o)),l&8||l&4&&typeof o=="object"&&o&&o.__esModule)return o;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:o}),l&2&&typeof o!="string")for(var c in o)i.d(a,c,(function(u){return o[u]}).bind(null,c));return a},i.n=function(o){var l=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(l,"a",l),l},i.o=function(o,l){return Object.prototype.hasOwnProperty.call(o,l)},i.p="",i(i.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(r,s,i){i.r(s);var o=i("react"),l=function(){var f=function(p,m){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,b){v.__proto__=b}||function(v,b){for(var y in b)b.hasOwnProperty(y)&&(v[y]=b[y])},f(p,m)};return function(p,m){f(p,m);function v(){this.constructor=p}p.prototype=m===null?Object.create(m):(v.prototype=m.prototype,new v)}}(),a=function(){return a=Object.assign||function(f){for(var p,m=1,v=arguments.length;m<v;m++){p=arguments[m];for(var b in p)Object.prototype.hasOwnProperty.call(p,b)&&(f[b]=p[b])}return f},a.apply(this,arguments)},c=function(f,p){var m={};for(var v in f)Object.prototype.hasOwnProperty.call(f,v)&&p.indexOf(v)<0&&(m[v]=f[v]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,v=Object.getOwnPropertySymbols(f);b<v.length;b++)p.indexOf(v[b])<0&&Object.prototype.propertyIsEnumerable.call(f,v[b])&&(m[v[b]]=f[v[b]]);return m};(function(){typeof window>"u"||(navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(p){var m=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return m?new Promise(function(v,b){m.call(navigator,p,v,b)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}))})();function u(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}var h=function(f){l(p,f);function p(m){var v=f.call(this,m)||this;return v.canvas=null,v.ctx=null,v.requestUserMediaId=0,v.unmounted=!1,v.state={hasUserMedia:!1},v}return p.prototype.componentDidMount=function(){var m=this,v=m.state,b=m.props;if(this.unmounted=!1,!u()){b.onUserMediaError("getUserMedia not supported");return}v.hasUserMedia||this.requestUserMedia(),b.children&&typeof b.children!="function"&&console.warn("children must be a function")},p.prototype.componentDidUpdate=function(m){var v=this.props;if(!u()){v.onUserMediaError("getUserMedia not supported");return}var b=JSON.stringify(m.audioConstraints)!==JSON.stringify(v.audioConstraints),y=JSON.stringify(m.videoConstraints)!==JSON.stringify(v.videoConstraints),g=m.minScreenshotWidth!==v.minScreenshotWidth,x=m.minScreenshotHeight!==v.minScreenshotHeight;(y||g||x)&&(this.canvas=null,this.ctx=null),(b||y)&&(this.stopAndCleanup(),this.requestUserMedia())},p.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},p.stopMediaStream=function(m){m&&(m.getVideoTracks&&m.getAudioTracks?(m.getVideoTracks().map(function(v){m.removeTrack(v),v.stop()}),m.getAudioTracks().map(function(v){m.removeTrack(v),v.stop()})):m.stop())},p.prototype.stopAndCleanup=function(){var m=this.state;m.hasUserMedia&&(p.stopMediaStream(this.stream),m.src&&window.URL.revokeObjectURL(m.src))},p.prototype.getScreenshot=function(m){var v=this,b=v.state,y=v.props;if(!b.hasUserMedia)return null;var g=this.getCanvas(m);return g&&g.toDataURL(y.screenshotFormat,y.screenshotQuality)},p.prototype.getCanvas=function(m){var v=this,b=v.state,y=v.props;if(!this.video||!b.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var g=this.video.videoWidth,x=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var S=g/x;g=y.minScreenshotWidth||this.video.clientWidth,x=g/S,y.minScreenshotHeight&&x<y.minScreenshotHeight&&(x=y.minScreenshotHeight,g=x*S)}this.canvas=document.createElement("canvas"),this.canvas.width=(m==null?void 0:m.width)||g,this.canvas.height=(m==null?void 0:m.height)||x,this.ctx=this.canvas.getContext("2d")}var _=this,j=_.ctx,E=_.canvas;return j&&E&&(E.width=(m==null?void 0:m.width)||E.width,E.height=(m==null?void 0:m.height)||E.height,y.mirrored&&(j.translate(E.width,0),j.scale(-1,1)),j.imageSmoothingEnabled=y.imageSmoothing,j.drawImage(this.video,0,0,(m==null?void 0:m.width)||E.width,(m==null?void 0:m.height)||E.height),y.mirrored&&(j.scale(-1,1),j.translate(-E.width,0))),E},p.prototype.requestUserMedia=function(){var m=this,v=this.props,b=function(x,S){var _={video:typeof S<"u"?S:!0};v.audio&&(_.audio=typeof x<"u"?x:!0),m.requestUserMediaId++;var j=m.requestUserMediaId;navigator.mediaDevices.getUserMedia(_).then(function(E){m.unmounted||j!==m.requestUserMediaId?p.stopMediaStream(E):m.handleUserMedia(null,E)}).catch(function(E){m.handleUserMedia(E)})};if("mediaDevices"in navigator)b(v.audioConstraints,v.videoConstraints);else{var y=function(x){return{optional:[{sourceId:x}]}},g=function(x){var S=x.deviceId;return typeof S=="string"?S:Array.isArray(S)&&S.length>0?S[0]:typeof S=="object"&&S.ideal?S.ideal:null};MediaStreamTrack.getSources(function(x){var S=null,_=null;x.forEach(function(C){C.kind==="audio"?S=C.id:C.kind==="video"&&(_=C.id)});var j=g(v.audioConstraints);j&&(S=j);var E=g(v.videoConstraints);E&&(_=E),b(y(S),y(_))})}},p.prototype.handleUserMedia=function(m,v){var b=this.props;if(m||!v){this.setState({hasUserMedia:!1}),b.onUserMediaError(m);return}this.stream=v;try{this.video&&(this.video.srcObject=v),this.setState({hasUserMedia:!0})}catch{this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(v)})}b.onUserMedia(v)},p.prototype.render=function(){var m=this,v=this,b=v.state,y=v.props,g=y.audio;y.forceScreenshotSourceSize;var x=y.disablePictureInPicture;y.onUserMedia,y.onUserMediaError,y.screenshotFormat,y.screenshotQuality,y.minScreenshotWidth,y.minScreenshotHeight,y.audioConstraints,y.videoConstraints,y.imageSmoothing;var S=y.mirrored,_=y.style,j=_===void 0?{}:_,E=y.children,C=c(y,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),M=S?a(a({},j),{transform:(j.transform||"")+" scaleX(-1)"}):j,A={getScreenshot:this.getScreenshot.bind(this)};return o.createElement(o.Fragment,null,o.createElement("video",a({autoPlay:!0,disablePictureInPicture:x,src:b.src,muted:!g,playsInline:!0,ref:function(V){m.video=V},style:M},C)),E&&E(A))},p.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},p}(o.Component);s.default=h},react:function(r,s){r.exports=n}}).default})})(px);var nN=px.exports;const Nl=Ku(nN);function Gt(){return d.jsxs("div",{className:"flex items-center justify-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-purple-500"}),d.jsx("span",{className:"ml-3 text-white text-lg",children:"Traitement en cours..."})]})}const Rl=({value:e,size:t=128})=>d.jsx("div",{className:"flex justify-center items-center",children:d.jsx(lx,{value:e,size:t,bgColor:"#ffffff",fgColor:"#000000",level:"L"})});function wo(){try{const e=localStorage.getItem("currentStandId");return e||"stand-1"}catch(e){return console.error("Erreur lors de la récupération de l'ID du stand:",e),"stand-1"}}function rN(e){return{"stand-1":"vertical_1","stand-2":"vertical_2","stand-3":"vertical_3","stand-4":"horizontale_1"}[e]||"vertical_1"}function sN(e){const t=rN(e),n={vertical_1:{width:1080,height:1920,name:"Écran Vertical Univers",defaultFilter:"EffectUnivers",captureButtonText:"Devenir une étoile",resultText:"Votre photo avec effet Univers"},vertical_2:{width:1080,height:1920,name:"Écran Vertical Dessin",defaultFilter:"EffectDessin",captureButtonText:"Devenir un dessin",resultText:"Votre photo avec effet Dessin"},vertical_3:{width:1080,height:1920,name:"Écran Vertical Caricature",defaultFilter:"EffectCaricature",captureButtonText:"Devenir une caricature",resultText:"Votre photo avec effet Caricature"},horizontale_1:{width:1920,height:1080,name:"Écran Horizontal Cartoon",defaultFilter:"EffectCartoon",captureButtonText:"Devenir un cartoon",resultText:"Votre photo avec effet Cartoon"}};return n[t]||n.vertical_1}function Il(){const[e,t]=w.useState({width:1080,height:1920,name:"Écran par défaut",defaultFilter:"EffectUnivers",captureButtonText:"Prendre une photo",resultText:"Votre photo"});return w.useEffect(()=>{const n=wo(),r=sN(n);t(r)},[]),e}const iN=({image:e,onProcessed:t})=>{const n=w.useRef(null);w.useEffect(()=>{if(!e)return;(async()=>{const l=new Image;l.crossOrigin="Anonymous",l.src=e,l.onload=()=>{const a=n.current,c=a.getContext("2d");a.width=l.width,a.height=l.height,c.drawImage(l,0,0,l.width,l.height),r(c,a.width,a.height);const u=a.toDataURL("image/jpeg");t(u)}})()},[e,t]);const r=(o,l,a)=>{const c=o.getImageData(0,0,l,a),u=c.data;for(let h=0;h<u.length;h+=4)u[h]=Math.min(255,u[h]*.8),u[h+1]=Math.min(255,u[h+1]*.6),u[h+2]=Math.min(255,u[h+2]*1.3);s(u,l,a),i(u,l,a),o.putImageData(c,0,0)},s=(o,l,a)=>{const c=Math.floor(l*a*.001);for(let u=0;u<c;u++){const h=Math.floor(Math.random()*l),f=Math.floor(Math.random()*a),p=(f*l+h)*4;if(o[p]=255,o[p+1]=255,o[p+2]=255,Math.random()>.7){const m=Math.floor(Math.random()*3)+1;for(let v=-m;v<=m;v++)for(let b=-m;b<=m;b++){if(b===0&&v===0)continue;const y=h+b,g=f+v;if(y>=0&&y<l&&g>=0&&g<a){const x=(g*l+y)*4,_=1-Math.sqrt(b*b+v*v)/(m+1);o[x]=Math.min(255,o[x]+200*_),o[x+1]=Math.min(255,o[x+1]+200*_),o[x+2]=Math.min(255,o[x+2]+200*_)}}}}},i=(o,l,a)=>{const c=l/2,u=a/2,h=Math.sqrt(c*c+u*u);for(let f=0;f<a;f++)for(let p=0;p<l;p++){const m=(f*l+p)*4,v=p-c,b=f-u,y=Math.sqrt(v*v+b*b),g=Math.pow(1-y/h,2);o[m]=o[m]*g,o[m+1]=o[m+1]*g,o[m+2]=o[m+2]*g}};return d.jsx("div",{style:{display:"none"},children:d.jsx("canvas",{ref:n})})},Xe=new At("CaptureStations"),ss=async(e,t,n,r=null)=>{try{Xe.info(`Mise à jour du statut de la station ${e}`,{eventId:t,status:n,standId:r});const{data:s,error:i}=await z.from("capture_stations").select("*").eq("screen_type",e).eq("event_id",t).maybeSingle();if(i)throw i;const o=new Date().toISOString();if(s){const{error:l}=await z.from("capture_stations").update({status:n,last_active:o,stand_id:r||s.stand_id}).eq("id",s.id);if(l)throw l}else{const{error:l}=await z.from("capture_stations").insert([{screen_type:e,event_id:t,status:n,last_active:o,stand_id:r}]);if(l)throw l}return Xe.info(`Statut de la station ${e} mis à jour avec succès`),{success:!0}}catch(s){return Xe.error(`Erreur lors de la mise à jour du statut de la station ${e}`,s),{success:!1,error:s}}},mx=async(e,t=null)=>{try{Xe.info(`Récupération des commandes en attente pour la station ${e}`,{eventId:t});const{data:{session:n}}=await z.auth.getSession();if(!n)return Xe.error("Utilisateur non authentifié lors de la récupération des commandes"),{commands:[],error:new Error("Utilisateur non authentifié")};if(Xe.info(`Utilisateur authentifié: ${n.user.id}`),!e)return Xe.error("standId non défini lors de la récupération des commandes"),{commands:[],error:new Error("standId non défini")};let r=z.from("capture_commands").select("*").eq("stand_id",e).eq("status","pending").order("created_at",{ascending:!0});t&&(r=r.eq("event_id",t)),Xe.info(`Exécution de la requête: ${JSON.stringify(r)}`);const{data:s,error:i}=await r;if(i)throw Xe.error(`Erreur Supabase lors de la récupération des commandes: ${i.message}`,i),i;return Xe.info(`${s?s.length:0} commandes récupérées`),s&&s.length>0&&Xe.info(`Première commande: ${JSON.stringify(s[0])}`),{commands:s||[]}}catch(n){return Xe.error(`Erreur lors de la récupération des commandes pour la station ${e}`,n),{commands:[],error:n}}},Gu=async(e,t)=>{try{Xe.info(`Marquage de la commande ${e} comme exécutée`,{result:t});const{error:n}=await z.from("capture_commands").update({status:"executed",result:t,executed_at:new Date().toISOString()}).eq("id",e);if(n)throw n;return Xe.info(`Commande ${e} marquée comme exécutée avec succès`),{success:!0}}catch(n){return Xe.error(`Erreur lors du marquage de la commande ${e}`,n),{success:!1,error:n}}},_h=async(e,t,n,r,s,i)=>{try{if(console.log("Début de la sauvegarde de la photo traitée dans Supabase..."),!e||typeof e!="string")return console.error("Source d'image invalide:",e),{success:!1,url:null,error:new Error("Source d'image invalide")};try{const l=await(await fetch(e)).blob(),c=`photos_processed/${t||`processed_${Date.now()}_${r||"unknown"}_${s}_${i||"default"}.jpg`}`;if(!await oN())return console.error(`Le bucket "media" n'existe pas dans Supabase`),{success:!1,url:null,error:new Error("Bucket Supabase non disponible")};const{data:h,error:f}=await z.storage.from("media").upload(c,l,{contentType:"image/jpeg",cacheControl:"3600",upsert:!0});if(f)throw console.error("Erreur lors de l'upload de la photo traitée:",f),f;const{data:p}=await z.storage.from("media").getPublicUrl(c),m=p.publicUrl,{data:v,error:b}=await z.from("photos_processed").insert([{url:m,event_id:n,stand_id:r,screen_type:s,effect_name:i,original_file_name:t}]).select();return b&&(console.error("Erreur lors de l'enregistrement des métadonnées de la photo traitée:",b),console.warn("La photo a été uploadée mais les métadonnées n'ont pas pu être enregistrées")),console.log("Photo traitée sauvegardée avec succès dans Supabase:",m),{success:!0,url:m,error:null}}catch(o){return console.error("Erreur lors de la conversion de l'image:",o),{success:!1,url:null,error:o}}}catch(o){return console.error("Erreur lors de la sauvegarde de la photo traitée:",o),{success:!1,url:null,error:o}}},oN=async()=>{try{const{data:e,error:t}=await z.storage.getBucket("media");return t?(console.error("Erreur lors de la vérification du bucket:",t),!1):!!e}catch(e){return console.error("Erreur lors de la vérification du bucket:",e),!1}},$t="vertical_1",aN=1080,lN=1920,ym="EffectUnivers",cN="Devenir une étoile",uN="Votre photo avec effet Univers",dN=({image:e,onClose:t,onRetry:n})=>d.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-30 bg-black/80",children:d.jsxs("div",{className:"relative w-4/5 h-4/5",children:[d.jsx("img",{src:e,alt:"Aperçu",className:"w-full h-full object-contain border-4 border-purple-600"}),d.jsxs("div",{className:"absolute bottom-0 left-0 right-0 flex justify-center space-x-8 p-4 mb-8 bg-black/30 backdrop-blur-sm z-50",children:[d.jsx("button",{onClick:t,className:"bg-green-600 hover:bg-green-700 text-white text-xl font-bold py-4 px-8 rounded-full shadow-lg transform transition-transform hover:scale-105 min-w-[150px] border-2 border-white/20",children:d.jsxs("div",{className:"flex items-center justify-center",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Parfait"]})}),d.jsx("button",{onClick:n,className:"bg-red-600 hover:bg-red-700 text-white text-xl font-bold py-4 px-8 rounded-full shadow-lg transform transition-transform hover:scale-105 min-w-[150px] border-2 border-white/20",children:d.jsxs("div",{className:"flex items-center justify-center",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Recommencer"]})})]})]})}),hN=()=>d.jsx("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-black/80 backdrop-blur-sm",children:d.jsxs("div",{className:"bg-black/70 p-8 rounded-xl border-2 border-purple-600 flex flex-col items-center max-w-md w-full",children:[d.jsx(Gt,{}),d.jsx("p",{className:"text-white text-3xl font-bold mt-6 mb-4 text-center",children:"Un peu de patience!"}),d.jsx("p",{className:"text-gray-300 text-lg mb-6 text-center",children:"Nous appliquons votre style à l'image"}),d.jsx("div",{className:"w-full h-3 bg-gray-800 rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-purple-600 animate-progress-bar rounded-full"})})]})});function fN({eventId:e}){var G;const t=Kt(),n=sn(),r=w.useRef(null),[s,i]=w.useState(null),[o,l]=w.useState(null),[a,c]=w.useState(!1),[u,h]=w.useState(!1),[f,p]=w.useState(!1),[m,v]=w.useState(!1),[b,y]=w.useState(null),[g,x]=w.useState(null),[S,_]=w.useState(!1),[j,E]=w.useState(5),[C,M]=w.useState(!1),[A,V]=w.useState(!1),[O,ae]=w.useState(wo()),q=(G=t.state)==null?void 0:G.eventID,[U,J]=w.useState(e||q),[T,k]=w.useState(null),[N,P]=w.useState(null),[I,$]=w.useState(!1),[H,te]=w.useState(!1),{config:Q,isLoading:ne}=Il();w.useEffect(()=>{(async()=>{if(!U)try{console.log("Aucun événement spécifié, recherche d'un événement par défaut...");const{data:K,error:Oe}=await z.from("events").select("id").order("date",{ascending:!1}).limit(1);if(Oe){console.error("Erreur lors de la récupération de l'événement par défaut:",Oe),D.error("Erreur lors de la récupération de l'événement par défaut.");return}K&&K.length>0?(console.log("Événement par défaut trouvé:",K[0]),J(K[0].id)):(console.warn("Aucun événement trouvé."),D.warning("Aucun événement n'a été trouvé."))}catch(K){console.error("Erreur lors de la récupération de l'événement par défaut:",K),D.error("Erreur lors de la récupération de l'événement par défaut.")}})()},[U]),w.useEffect(()=>{if(U){ss($t,U,"active",O);const B=setInterval(()=>{ss($t,U,"active",O)},3e4),K=setInterval(()=>{je()},5e3);return()=>{clearInterval(B),clearInterval(K),ss($t,U,"inactive",O)}}},[U,O]);const je=async()=>{if(U)try{const{commands:B,error:K}=await mx(O,U);if(K)throw K;if(B&&B.length>0)for(const Oe of B)await Mt(Oe)}catch(B){console.error("Erreur lors de la vérification des commandes:",B)}},Mt=async B=>{try{let K="success";switch(B.command){case"restart":window.location.reload();break;case"power_off":await ss($t,U,"inactive",O),n("/");break;case"power_on":await ss($t,U,"active",O);break;default:K=`Commande inconnue: ${B.command}`}await Gu(B.id,K)}catch(K){console.error("Erreur lors de l'exécution de la commande:",K),await Gu(B.id,`Erreur: ${K.message}`)}},[Ke,Ne]=w.useState(!0),[ee,Je]=w.useState({width:window.innerWidth,height:window.innerHeight});w.useEffect(()=>{(()=>{const{width:Oe,height:Jt}=ee,qr=Jt>Oe;Ne(qr)})();const K=()=>{Je({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",K),()=>window.removeEventListener("resize",K)},[ee]),w.useEffect(()=>{(()=>{if(r.current){const K=setInterval(()=>{r.current&&r.current.video&&r.current.video.readyState===4&&(clearInterval(K),M(!0),V(!1))},100);setTimeout(()=>{clearInterval(K),C||(k("La webcam n'a pas pu être initialisée. Veuillez vérifier vos permissions."),V(!1))},1e4)}})()},[C]);const Fe=()=>{if(o!==null)return;l(j);const B=setInterval(()=>{l(K=>K<=1?(clearInterval(B),setTimeout(()=>{if(r.current){const Oe=r.current.getScreenshot();i(Oe),c(!0),l(null)}},100),0):K-1)},1e3)},se=async()=>{if(s){v(!0),c(!1);try{const K=await(await fetch(s)).blob(),Oe=`${Date.now()}_${O||"unknown"}_${$t}.jpg`,Jt=`photos/${Oe}`,{data:qr,error:Gr}=await z.storage.from("media").upload(Jt,K,{contentType:"image/jpeg",cacheControl:"3600"});if(Gr)throw Gr;const{data:Al}=await z.storage.from("media").getPublicUrl(Jt),dr=Al.publicUrl,{data:rt,error:Kr}=await z.from("photos").insert([{url:dr,event_id:U,stand_id:O,screen_type:$t,filter_name:(Q==null?void 0:Q.filter_name)||ym,effect_variant:N||"default"}]).select();if(Kr)throw Kr;try{const ft=await nr(s,Oe,U,O,$t);ft.success?console.log("Photo sauvegardée localement:",ft.filePath):console.warn("La sauvegarde locale a échoué:",ft.error)}catch(ft){console.warn("Erreur lors de la sauvegarde locale:",ft)}const de=s;y(de);try{const ft=`processed_${Date.now()}_${O||"unknown"}_${$t}.jpg`;nr(de,ft,U,O,$t,"processed").then(Ot=>{Ot.success?console.log("Photo retouchée sauvegardée localement:",Ot.filePath):(console.warn("La sauvegarde locale de la photo retouchée a échoué:",Ot.error),D.warning("La sauvegarde locale de la photo retouchée a échoué, mais le processus continue."))}).catch(Ot=>{console.error("Erreur inattendue lors de la sauvegarde locale:",Ot),D.warning("Problème lors de la sauvegarde locale de la photo.")}),_h(de,ft,U,O,$t,(Q==null?void 0:Q.filter_name)||ym).then(Ot=>{Ot.success?console.log("Photo retouchée sauvegardée dans Supabase:",Ot.url):(console.warn("La sauvegarde Supabase de la photo retouchée a échoué:",Ot.error),D.warning("La sauvegarde cloud de la photo retouchée a échoué, mais le processus continue."))}).catch(Ot=>{console.error("Erreur inattendue lors de la sauvegarde dans Supabase:",Ot),D.warning("Problème lors de la sauvegarde cloud de la photo.")})}catch(ft){console.warn("Erreur lors de la sauvegarde de la photo retouchée:",ft)}v(!1),p(!0),x(10);const De=setInterval(()=>{x(ft=>ft<=1?(clearInterval(De),_(!0),0):ft-1)},1e3)}catch(B){console.error("Erreur lors de la sauvegarde de la photo:",B),D.error("Erreur lors de la sauvegarde de la photo."),v(!1),c(!0)}}},nt=()=>{i(null),c(!1),p(!1),_(!1),y(null),x(null),P(null)},Lt=()=>{n("/")},ie=B=>{P(B),h(!1),Fe()};return A||ne?d.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:d.jsx(Gt,{message:"Chargement de l'interface..."})}):T?d.jsx("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center p-4",children:d.jsxs("div",{className:"bg-red-900/50 p-6 rounded-xl max-w-md w-full text-center",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-red-500 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),d.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Erreur de caméra"}),d.jsx("p",{className:"text-gray-300 mb-4",children:T}),d.jsx("button",{onClick:Lt,className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-full",children:"Retour à l'accueil"})]})}):Ke?d.jsx("div",{className:"min-h-screen bg-gradient-to-b from-indigo-900 to-purple-900 text-white relative overflow-hidden",children:A||ne?d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsx(Gt,{message:"Chargement de l'interface..."})}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"absolute top-8 left-8 z-10",children:d.jsx("button",{onClick:()=>$(!0),className:"hover:opacity-75 transition-opacity",children:d.jsx("img",{src:"/assets/snap_booth.png",alt:"SnapBooth",className:"h-20"})})}),!H&&d.jsxs(d.Fragment,{children:[d.jsxs("header",{className:"p-4 flex justify-between items-center",children:[d.jsxs("button",{onClick:Lt,className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-full flex items-center",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Retour"]}),d.jsx("h1",{className:"text-2xl font-bold text-white",children:"Univers Cosmique"}),d.jsx("div",{className:"w-[100px]"})," "]}),d.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4",children:[d.jsxs("div",{className:"relative w-full max-w-2xl aspect-[9/16] bg-black rounded-xl overflow-hidden border-4 border-purple-600 shadow-2xl",children:[!s&&!f&&d.jsx(Nl,{audio:!1,ref:r,screenshotFormat:"image/jpeg",videoConstraints:{width:aN,height:lN,facingMode:"user"},className:"w-full h-full object-cover",onUserMediaError:B=>{console.error("Erreur webcam:",B),k(`Erreur d'accès à la caméra: ${B.name}`)}}),s&&!f&&d.jsx("img",{src:s,alt:"Capture",className:"w-full h-full object-cover"}),f&&b&&d.jsx("img",{src:b,alt:"Photo traitée",className:"w-full h-full object-cover"}),o!==null&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:d.jsx("div",{className:"text-8xl font-bold text-white animate-pulse",children:o>0?o:"📸"})}),f&&d.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-white text-center",children:uN}),g!==null&&g>0&&d.jsxs("p",{className:"text-center text-gray-300 mt-2",children:["Retour à l'accueil dans ",g,"s..."]})]})]}),!s&&!f&&!S&&C&&d.jsx("div",{className:"mt-8 flex flex-col items-center",children:u?d.jsxs("div",{className:"bg-black/70 p-4 rounded-xl border-2 border-purple-600 w-full max-w-2xl",children:[d.jsx("h3",{className:"text-xl font-bold text-white mb-4 text-center",children:"Choisissez votre style"}),d.jsx(iN,{onSelect:ie})]}):d.jsx("button",{onClick:()=>h(!0),className:"bg-purple-600 hover:bg-purple-700 text-white text-xl font-bold py-4 px-8 rounded-full shadow-lg transform transition-transform hover:scale-105",children:cN})})]}),a&&s&&d.jsx(dN,{image:s,onClose:se,onRetry:nt}),m&&d.jsx(hN,{}),S&&d.jsx(Rl,{imageUrl:b,onClose:Lt})]}),I&&d.jsx(yo,{onClose:()=>$(!1),onSuccess:()=>{$(!1),te(!0)}}),H&&d.jsx(xo,{onClose:()=>te(!1)})]})}):d.jsx("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center p-4",children:d.jsxs("div",{className:"bg-yellow-900/50 p-6 rounded-xl max-w-md w-full text-center",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-yellow-500 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),d.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Rotation nécessaire"}),d.jsx("p",{className:"text-gray-300 mb-4",children:"Veuillez tourner votre appareil en mode portrait (vertical) pour utiliser cette interface."})]})})}const pN=({image:e,onProcessed:t})=>{const n=w.useRef(null);w.useEffect(()=>{if(!e)return;(async()=>{const o=new Image;o.crossOrigin="Anonymous",o.src=e,o.onload=()=>{const l=n.current,a=l.getContext("2d");l.width=o.width,l.height=o.height,a.drawImage(o,0,0,o.width,o.height),r(a,l.width,l.height);const c=l.toDataURL("image/jpeg");t(c)}})()},[e,t]);const r=(i,o,l)=>{const a=i.getImageData(0,0,o,l),c=a.data;for(let h=0;h<c.length;h+=4){const f=(c[h]+c[h+1]+c[h+2])/3;c[h]=c[h+1]=c[h+2]=f}const u=s(c,o,l);for(let h=0;h<c.length;h+=4){const f=Math.random()*10;c[h]=c[h+1]=c[h+2]=245-f}for(let h=0;h<c.length;h+=4){const f=255-u[h];f<200&&(c[h]=c[h+1]=c[h+2]=f)}i.putImageData(a,0,0)},s=(i,o,l)=>{const a=new Uint8ClampedArray(i.length);for(let c=1;c<l-1;c++)for(let u=1;u<o-1;u++){const h=(c*o+u)*4,f=-1*i[((c-1)*o+(u-1))*4]+-2*i[(c*o+(u-1))*4]+-1*i[((c+1)*o+(u-1))*4]+1*i[((c-1)*o+(u+1))*4]+2*i[(c*o+(u+1))*4]+1*i[((c+1)*o+(u+1))*4],p=-1*i[((c-1)*o+(u-1))*4]+-2*i[((c-1)*o+u)*4]+-1*i[((c-1)*o+(u+1))*4]+1*i[((c+1)*o+(u-1))*4]+2*i[((c+1)*o+u)*4]+1*i[((c+1)*o+(u+1))*4],m=Math.sqrt(f*f+p*p);a[h]=a[h+1]=a[h+2]=m,a[h+3]=255}return a};return d.jsx("div",{style:{display:"none"},children:d.jsx("canvas",{ref:n})})},ts="vertical_2",mN=1080,gN=1920,xm="EffectDessin",vN="Devenir une œuvre d'art",yN="Votre photo avec effet Dessin",xN=({image:e,onClose:t,onRetry:n})=>d.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-30 bg-black/80",children:d.jsxs("div",{className:"relative w-4/5 h-4/5",children:[d.jsx("img",{src:e,alt:"Aperçu",className:"w-full h-full object-contain border-4 border-purple-600"}),d.jsxs("div",{className:"absolute bottom-0 left-0 right-0 flex justify-center space-x-8 p-4 mb-8 bg-black/30 backdrop-blur-sm z-50",children:[d.jsx("button",{onClick:t,className:"bg-green-600 hover:bg-green-700 text-white text-xl font-bold py-4 px-8 rounded-full shadow-lg transform transition-transform hover:scale-105 min-w-[150px] border-2 border-white/20",children:d.jsxs("div",{className:"flex items-center justify-center",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Parfait"]})}),d.jsx("button",{onClick:n,className:"bg-red-600 hover:bg-red-700 text-white text-xl font-bold py-4 px-8 rounded-full shadow-lg transform transition-transform hover:scale-105 min-w-[150px] border-2 border-white/20",children:d.jsxs("div",{className:"flex items-center justify-center",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Recommencer"]})})]})]})}),wN=()=>d.jsx("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-black/80 backdrop-blur-sm",children:d.jsxs("div",{className:"bg-black/70 p-8 rounded-xl border-2 border-purple-600 flex flex-col items-center max-w-md w-full",children:[d.jsx(Gt,{}),d.jsx("p",{className:"text-white text-3xl font-bold mt-6 mb-4 text-center",children:"Un peu de patience!"}),d.jsx("p",{className:"text-gray-300 text-lg mb-6 text-center",children:"Nous transformons votre photo en œuvre d'art"}),d.jsx("div",{className:"w-full h-3 bg-gray-800 rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-purple-600 animate-progress-bar rounded-full"})})]})});function bN({eventId:e}){var Lt;const t=Kt(),n=sn(),r=w.useRef(null),[s,i]=w.useState(null),[o,l]=w.useState(null),[a,c]=w.useState(!1),[u,h]=w.useState(!1),[f,p]=w.useState(!1),[m,v]=w.useState(!1),[b,y]=w.useState(null),[g,x]=w.useState(null),[S,_]=w.useState(!1),[j,E]=w.useState(5),[C,M]=w.useState(!1),[A,V]=w.useState(!1),[O,ae]=w.useState(wo()),q=(Lt=t.state)==null?void 0:Lt.eventID,[U,J]=w.useState(e||q),[T,k]=w.useState(null),[N,P]=w.useState(null),[I,$]=w.useState(!1),[H,te]=w.useState(!1),{config:Q,isLoading:ne}=Il();w.useEffect(()=>{(async()=>{if(!U)try{console.log("Aucun événement spécifié, recherche d'un événement par défaut...");const{data:G,error:B}=await z.from("events").select("id").order("date",{ascending:!1}).limit(1);if(B){console.error("Erreur lors de la récupération de l'événement par défaut:",B),D.error("Erreur lors de la récupération de l'événement par défaut.");return}G&&G.length>0?(console.log("Événement par défaut trouvé:",G[0]),J(G[0].id)):(console.warn("Aucun événement trouvé."),D.warning("Aucun événement n'a été trouvé."))}catch(G){console.error("Erreur lors de la récupération de l'événement par défaut:",G),D.error("Erreur lors de la récupération de l'événement par défaut.")}})()},[U]);const[je,Mt]=w.useState(!0),[Ke,Ne]=w.useState({width:window.innerWidth,height:window.innerHeight});w.useEffect(()=>{(()=>{const{width:B,height:K}=Ke,Oe=K>B;Mt(Oe)})();const G=()=>{Ne({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",G),()=>window.removeEventListener("resize",G)},[Ke]),w.useEffect(()=>{(()=>{if(r.current){const G=setInterval(()=>{r.current&&r.current.video&&r.current.video.readyState===4&&(clearInterval(G),M(!0),V(!1))},100);setTimeout(()=>{clearInterval(G),C||(k("La webcam n'a pas pu être initialisée. Veuillez vérifier vos permissions."),V(!1))},1e4)}})()},[C]);const ee=()=>{if(o!==null)return;l(j);const ie=setInterval(()=>{l(G=>G<=1?(clearInterval(ie),setTimeout(()=>{if(r.current){const B=r.current.getScreenshot();i(B),c(!0),l(null)}},100),0):G-1)},1e3)},Je=async()=>{if(s){v(!0),c(!1);try{const G=await(await fetch(s)).blob(),B=`${Date.now()}_${O||"unknown"}_${ts}.jpg`,K=`photos/${B}`,{data:Oe,error:Jt}=await z.storage.from("media").upload(K,G,{contentType:"image/jpeg",cacheControl:"3600"});if(Jt)throw Jt;const{data:qr}=await z.storage.from("media").getPublicUrl(K),Gr=qr.publicUrl,{data:Al,error:dr}=await z.from("photos").insert([{url:Gr,event_id:U,stand_id:O,screen_type:ts,filter_name:(Q==null?void 0:Q.filter_name)||xm,effect_variant:N||"default"}]).select();if(dr)throw dr;try{const de=await nr(s,B,U,O,ts);de.success?console.log("Photo sauvegardée localement:",de.filePath):console.warn("La sauvegarde locale a échoué:",de.error)}catch(de){console.warn("Erreur lors de la sauvegarde locale:",de)}const rt=s;y(rt);try{const de=`processed_${Date.now()}_${O||"unknown"}_${ts}.jpg`;nr(rt,de,U,O,ts,"processed").then(De=>{De.success?console.log("Photo retouchée sauvegardée localement:",De.filePath):console.warn("La sauvegarde locale de la photo retouchée a échoué:",De.error)}),_h(rt,de,U,O,ts,(Q==null?void 0:Q.filter_name)||xm).then(De=>{De.success?console.log("Photo retouchée sauvegardée dans Supabase:",De.url):console.warn("La sauvegarde Supabase de la photo retouchée a échoué:",De.error)})}catch(de){console.warn("Erreur lors de la sauvegarde de la photo retouchée:",de)}v(!1),p(!0),x(10);const Kr=setInterval(()=>{x(de=>de<=1?(clearInterval(Kr),_(!0),0):de-1)},1e3)}catch(ie){console.error("Erreur lors de la sauvegarde de la photo:",ie),D.error("Erreur lors de la sauvegarde de la photo."),v(!1),c(!0)}}},Fe=()=>{i(null),c(!1),p(!1),_(!1),y(null),x(null),P(null)},se=()=>{n("/")},nt=ie=>{P(ie),h(!1),ee()};return A||ne?d.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:d.jsx(Gt,{size:"large"})}):T?d.jsx("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center p-4",children:d.jsxs("div",{className:"bg-red-900/50 p-6 rounded-xl max-w-md w-full text-center",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-red-500 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),d.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Erreur de caméra"}),d.jsx("p",{className:"text-gray-300 mb-4",children:T}),d.jsx("button",{onClick:se,className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-full",children:"Retour à l'accueil"})]})}):je?d.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-green-900 to-teal-900 flex flex-col relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-8 left-8 z-10",children:d.jsx("button",{onClick:()=>$(!0),className:"hover:opacity-75 transition-opacity",children:d.jsx("img",{src:"/assets/snap_booth.png",alt:"SnapBooth",className:"h-20"})})}),!H&&d.jsxs(d.Fragment,{children:[d.jsxs("header",{className:"p-4 flex justify-between items-center",children:[d.jsxs("button",{onClick:se,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-full flex items-center",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Retour"]}),d.jsx("h1",{className:"text-2xl font-bold text-white",children:"Effet Dessin"}),d.jsx("div",{className:"w-[100px]"})," "]}),d.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4",children:[d.jsxs("div",{className:"relative w-full max-w-2xl aspect-[9/16] bg-black rounded-xl overflow-hidden border-4 border-green-600 shadow-2xl",children:[!s&&!f&&d.jsx(Nl,{audio:!1,ref:r,screenshotFormat:"image/jpeg",videoConstraints:{width:mN,height:gN,facingMode:"user"},className:"w-full h-full object-cover",onUserMediaError:ie=>{console.error("Erreur webcam:",ie),k(`Erreur d'accès à la caméra: ${ie.name}`)}}),s&&!f&&d.jsx("img",{src:s,alt:"Capture",className:"w-full h-full object-cover"}),f&&b&&d.jsx("img",{src:b,alt:"Photo traitée",className:"w-full h-full object-cover"}),o!==null&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:d.jsx("div",{className:"text-8xl font-bold text-white animate-pulse",children:o>0?o:"📸"})}),f&&d.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-white text-center",children:yN}),g!==null&&g>0&&d.jsxs("p",{className:"text-center text-gray-300 mt-2",children:["Retour à l'accueil dans ",g,"s..."]})]})]}),!s&&!f&&!S&&C&&d.jsx("div",{className:"mt-8 flex flex-col items-center",children:u?d.jsxs("div",{className:"bg-black/70 p-4 rounded-xl border-2 border-green-600 w-full max-w-2xl",children:[d.jsx("h3",{className:"text-xl font-bold text-white mb-4 text-center",children:"Choisissez votre style de dessin"}),d.jsx(pN,{onSelect:nt})]}):d.jsx("button",{onClick:()=>h(!0),className:"bg-green-600 hover:bg-green-700 text-white text-xl font-bold py-4 px-8 rounded-full shadow-lg transform transition-transform hover:scale-105",children:vN})})]}),a&&s&&d.jsx(xN,{image:s,onClose:Je,onRetry:Fe}),m&&d.jsx(wN,{}),S&&d.jsx(Rl,{imageUrl:b,onClose:se})]}),I&&d.jsx(yo,{onClose:()=>$(!1),onSuccess:()=>{$(!1),te(!0)}}),H&&d.jsx(xo,{onClose:()=>te(!1)})]}):d.jsx("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center p-4",children:d.jsxs("div",{className:"bg-yellow-900/50 p-6 rounded-xl max-w-md w-full text-center",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-yellow-500 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),d.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Rotation nécessaire"}),d.jsx("p",{className:"text-gray-300 mb-4",children:"Veuillez tourner votre appareil en mode portrait (vertical) pour utiliser cette interface."})]})})}const SN=({image:e,onProcessed:t})=>{const n=w.useRef(null);w.useEffect(()=>{if(!e)return;(async()=>{const c=new Image;c.crossOrigin="Anonymous",c.src=e,c.onload=()=>{const u=n.current,h=u.getContext("2d");u.width=c.width,u.height=c.height,h.drawImage(c,0,0,c.width,c.height),r(h,u.width,u.height);const f=u.toDataURL("image/jpeg");t(f)}})()},[e,t]);const r=(a,c,u)=>{const h=a.getImageData(0,0,c,u),f=h.data;s(f),i(a,c,u),o(a,c,u),a.putImageData(h,0,0)},s=a=>{for(let h=0;h<a.length;h+=4){const f=a[h]/255,p=a[h+1]/255,m=a[h+2]/255,v=Math.max(f,p,m),b=Math.min(f,p,m);let y,g,x=(v+b)/2;if(v===b)y=g=0;else{const E=v-b;switch(g=x>.5?E/(2-v-b):E/(v+b),v){case f:y=(p-m)/E+(p<m?6:0);break;case p:y=(m-f)/E+2;break;case m:y=(f-p)/E+4;break}y/=6}g=Math.min(1,g*1.8),x=(x-.5)*1.5+.5,x=Math.max(0,Math.min(1,x));let S,_,j;if(g===0)S=_=j=x;else{const E=(A,V,O)=>(O<0&&(O+=1),O>1&&(O-=1),O<.16666666666666666?A+(V-A)*6*O:O<.5?V:O<.6666666666666666?A+(V-A)*(.6666666666666666-O)*6:A),C=x<.5?x*(1+g):x+g-x*g,M=2*x-C;S=E(M,C,y+1/3),_=E(M,C,y),j=E(M,C,y-1/3)}a[h]=Math.round(S*255),a[h+1]=Math.round(_*255),a[h+2]=Math.round(j*255)}},i=(a,c,u)=>{const h=a.getImageData(0,0,c,u),f=a.createImageData(c,u),p=c/2,m=u/2,v=Math.min(c,u)/2,b=.3;for(let y=0;y<u;y++)for(let g=0;g<c;g++){const x=(g-p)/v,S=(y-m)/v,_=Math.sqrt(x*x+S*S),j=1+b*Math.sin(Math.PI*_/2),E=Math.floor(p+(g-p)*j),C=Math.floor(m+(y-m)*j);if(E>=0&&E<c&&C>=0&&C<u){const M=(y*c+g)*4,A=(C*c+E)*4;f.data[M]=h.data[A],f.data[M+1]=h.data[A+1],f.data[M+2]=h.data[A+2],f.data[M+3]=h.data[A+3]}}a.putImageData(f,0,0)},o=(a,c,u)=>{const h=a.getImageData(0,0,c,u),f=h.data,p=l(f,c,u);for(let m=0;m<f.length;m+=4)p[m]>50&&(f[m]=Math.max(0,f[m]-p[m]*.5),f[m+1]=Math.max(0,f[m+1]-p[m]*.5),f[m+2]=Math.max(0,f[m+2]-p[m]*.5));a.putImageData(h,0,0)},l=(a,c,u)=>{const h=new Uint8ClampedArray(a.length);for(let f=1;f<u-1;f++)for(let p=1;p<c-1;p++){const m=(f*c+p)*4,v=-1*a[((f-1)*c+(p-1))*4]+-2*a[(f*c+(p-1))*4]+-1*a[((f+1)*c+(p-1))*4]+1*a[((f-1)*c+(p+1))*4]+2*a[(f*c+(p+1))*4]+1*a[((f+1)*c+(p+1))*4],b=-1*a[((f-1)*c+(p-1))*4]+-2*a[((f-1)*c+p)*4]+-1*a[((f-1)*c+(p+1))*4]+1*a[((f+1)*c+(p-1))*4]+2*a[((f+1)*c+p)*4]+1*a[((f+1)*c+(p+1))*4],y=Math.sqrt(v*v+b*b);h[m]=h[m+1]=h[m+2]=y,h[m+3]=255}return h};return d.jsx("div",{style:{display:"none"},children:d.jsx("canvas",{ref:n})})},ns="vertical_3",_N=1080,EN=1920,wm="EffectCaricature",jN="Transformer en caricature",kN="Votre photo caricaturée",CN=({image:e,onClose:t,onRetry:n})=>d.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-30 bg-black/80",children:d.jsxs("div",{className:"relative w-4/5 h-4/5",children:[d.jsx("img",{src:e,alt:"Aperçu",className:"w-full h-full object-contain border-4 border-yellow-600"}),d.jsxs("div",{className:"absolute bottom-0 left-0 right-0 flex justify-center space-x-8 p-4 mb-8 bg-black/30 backdrop-blur-sm z-50",children:[d.jsx("button",{onClick:t,className:"bg-green-600 hover:bg-green-700 text-white text-xl font-bold py-4 px-8 rounded-full shadow-lg transform transition-transform hover:scale-105 min-w-[150px] border-2 border-white/20",children:d.jsxs("div",{className:"flex items-center justify-center",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Parfait"]})}),d.jsx("button",{onClick:n,className:"bg-red-600 hover:bg-red-700 text-white text-xl font-bold py-4 px-8 rounded-full shadow-lg transform transition-transform hover:scale-105 min-w-[150px] border-2 border-white/20",children:d.jsxs("div",{className:"flex items-center justify-center",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Recommencer"]})})]})]})}),PN=()=>d.jsx("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-black/80 backdrop-blur-sm",children:d.jsxs("div",{className:"bg-black/70 p-8 rounded-xl border-2 border-yellow-600 flex flex-col items-center max-w-md w-full",children:[d.jsx(Gt,{}),d.jsx("p",{className:"text-white text-3xl font-bold mt-6 mb-4 text-center",children:"Un peu de patience!"}),d.jsx("p",{className:"text-gray-300 text-lg mb-6 text-center",children:"Nous transformons votre photo en caricature"}),d.jsx("div",{className:"w-full h-3 bg-gray-800 rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-yellow-600 animate-progress-bar rounded-full"})})]})});function TN({eventId:e}){var Lt;const t=Kt(),n=sn(),r=w.useRef(null),[s,i]=w.useState(null),[o,l]=w.useState(null),[a,c]=w.useState(!1),[u,h]=w.useState(!1),[f,p]=w.useState(!1),[m,v]=w.useState(!1),[b,y]=w.useState(null),[g,x]=w.useState(null),[S,_]=w.useState(!1),[j,E]=w.useState(5),[C,M]=w.useState(!1),[A,V]=w.useState(!1),[O,ae]=w.useState(wo()),q=(Lt=t.state)==null?void 0:Lt.eventID,[U,J]=w.useState(e||q),[T,k]=w.useState(null),[N,P]=w.useState(null),[I,$]=w.useState(!1),[H,te]=w.useState(!1),{config:Q,isLoading:ne}=Il();w.useEffect(()=>{(async()=>{if(!U)try{console.log("Aucun événement spécifié, recherche d'un événement par défaut...");const{data:G,error:B}=await z.from("events").select("id").order("date",{ascending:!1}).limit(1);if(B){console.error("Erreur lors de la récupération de l'événement par défaut:",B),D.error("Erreur lors de la récupération de l'événement par défaut.");return}G&&G.length>0?(console.log("Événement par défaut trouvé:",G[0]),J(G[0].id)):(console.warn("Aucun événement trouvé."),D.warning("Aucun événement n'a été trouvé."))}catch(G){console.error("Erreur lors de la récupération de l'événement par défaut:",G),D.error("Erreur lors de la récupération de l'événement par défaut.")}})()},[U]);const[je,Mt]=w.useState(!0),[Ke,Ne]=w.useState({width:window.innerWidth,height:window.innerHeight});w.useEffect(()=>{(()=>{const{width:B,height:K}=Ke,Oe=K>B;Mt(Oe)})();const G=()=>{Ne({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",G),()=>window.removeEventListener("resize",G)},[Ke]),w.useEffect(()=>{(()=>{if(r.current){const G=setInterval(()=>{r.current&&r.current.video&&r.current.video.readyState===4&&(clearInterval(G),M(!0),V(!1))},100);setTimeout(()=>{clearInterval(G),C||(k("La webcam n'a pas pu être initialisée. Veuillez vérifier vos permissions."),V(!1))},1e4)}})()},[C]);const ee=()=>{if(o!==null)return;l(j);const ie=setInterval(()=>{l(G=>G<=1?(clearInterval(ie),setTimeout(()=>{if(r.current){const B=r.current.getScreenshot();i(B),c(!0),l(null)}},100),0):G-1)},1e3)},Je=async()=>{if(s){v(!0),c(!1);try{const G=await(await fetch(s)).blob(),B=`${Date.now()}_${O||"unknown"}_${ns}.jpg`,K=`photos/${B}`,{data:Oe,error:Jt}=await z.storage.from("media").upload(K,G,{contentType:"image/jpeg",cacheControl:"3600"});if(Jt)throw Jt;const{data:qr}=await z.storage.from("media").getPublicUrl(K),Gr=qr.publicUrl,{data:Al,error:dr}=await z.from("photos").insert([{url:Gr,event_id:U,stand_id:O,screen_type:ns,filter_name:(Q==null?void 0:Q.filter_name)||wm,effect_variant:N||"default"}]).select();if(dr)throw dr;try{const rt=await nr(s,B,U,O,ns);rt.success?console.log("Photo sauvegardée localement:",rt.filePath):console.warn("La sauvegarde locale a échoué:",rt.error)}catch(rt){console.warn("Erreur lors de la sauvegarde locale:",rt)}setTimeout(()=>{const rt=s;y(rt);try{const de=`processed_${Date.now()}_${O||"unknown"}_${ns}.jpg`;nr(rt,de,U,O,ns,"processed").then(De=>{De.success?console.log("Photo retouchée sauvegardée localement:",De.filePath):console.warn("La sauvegarde locale de la photo retouchée a échoué:",De.error)}),_h(rt,de,U,O,ns,(Q==null?void 0:Q.filter_name)||wm).then(De=>{De.success?console.log("Photo retouchée sauvegardée dans Supabase:",De.url):console.warn("La sauvegarde Supabase de la photo retouchée a échoué:",De.error)})}catch(de){console.warn("Erreur lors de la sauvegarde de la photo retouchée:",de)}v(!1),p(!0),x(10);const Kr=setInterval(()=>{x(de=>de<=1?(clearInterval(Kr),_(!0),0):de-1)},1e3)},3e3)}catch(ie){console.error("Erreur lors de la sauvegarde de la photo:",ie),D.error("Erreur lors de la sauvegarde de la photo."),v(!1),c(!0)}}},Fe=()=>{i(null),c(!1),p(!1),_(!1),y(null),x(null),P(null)},se=()=>{n("/")},nt=ie=>{P(ie),h(!1),ee()};return A||ne?d.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:d.jsx(Gt,{message:"Chargement de l'interface..."})}):T?d.jsx("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center p-4",children:d.jsxs("div",{className:"bg-red-900/50 p-6 rounded-xl max-w-md w-full text-center",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-red-500 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),d.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Erreur de caméra"}),d.jsx("p",{className:"text-gray-300 mb-4",children:T}),d.jsx("button",{onClick:se,className:"bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded-full",children:"Retour à l'accueil"})]})}):je?d.jsx("div",{className:"min-h-screen bg-gradient-to-b from-orange-900 to-yellow-900 text-white relative overflow-hidden",children:A||ne?d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsx(Gt,{message:"Chargement de l'interface..."})}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"absolute top-8 left-8 z-10",children:d.jsx("button",{onClick:()=>$(!0),className:"hover:opacity-75 transition-opacity",children:d.jsx("img",{src:"/assets/snap_booth.png",alt:"SnapBooth",className:"h-20"})})}),!H&&d.jsxs(d.Fragment,{children:[d.jsxs("header",{className:"p-4 flex justify-between items-center",children:[d.jsxs("button",{onClick:se,className:"bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded-full flex items-center",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Retour"]}),d.jsx("h1",{className:"text-2xl font-bold text-white",children:"Effet Caricature"}),d.jsx("div",{className:"w-[100px]"})," "]}),d.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4",children:[d.jsxs("div",{className:"relative w-full max-w-2xl aspect-[9/16] bg-black rounded-xl overflow-hidden border-4 border-yellow-600 shadow-2xl",children:[!s&&!f&&d.jsx(Nl,{audio:!1,ref:r,screenshotFormat:"image/jpeg",videoConstraints:{width:_N,height:EN,facingMode:"user"},className:"w-full h-full object-cover",onUserMediaError:ie=>{console.error("Erreur webcam:",ie),k(`Erreur d'accès à la caméra: ${ie.name}`)}}),s&&!f&&d.jsx("img",{src:s,alt:"Capture",className:"w-full h-full object-cover"}),f&&b&&d.jsx("img",{src:b,alt:"Photo traitée",className:"w-full h-full object-cover"}),o!==null&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:d.jsx("div",{className:"text-8xl font-bold text-white animate-pulse",children:o>0?o:"📸"})}),f&&d.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-white text-center",children:kN}),g!==null&&g>0&&d.jsxs("p",{className:"text-center text-gray-300 mt-2",children:["Retour à l'accueil dans ",g,"s..."]})]})]}),!s&&!f&&!S&&C&&d.jsx("div",{className:"mt-8 flex flex-col items-center",children:u?d.jsxs("div",{className:"bg-black/70 p-4 rounded-xl border-2 border-yellow-600 w-full max-w-2xl",children:[d.jsx("h3",{className:"text-xl font-bold text-white mb-4 text-center",children:"Choisissez votre style de caricature"}),d.jsx(SN,{onSelect:nt})]}):d.jsx("button",{onClick:()=>h(!0),className:"bg-yellow-600 hover:bg-yellow-700 text-white text-xl font-bold py-4 px-8 rounded-full shadow-lg transform transition-transform hover:scale-105",children:jN})})]}),a&&s&&d.jsx(CN,{image:s,onClose:Je,onRetry:Fe}),m&&d.jsx(PN,{}),S&&d.jsx(Rl,{imageUrl:b,onClose:se})]}),I&&d.jsx(yo,{onClose:()=>$(!1),onSuccess:()=>{$(!1),te(!0)}}),H&&d.jsx(xo,{onClose:()=>te(!1)})]})}):d.jsx("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center p-4",children:d.jsxs("div",{className:"bg-yellow-900/50 p-6 rounded-xl max-w-md w-full text-center",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-yellow-500 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),d.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Rotation nécessaire"}),d.jsx("p",{className:"text-gray-300 mb-4",children:"Veuillez tourner votre appareil en mode portrait (vertical) pour utiliser cette interface."})]})})}const gx=({onSelect:e})=>{const t=[{value:"jpcartoon",label:"Japanese Manga (I)",image:"https://azafzikvwdartavmpwsc.supabase.co/storage/v1/object/public/assets/Cartoon/Cartoon%20yourself-Japanese%20manga%201.webp"},{value:"hongkong",label:"Hong Kong-style comic style",image:"https://azafzikvwdartavmpwsc.supabase.co/storage/v1/object/public/assets/Cartoon/Cartoon%20yourself-Hong%20Kong-style%20comic%20style.webp"},{value:"comic",label:"Comic",image:"https://azafzikvwdartavmpwsc.supabase.co/storage/v1/object/public/assets/Cartoon/Cartoon%20yourself-Comic.webp"},{value:"classic_cartoon",label:"Retro Cartoon",image:"https://azafzikvwdartavmpwsc.supabase.co/storage/v1/object/public/assets/Cartoon/Cartoon%20yourself-Retro%20Cartoon.webp"},{value:"handdrawn",label:"Hand-painted",image:"https://azafzikvwdartavmpwsc.supabase.co/storage/v1/object/public/assets/Cartoon/Cartoon%20yourself-handdrawn.webp"},{value:"amcartoon",label:"American Manga",image:"https://azafzikvwdartavmpwsc.supabase.co/storage/v1/object/public/assets/Cartoon/Cartoon%20yourself-American%20manga.webp"}];return d.jsx("div",{className:"grid grid-cols-6 sm:grid-cols-6 md:grid-cols-6 gap-4",children:t.map(n=>d.jsxs("button",{onClick:()=>e(n.value),className:"w-24 bg-gray-800 hover:bg-purple-700 text-white rounded-lg overflow-hidden shadow-md",children:[d.jsx("img",{src:n.image,alt:n.label,className:"w-full h-32 object-cover"}),d.jsx("div",{className:"p-2 text-center font-medium text-sm",children:n.label})]},n.value))})},NN=1920,RN=1080,IN="Devenir un cartoon",AN="Votre photo cartoon",MN=({image:e,onClose:t,onRetry:n})=>{const[r,s]=w.useState(!1),i=l=>{s(!1),capture()},o=()=>{s(!0)};return d.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-30 bg-black/80",children:d.jsxs("div",{className:"relative w-4/5 h-4/5",children:[d.jsx("img",{src:e,alt:"Aperçu",className:"w-full h-full object-contain border-4 border-blue-600"}),d.jsxs("div",{className:"absolute bottom-0 left-0 right-0 flex justify-center space-x-8 p-4 mb-8 bg-black/30 backdrop-blur-sm z-50",children:[!r&&d.jsx("button",{onClick:o,className:"bg-green-600 hover:bg-green-700 text-white text-xl font-bold py-4 px-8 rounded-full shadow-lg transform transition-transform hover:scale-105 min-w-[150px] border-2 border-white/20",children:d.jsxs("div",{className:"flex items-center justify-center",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Parfait"]})}),!r&&d.jsx("button",{onClick:n,className:"bg-red-600 hover:bg-red-700 text-white text-xl font-bold py-4 px-8 rounded-full shadow-lg transform transition-transform hover:scale-105 min-w-[150px] border-2 border-white/20",children:d.jsxs("div",{className:"flex items-center justify-center",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Recommencer"]})}),r&&d.jsxs("div",{className:"bg-black/70 p-4 rounded-xl border-2 border-blue-600 w-full max-w-full h-60",children:[d.jsx("h3",{className:"text-xl font-bold text-white mb-4 text-center",children:"Choisissez votre style cartoon"}),d.jsx(gx,{onSelect:i})]})]})]})})},LN=()=>d.jsx("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-black/80 backdrop-blur-sm",children:d.jsxs("div",{className:"bg-black/70 p-8 rounded-xl border-2 border-blue-600 flex flex-col items-center max-w-md w-full",children:[d.jsx(Gt,{}),d.jsx("p",{className:"text-white text-3xl font-bold mt-6 mb-4 text-center",children:"Un peu de patience!"}),d.jsx("p",{className:"text-gray-300 text-lg mb-6 text-center",children:"Nous transformons votre photo en cartoon"}),d.jsx("div",{className:"w-full h-3 bg-gray-800 rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-blue-600 animate-progress-bar rounded-full"})})]})});function ON({eventId:e}){var Je;const t=Kt(),n=sn(),r=w.useRef(null),[s,i]=w.useState(null),[o,l]=w.useState(null),[a,c]=w.useState(!1),[u,h]=w.useState(!1),[f,p]=w.useState(!1),[m,v]=w.useState(!1),[b,y]=w.useState(null),[g,x]=w.useState(null),[S,_]=w.useState(!1),[j,E]=w.useState(5);w.useState(!1);const[C,M]=w.useState(!1),[A,V]=w.useState(wo()),O=(Je=t.state)==null?void 0:Je.eventID,[ae,q]=w.useState(e||O),[U,J]=w.useState(null),[T,k]=w.useState(null),[N,P]=w.useState(!1),[I,$]=w.useState(!1),{config:H,isLoading:te}=Il();w.useEffect(()=>{(async()=>{if(!ae)try{console.log("Aucun événement spécifié, recherche d'un événement par défaut...");const{data:se,error:nt}=await z.from("events").select("id").order("date",{ascending:!1}).limit(1);if(nt){console.error("Erreur lors de la récupération de l'événement par défaut:",nt),D.error("Erreur lors de la récupération de l'événement par défaut.");return}se&&se.length>0?(console.log("Événement par défaut trouvé:",se[0]),q(se[0].id)):(console.warn("Aucun événement trouvé."),D.warning("Aucun événement n'a été trouvé."))}catch(se){console.error("Erreur lors de la récupération de l'événement par défaut:",se),D.error("Erreur lors de la récupération de l'événement par défaut.")}})()},[ae]);const[Q,ne]=w.useState(!0),[je,Mt]=w.useState({width:window.innerWidth,height:window.innerHeight});w.useEffect(()=>{(()=>{const{width:nt,height:Lt}=je,ie=nt>Lt;ne(ie)})();const se=()=>{Mt({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",se),()=>window.removeEventListener("resize",se)},[je]);const Ke=()=>{if(o!==null)return;l(j);const Fe=setInterval(()=>{l(se=>se<=1?(clearInterval(Fe),setTimeout(()=>{if(r.current){const nt=r.current.getScreenshot();i(nt),c(!0),l(null)}},100),0):se-1)},1e3)},Ne=()=>{i(null),c(!1),p(!1),_(!1),y(null),x(null),k(null)},ee=()=>{n("/")};return w.useEffect(()=>{(async()=>{try{const se=await mx(A);if(se.length>0){const nt=se[0];await Gu(nt.id),await ss(A,"busy")}}catch(se){console.error("Erreur lors de la vérification des commandes en attente:",se)}})()},[A]),C||te?d.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:d.jsx(Gt,{message:"Chargement de l'interface..."})}):U?d.jsx("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center p-4",children:d.jsxs("div",{className:"bg-red-900/50 p-6 rounded-xl max-w-md w-full text-center",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-red-500 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),d.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Erreur de caméra"}),d.jsx("p",{className:"text-gray-300 mb-4",children:U}),d.jsx("button",{onClick:ee,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full",children:"Retour à l'accueil"})]})}):Q?d.jsx("div",{className:"min-h-screen bg-black text-white relative overflow-hidden",children:C||te?d.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:d.jsx(Gt,{message:"Chargement de l'interface..."})}):d.jsxs(d.Fragment,{children:[!I&&d.jsxs(d.Fragment,{children:[d.jsxs("header",{className:"p-4 flex justify-between items-center",children:[d.jsxs("button",{onClick:ee,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full flex items-center",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Retour"]}),d.jsx("h1",{className:"text-2xl font-bold text-white",children:"Effet Cartoon"}),d.jsx("div",{className:"w-[100px]"})," "]}),d.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4",children:[d.jsxs("div",{className:"relative w-full max-w-4xl aspect-[16/9] bg-black rounded-xl overflow-hidden border-4 border-blue-600 shadow-2xl",children:[!s&&!f&&d.jsx(Nl,{audio:!1,ref:r,screenshotFormat:"image/jpeg",videoConstraints:{width:NN,height:RN,facingMode:"user"},className:"w-full h-full object-cover",onUserMediaError:Fe=>{console.error("Erreur webcam:",Fe),J(`Erreur d'accès à la caméra: ${Fe.name}`)}}),s&&!f&&d.jsx("img",{src:s,alt:"Capture",className:"w-full h-full object-cover"}),f&&b&&d.jsx("img",{src:b,alt:"Photo traitée",className:"w-full h-full object-cover"}),o!==null&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:d.jsx("div",{className:"text-8xl font-bold text-white animate-pulse",children:o>0?o:"📸"})}),f&&d.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-white text-center",children:AN}),g!==null&&g>0&&d.jsxs("p",{className:"text-center text-gray-300 mt-2",children:["Retour à l'accueil dans ",g,"s..."]})]})]}),!s&&!f&&!S&&d.jsx("div",{className:"mt-8 flex flex-col items-center",children:u?d.jsxs("div",{className:"bg-black/70 p-4 rounded-xl border-2 border-blue-600 w-full max-w-2xl",children:[d.jsx("h3",{className:"text-xl font-bold text-white mb-4 text-center",children:"Choisissez votre style cartoon"}),d.jsx(gx,{onSelect:handleEffectSelect})]}):d.jsx("button",{onClick:()=>{Ke()},className:"bg-blue-600 hover:bg-blue-700 text-white text-xl font-bold py-4 px-8 rounded-full shadow-lg transform transition-transform hover:scale-105",children:IN})})]}),a&&s&&d.jsx("div",{children:d.jsx(MN,{image:s,onRetry:Ne})}),m&&d.jsx(LN,{}),S&&d.jsx(Rl,{imageUrl:b,onClose:ee})]}),N&&d.jsx(yo,{onClose:()=>P(!1),onSuccess:()=>{P(!1),$(!0)}}),I&&d.jsx(xo,{onClose:()=>$(!1)})]})}):d.jsx("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center p-4",children:d.jsxs("div",{className:"bg-blue-900/50 p-6 rounded-xl max-w-md w-full text-center",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-blue-500 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),d.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Rotation nécessaire"}),d.jsx("p",{className:"text-gray-300 mb-4",children:"Veuillez tourner votre appareil en mode paysage (horizontal) pour utiliser cette interface."})]})})}const Tr=new At("App");function kn({children:e,requireAdmin:t=!1}){const{user:n,isLoading:r}=en();return r?(Tr.debug("Chargement de la route protégée..."),d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})})):n?t&&n.role!=="admin"?(Tr.warn("Accès admin requis, redirection vers /events",{userRole:n.role}),d.jsx(vs,{to:"/events",replace:!0})):(Tr.debug("Accès autorisé à la route protégée",{requireAdmin:t,userRole:n.role}),e):(Tr.info("Utilisateur non connecté, redirection vers /login"),d.jsx(vs,{to:"/login",replace:!0}))}function DN(){const{checkSession:e,user:t,isLoading:n}=en();return pe.useEffect(()=>{Tr.info("Initialisation de l'application"),e()},[e]),n?(Tr.debug("Chargement initial de l'application..."),d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})})):(Tr.debug("État de l'application",{isAuthenticated:!!t,userRole:t==null?void 0:t.role}),d.jsx(IS,{future:{v7_startTransition:!0},children:d.jsx(my,{mode:"wait",children:d.jsxs(jS,{children:[d.jsx(jt,{path:"/login",element:t?t.role==="admin"?d.jsx(vs,{to:"/admin",replace:!0}):d.jsx(vs,{to:"/events",replace:!0}):d.jsx(PT,{})}),d.jsx(jt,{path:"/events",element:d.jsx(kn,{children:d.jsx(RT,{})})}),d.jsx(jt,{path:"/admin",element:d.jsx(kn,{requireAdmin:!0,children:d.jsx(IT,{})})}),d.jsx(jt,{path:"/admin/photos",element:d.jsx(kn,{requireAdmin:!0,children:d.jsx(fx,{})})}),d.jsx(jt,{path:"/photos",element:d.jsx(kn,{children:d.jsx(tN,{})})}),d.jsx(jt,{path:"/captures/verticale-1",element:d.jsx(kn,{children:d.jsx(fN,{})})}),d.jsx(jt,{path:"/captures/verticale-2",element:d.jsx(kn,{children:d.jsx(bN,{})})}),d.jsx(jt,{path:"/captures/verticale-3",element:d.jsx(kn,{children:d.jsx(TN,{})})}),d.jsx(jt,{path:"/captures/horizontale-1",element:d.jsx(kn,{children:d.jsx(ON,{})})}),d.jsx(jt,{path:"/",element:d.jsx(vs,{to:"/events",replace:!0})}),d.jsx(jt,{path:"*",element:d.jsx(vs,{to:"/events",replace:!0})})]})})}))}const $N=new At("Main");$N.info("Démarrage de l'application");const UN=A0(document.getElementById("root"));UN.render(d.jsxs(w.StrictMode,{children:[d.jsx(DN,{}),d.jsx(Lb,{position:"bottom-right",toastOptions:{duration:4e3,success:{duration:3e3,style:{background:"#10B981",color:"white"}},error:{duration:5e3,style:{background:"#EF4444",color:"white"}}}})]}));export{yt as c,Ku as g};
